2194cd03b5e902c48a202c37b61bae55
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ScoringConfigManager = void 0;
const types_1 = require("./types");
const config_types_1 = require("./config-types");
// WeightsManager removed - using default weights
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
/**
 * スコアリング設定管理システム
 * rimor.config.json との統合とスコアリング専用設定の管理
 */
class ScoringConfigManager {
    // WeightsManager removed
    constructor() {
        // WeightsManager initialization removed
    }
    /**
     * Get default weights
     */
    getDefaultWeights() {
        return {
            dimensions: {
                correctness: 0.25,
                completeness: 0.25,
                maintainability: 0.20,
                performance: 0.15,
                security: 0.15
            },
            plugins: {
                'test-existence': 1.0,
                'assertion-exists': 1.0
            }
        };
    }
    /**
     * スコアリング設定を読み込み
     * @param configDir 設定ディレクトリ
     * @returns スコアリング設定
     */
    async loadScoringConfig(configDir) {
        try {
            // ディレクトリパスのセキュリティ検証
            if (!this.isSecurePath(configDir)) {
                // テスト環境では警告を抑制
                if (process.env.NODE_ENV !== 'test' && process.env.JEST_WORKER_ID === undefined) {
                    console.warn('設定ディレクトリのパスが安全でないため、デフォルト設定を使用します');
                }
                return this.getDefaultScoringConfig();
            }
            const configPath = await this.findConfigFile(configDir);
            if (!configPath) {
                return this.getDefaultScoringConfig();
            }
            // 設定ファイルパスのセキュリティ検証
            if (!this.isSecurePath(configPath)) {
                console.warn('設定ファイルのパスが安全でないため、デフォルト設定を使用します');
                return this.getDefaultScoringConfig();
            }
            const configContent = fs_1.default.readFileSync(configPath, 'utf-8');
            // ファイルサイズ制限（1MB）
            if (configContent.length > 1024 * 1024) {
                console.warn('設定ファイルが大きすぎるため、デフォルト設定を使用します');
                return this.getDefaultScoringConfig();
            }
            const config = this.secureJsonParse(configContent);
            if (!(0, config_types_1.isJsonObject)(config) || !config.scoring) {
                return this.getDefaultScoringConfig();
            }
            const scoringSection = config.scoring;
            if (!(0, config_types_1.isPartialScoringConfig)(scoringSection)) {
                return this.getDefaultScoringConfig();
            }
            return this.buildScoringConfig(scoringSection);
        }
        catch (error) {
            console.warn(`スコアリング設定の読み込みでエラーが発生しました: ${error instanceof Error ? error.message : '不明なエラー'}`);
            return this.getDefaultScoringConfig();
        }
    }
    /**
     * スコアリング設定を保存
     * @param configDir 設定ディレクトリ
     * @param scoringConfig スコアリング設定
     */
    async saveScoringConfig(configDir, scoringConfig) {
        // ディレクトリパスのセキュリティ検証
        if (!this.isSecurePath(configDir)) {
            throw new Error('設定ディレクトリのパスが安全ではありません');
        }
        const configPath = path_1.default.join(configDir, 'rimor.config.json');
        // 設定ファイルパスのセキュリティ検証
        if (!this.isSecurePath(configPath)) {
            throw new Error('設定ファイルのパスが安全ではありません');
        }
        // 設定の妥当性検証
        const validation = this.validateScoringConfig(scoringConfig);
        if (!validation.isValid) {
            throw new Error(`設定が無効です: ${validation.errors.join(', ')}`);
        }
        let existingConfig = {};
        // 既存の設定ファイルがある場合は読み込み
        if (fs_1.default.existsSync(configPath)) {
            try {
                const existingContent = fs_1.default.readFileSync(configPath, 'utf-8');
                // ファイルサイズ制限（1MB）
                if (existingContent.length > 1024 * 1024) {
                    console.warn('既存設定ファイルが大きすぎるため、新規作成します');
                    existingConfig = {};
                }
                else {
                    const parsed = this.secureJsonParse(existingContent);
                    existingConfig = (0, config_types_1.isJsonObject)(parsed) ? parsed : {};
                }
            }
            catch (error) {
                console.warn(`既存設定ファイルの読み込みでエラー: ${error instanceof Error ? error.message : '不明なエラー'}`);
                existingConfig = {};
            }
        }
        // スコアリング設定を統合
        const updatedConfig = {
            ...existingConfig,
            scoring: scoringConfig
        };
        // ディレクトリが存在しない場合は作成
        if (!fs_1.default.existsSync(configDir)) {
            fs_1.default.mkdirSync(configDir, { recursive: true });
        }
        // JSON出力のサイズ制限
        const configJson = JSON.stringify(updatedConfig, null, 2);
        if (configJson.length > 1024 * 1024) {
            throw new Error('設定ファイルが制限サイズを超過しています');
        }
        fs_1.default.writeFileSync(configPath, configJson);
    }
    /**
     * プリセット設定を生成
     * @param preset プリセット名
     * @returns プリセットスコアリング設定
     */
    generatePresetConfig(preset) {
        // Use default weights
        const weights = this.getDefaultWeights();
        const gradeThresholds = this.generatePresetGradeThresholds(preset);
        const options = this.generatePresetOptions(preset);
        return {
            enabled: true,
            weights,
            gradeThresholds,
            options
        };
    }
    /**
     * スコアリング設定の妥当性を検証
     * @param config スコアリング設定
     * @returns 検証結果
     */
    validateScoringConfig(config) {
        const errors = [];
        const warnings = [];
        const suggestions = [];
        // 必須フィールドの確認
        if (typeof config.enabled !== 'boolean') {
            errors.push('enabled フィールドはboolean型である必要があります');
        }
        if (!config.weights) {
            errors.push('weights フィールドが必要です');
        }
        else {
            // 重み設定の検証
            // Simple weight validation
            if (!config.weights || typeof config.weights !== 'object') {
                errors.push('重み設定が無効です');
            }
        }
        if (!config.gradeThresholds) {
            errors.push('gradeThresholds フィールドが必要です');
        }
        else {
            // グレード閾値の検証
            const gradeValidation = this.validateGradeThresholds(config.gradeThresholds);
            errors.push(...gradeValidation.errors);
            warnings.push(...gradeValidation.warnings);
            suggestions.push(...gradeValidation.suggestions);
        }
        // オプション設定の検証
        if (config.options) {
            const optionValidation = this.validateOptions(config.options);
            warnings.push(...optionValidation.warnings);
            suggestions.push(...optionValidation.suggestions);
        }
        return {
            isValid: errors.length === 0,
            errors,
            warnings,
            suggestions
        };
    }
    /**
     * レガシー設定から新設定への移行
     * @param legacyConfig レガシー設定
     * @returns 新しいスコアリング設定
     */
    migrateFromLegacyConfig(legacyConfig) {
        const weights = {
            plugins: {},
            dimensions: { ...types_1.DEFAULT_WEIGHTS.dimensions }
        };
        // レガシープラグイン設定の変換
        if (legacyConfig.plugins) {
            for (const [pluginId, pluginConfig] of Object.entries(legacyConfig.plugins)) {
                if (typeof pluginConfig === 'object' && pluginConfig.weight) {
                    weights.plugins[pluginId] = pluginConfig.weight;
                }
            }
        }
        // レガシー品質設定の変換
        let gradeThresholds = { ...types_1.GRADE_THRESHOLDS };
        if (legacyConfig.quality?.thresholds) {
            const legacy = legacyConfig.quality.thresholds;
            gradeThresholds = {
                A: legacy.excellent || 90,
                B: legacy.good || 80,
                C: legacy.acceptable || 70,
                D: legacy.poor || 60,
                F: 0
            };
        }
        // strictMode の変換
        if (legacyConfig.quality?.strictMode) {
            // 厳格モードの場合は重みを調整
            weights.dimensions.correctness *= 1.5;
            weights.dimensions.security *= 1.3;
            // 閾値も厳しく
            gradeThresholds.A = Math.max(gradeThresholds.A, 95);
            gradeThresholds.B = Math.max(gradeThresholds.B, 85);
        }
        return {
            enabled: true,
            weights,
            gradeThresholds,
            options: {
                enableTrends: false, // レガシーではトレンド機能なし
                enablePredictions: false,
                cacheResults: true,
                reportFormat: 'summary'
            }
        };
    }
    /**
     * 設定の最適化提案を生成
     * @param currentConfig 現在の設定
     * @param projectStats プロジェクト統計
     * @returns 最適化された設定
     */
    async generateOptimizedConfig(currentConfig, projectStats) {
        // 重みの最適化
        // Use default weights for optimization
        const optimizedWeights = this.getDefaultWeights();
        // グレード閾値の最適化
        const optimizedThresholds = this.optimizeGradeThresholds(currentConfig.gradeThresholds, projectStats.gradeDistribution, projectStats.averageScore);
        return {
            ...currentConfig,
            weights: optimizedWeights,
            gradeThresholds: optimizedThresholds
        };
    }
    // === プライベートメソッド ===
    /**
     * パス検証によるセキュリティチェック
     * パストラバーサル攻撃を防ぐための検証
     */
    isSecurePath(inputPath) {
        try {
            const resolvedPath = path_1.default.resolve(inputPath);
            const normalizedPath = path_1.default.normalize(inputPath);
            // パストラバーサル攻撃の検出
            if (normalizedPath.includes('..') || normalizedPath.includes('~')) {
                return false;
            }
            // 絶対パスの制限（プロジェクトルート配下のみ許可）
            const cwd = process.cwd();
            if (!resolvedPath.startsWith(cwd)) {
                return false;
            }
            // 危険なファイル名パターンの検出
            const dangerousPatterns = [
                /\/etc\//, /\/proc\//, /\/sys\//, /\/dev\//, // システムディレクトリ
                /\.\.\//, /~\//, /\$\{/, /\$\(/, // シェル/環境変数
                /\x00/, /\x01-\x1f/ // 制御文字
            ];
            return !dangerousPatterns.some(pattern => pattern.test(resolvedPath));
        }
        catch {
            return false;
        }
    }
    /**
     * JSON設定の安全な解析
     * セキュリティリスクのある値を検出・無害化
     */
    secureJsonParse(content) {
        try {
            // 基本的なJSON解析
            const parsed = JSON.parse(content);
            // オブジェクトでない場合は拒否
            if (typeof parsed !== 'object' || parsed === null || Array.isArray(parsed)) {
                throw new Error('設定ファイルはオブジェクト形式である必要があります');
            }
            // 危険なプロパティの除去
            return this.sanitizeConfigObject(parsed);
        }
        catch (error) {
            throw new Error(`設定ファイルの解析に失敗しました: ${error instanceof Error ? error.message : '不明なエラー'}`);
        }
    }
    /**
     * 設定オブジェクトの無害化
     */
    sanitizeConfigObject(obj, depth = 0) {
        // 循環参照・深すぎるネストの防止
        if (depth > 10) {
            throw new Error('設定ファイルの構造が複雑すぎます');
        }
        if (typeof obj !== 'object' || obj === null) {
            return this.sanitizeValue(obj);
        }
        // 配列の処理
        if (Array.isArray(obj)) {
            return obj.map(item => this.sanitizeConfigObject(item, depth + 1));
        }
        const sanitized = {};
        const allowedKeys = new Set([
            'scoring', 'enabled', 'weights', 'gradeThresholds', 'options',
            'plugins', 'dimensions', 'enableTrends', 'enablePredictions',
            'cacheResults', 'reportFormat', 'A', 'B', 'C', 'D', 'F',
            'excludePatterns', 'output'
        ]);
        for (const [key, value] of Object.entries(obj)) {
            // キー名の検証
            if (typeof key !== 'string' || key.length > 100) {
                continue; // 危険なキーは無視
            }
            // 危険なキーパターンの検出
            if (key.startsWith('__') || key.includes('constructor') || key.includes('prototype')) {
                continue;
            }
            // 許可されたキーのみ処理（設定の文脈外では制限）
            if (depth === 0 || allowedKeys.has(key) || key.match(/^[a-zA-Z][a-zA-Z0-9_-]*$/)) {
                sanitized[key] = this.sanitizeConfigObject(value, depth + 1);
            }
        }
        return sanitized;
    }
    /**
     * 値の無害化
     */
    sanitizeValue(value) {
        if (typeof value === 'string') {
            // 文字列長の制限
            if (value.length > 1000) {
                return value.substring(0, 1000);
            }
            // 危険なパターンの除去
            return value.replace(/[<>'"&\x00-\x1f]/g, '');
        }
        if (typeof value === 'number') {
            // 数値の範囲制限
            if (!Number.isFinite(value)) {
                return 0;
            }
            return Math.max(-10000, Math.min(10000, value));
        }
        if (typeof value === 'boolean') {
            return value;
        }
        // その他の型は無視
        return null;
    }
    /**
     * デフォルトスコアリング設定を取得
     */
    getDefaultScoringConfig() {
        return {
            enabled: true,
            weights: types_1.DEFAULT_WEIGHTS,
            gradeThresholds: { ...types_1.GRADE_THRESHOLDS },
            options: {
                enableTrends: true,
                enablePredictions: false,
                cacheResults: true,
                reportFormat: 'detailed'
            }
        };
    }
    /**
     * 設定ファイルを検索
     */
    async findConfigFile(startDir) {
        const configFilenames = ['rimor.config.json', '.rimorrc.json', '.rimorrc'];
        let currentDir = path_1.default.resolve(startDir);
        const rootDir = path_1.default.parse(currentDir).root;
        const projectRoot = process.cwd();
        // 最大検索階層を制限（無限ループ防止）
        let maxLevels = 10;
        while (currentDir !== rootDir && maxLevels > 0) {
            // セキュリティ: プロジェクトルート配下のみ検索
            if (!currentDir.startsWith(projectRoot)) {
                break;
            }
            for (const filename of configFilenames) {
                const configPath = path_1.default.join(currentDir, filename);
                // パスのセキュリティ検証
                if (this.isSecurePath(configPath) && fs_1.default.existsSync(configPath)) {
                    // ファイルの基本チェック
                    try {
                        const stats = fs_1.default.statSync(configPath);
                        // 通常ファイル・サイズ制限（1MB）・読み取り権限の確認
                        if (stats.isFile() && stats.size < 1024 * 1024) {
                            return configPath;
                        }
                    }
                    catch (error) {
                        // ファイル情報取得エラーは無視して次へ
                        continue;
                    }
                }
            }
            currentDir = path_1.default.dirname(currentDir);
            maxLevels--;
        }
        return null;
    }
    /**
     * 設定ファイルからスコアリング設定を構築
     */
    buildScoringConfig(scoringSection) {
        const config = {
            enabled: scoringSection.enabled !== false, // デフォルトtrue
            weights: types_1.DEFAULT_WEIGHTS,
            gradeThresholds: { ...types_1.GRADE_THRESHOLDS }
        };
        // 重み設定の処理
        if (scoringSection.weights) {
            const defaultWeights = this.getDefaultWeights();
            config.weights = {
                plugins: {
                    ...defaultWeights.plugins,
                    ...(scoringSection.weights.plugins || {})
                },
                dimensions: {
                    ...defaultWeights.dimensions,
                    ...(scoringSection.weights.dimensions || {})
                }
            };
        }
        // グレード閾値の処理
        if (scoringSection.gradeThresholds) {
            config.gradeThresholds = this.sanitizeGradeThresholds(scoringSection.gradeThresholds);
        }
        // オプション設定の処理
        if (scoringSection.options) {
            config.options = {
                enableTrends: scoringSection.options.enableTrends !== false,
                enablePredictions: scoringSection.options.enablePredictions === true,
                cacheResults: scoringSection.options.cacheResults !== false,
                reportFormat: scoringSection.options.reportFormat || 'detailed'
            };
        }
        return config;
    }
    /**
     * プリセット用グレード閾値を生成
     */
    generatePresetGradeThresholds(preset) {
        switch (preset) {
            case 'strict':
                return { A: 95, B: 85, C: 75, D: 65, F: 0 };
            case 'balanced':
                return { A: 90, B: 80, C: 70, D: 60, F: 0 };
            case 'performance':
                return { A: 88, B: 78, C: 68, D: 58, F: 0 };
            case 'legacy':
                return { A: 85, B: 75, C: 65, D: 55, F: 0 };
            default:
                return { ...types_1.GRADE_THRESHOLDS };
        }
    }
    /**
     * プリセット用オプションを生成
     */
    generatePresetOptions(preset) {
        switch (preset) {
            case 'strict':
                return {
                    enableTrends: true,
                    enablePredictions: true,
                    cacheResults: true,
                    reportFormat: 'detailed'
                };
            case 'performance':
                return {
                    enableTrends: false,
                    enablePredictions: false,
                    cacheResults: true,
                    reportFormat: 'minimal'
                };
            case 'legacy':
                return {
                    enableTrends: false,
                    enablePredictions: false,
                    cacheResults: false,
                    reportFormat: 'summary'
                };
            default:
                return {
                    enableTrends: true,
                    enablePredictions: false,
                    cacheResults: true,
                    reportFormat: 'detailed'
                };
        }
    }
    /**
     * グレード閾値の妥当性を検証
     */
    validateGradeThresholds(thresholds) {
        const errors = [];
        const warnings = [];
        const suggestions = [];
        // 必須グレードの確認
        const requiredGrades = ['A', 'B', 'C', 'D', 'F'];
        for (const grade of requiredGrades) {
            if (!(grade in thresholds) || typeof thresholds[grade] !== 'number') {
                errors.push(`グレード "${grade}" の閾値が定義されていません`);
            }
        }
        if (errors.length === 0) {
            // 値の範囲確認
            for (const [grade, threshold] of Object.entries(thresholds)) {
                if (threshold < 0 || threshold > 100) {
                    errors.push(`グレード "${grade}" の閾値 (${threshold}) は0-100の範囲である必要があります`);
                }
            }
            // 順序確認（A > B > C > D > F）
            if (thresholds.A <= thresholds.B ||
                thresholds.B <= thresholds.C ||
                thresholds.C <= thresholds.D ||
                thresholds.D <= thresholds.F) {
                errors.push('グレード閾値の順序が正しくありません (A > B > C > D > F である必要があります)');
            }
            // 間隔の警告
            const gaps = [
                thresholds.A - thresholds.B,
                thresholds.B - thresholds.C,
                thresholds.C - thresholds.D,
                thresholds.D - thresholds.F
            ];
            if (gaps.some(gap => gap < 5)) {
                warnings.push('グレード間の差が小さすぎる可能性があります（5点未満）');
                suggestions.push('グレード間により明確な差をつけることを検討してください');
            }
            if (gaps.some(gap => gap > 20)) {
                warnings.push('グレード間の差が大きすぎる可能性があります（20点超）');
                suggestions.push('グレード間の差をより均等にすることを検討してください');
            }
        }
        return { isValid: errors.length === 0, errors, warnings, suggestions };
    }
    /**
     * オプション設定の妥当性を検証
     */
    validateOptions(options) {
        const warnings = [];
        const suggestions = [];
        if (options?.reportFormat && !['detailed', 'summary', 'minimal'].includes(options.reportFormat)) {
            warnings.push(`不明なレポート形式: ${options.reportFormat}`);
            suggestions.push('reportFormatは "detailed", "summary", "minimal" のいずれかを指定してください');
        }
        if (options?.enablePredictions && !options?.enableTrends) {
            warnings.push('予測機能を有効にする場合、トレンド機能も有効にすることをお勧めします');
        }
        return { isValid: true, errors: [], warnings, suggestions };
    }
    /**
     * グレード閾値を正常化
     */
    sanitizeGradeThresholds(thresholds) {
        const sanitized = { ...types_1.GRADE_THRESHOLDS };
        if (!(0, config_types_1.isJsonObject)(thresholds)) {
            return sanitized;
        }
        const grades = ['A', 'B', 'C', 'D', 'F'];
        for (const grade of grades) {
            const value = thresholds[grade];
            if (typeof value === 'number') {
                sanitized[grade] = Math.max(0, Math.min(100, value));
            }
        }
        return sanitized;
    }
    /**
     * グレード閾値を最適化
     */
    optimizeGradeThresholds(current, distribution, averageScore) {
        const optimized = { ...current };
        // 平均スコアに基づく調整
        if (averageScore > 85) {
            // 平均が高い場合は基準を厳しく
            optimized.A = Math.min(optimized.A + 2, 95);
            optimized.B = Math.min(optimized.B + 2, optimized.A - 5);
        }
        else if (averageScore < 70) {
            // 平均が低い場合は基準を緩く
            optimized.A = Math.max(optimized.A - 2, 85);
            optimized.B = Math.max(optimized.B - 2, optimized.A - 15);
        }
        // 分布に基づく調整（極端な偏りを修正）
        const totalFiles = Object.values(distribution).reduce((sum, count) => sum + count, 0);
        if (totalFiles > 0) {
            const aRatio = distribution.A / totalFiles;
            const fRatio = distribution.F / totalFiles;
            if (aRatio > 0.5) {
                // A評価が多すぎる場合は基準を厳しく
                optimized.A += 3;
            }
            else if (fRatio > 0.3) {
                // F評価が多すぎる場合は基準を緩く
                optimized.A -= 2;
                optimized.B -= 2;
            }
        }
        return optimized;
    }
}
exports.ScoringConfigManager = ScoringConfigManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3Nhc2FrYW1hL1Byb2plY3RzL1JpbW9yL3NyYy9zY29yaW5nL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxtQ0FLaUI7QUFDakIsaURBUXdCO0FBQ3hCLGlEQUFpRDtBQUNqRCw0Q0FBb0I7QUFDcEIsZ0RBQXdCO0FBMkJ4Qjs7O0dBR0c7QUFDSCxNQUFhLG9CQUFvQjtJQUMvQix5QkFBeUI7SUFFekI7UUFDRSx3Q0FBd0M7SUFDMUMsQ0FBQztJQUVEOztPQUVHO0lBQ0ssaUJBQWlCO1FBQ3ZCLE9BQU87WUFDTCxVQUFVLEVBQUU7Z0JBQ1YsV0FBVyxFQUFFLElBQUk7Z0JBQ2pCLFlBQVksRUFBRSxJQUFJO2dCQUNsQixlQUFlLEVBQUUsSUFBSTtnQkFDckIsV0FBVyxFQUFFLElBQUk7Z0JBQ2pCLFFBQVEsRUFBRSxJQUFJO2FBQ2Y7WUFDRCxPQUFPLEVBQUU7Z0JBQ1AsZ0JBQWdCLEVBQUUsR0FBRztnQkFDckIsa0JBQWtCLEVBQUUsR0FBRzthQUN4QjtTQUNGLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxTQUFpQjtRQUN2QyxJQUFJLENBQUM7WUFDSCxvQkFBb0I7WUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQztnQkFDbEMsZUFBZTtnQkFDZixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLE1BQU0sSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsS0FBSyxTQUFTLEVBQUUsQ0FBQztvQkFDaEYsT0FBTyxDQUFDLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO2dCQUNwRCxDQUFDO2dCQUNELE9BQU8sSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7WUFDeEMsQ0FBQztZQUVELE1BQU0sVUFBVSxHQUFHLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUV4RCxJQUFJLENBQUMsVUFBVSxFQUFFLENB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QUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0RixJQUFJLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNuQixNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQztZQUMzQyxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQztZQUUzQyxJQUFJLE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQztnQkFDakIsb0JBQW9CO2dCQUNwQixTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuQixDQUFDO2lCQUFNLElBQUksTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDO2dCQUN4QixtQkFBbUI7Z0JBQ25CLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNqQixTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuQixDQUFDO1FBQ0gsQ0FBQztRQUVELE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7Q0FDRjtBQTN0QkQsb0RBMnRCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvc2FzYWthbWEvUHJvamVjdHMvUmltb3Ivc3JjL3Njb3JpbmcvY29uZmlnLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFxuICBXZWlnaHRDb25maWcsIFxuICBERUZBVUxUX1dFSUdIVFMsXG4gIEdSQURFX1RIUkVTSE9MRFMsXG4gIEdyYWRlVHlwZVxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7XG4gIExlZ2FjeUNvbmZpZyxcbiAgSnNvblZhbHVlLFxuICBKc29uT2JqZWN0LFxuICBQYXJ0aWFsU2NvcmluZ0NvbmZpZyxcbiAgaXNKc29uT2JqZWN0LFxuICBpc0pzb25WYWx1ZSxcbiAgaXNQYXJ0aWFsU2NvcmluZ0NvbmZpZ1xufSBmcm9tICcuL2NvbmZpZy10eXBlcyc7XG4vLyBXZWlnaHRzTWFuYWdlciByZW1vdmVkIC0gdXNpbmcgZGVmYXVsdCB3ZWlnaHRzXG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbi8qKlxuICog44K544Kz44Ki44Oq44Oz44Kw6Kit5a6a44Gu5a6M5YWo44Gq5qeL6YCgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2NvcmluZ0NvbmZpZyB7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIHdlaWdodHM6IFdlaWdodENvbmZpZztcbiAgZ3JhZGVUaHJlc2hvbGRzOiBSZWNvcmQ8R3JhZGVUeXBlLCBudW1iZXI+O1xuICBvcHRpb25zPzoge1xuICAgIGVuYWJsZVRyZW5kcz86IGJvb2xlYW47XG4gICAgZW5hYmxlUHJlZGljdGlvbnM/OiBib29sZWFuO1xuICAgIGNhY2hlUmVzdWx0cz86IGJvb2xlYW47XG4gICAgcmVwb3J0Rm9ybWF0PzogJ2RldGFpbGVkJyB8ICdzdW1tYXJ5JyB8ICdtaW5pbWFsJztcbiAgfTtcbn1cblxuLyoqXG4gKiDoqK3lrprjg5Djg6rjg4fjg7zjgrfjg6fjg7PntZDmnpxcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb25maWdWYWxpZGF0aW9uUmVzdWx0IHtcbiAgaXNWYWxpZDogYm9vbGVhbjtcbiAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgd2FybmluZ3M6IHN0cmluZ1tdO1xuICBzdWdnZXN0aW9uczogc3RyaW5nW107XG59XG5cbi8qKlxuICog44K544Kz44Ki44Oq44Oz44Kw6Kit5a6a566h55CG44K344K544OG44OgXG4gKiByaW1vci5jb25maWcuanNvbiDjgajjga7ntbHlkIjjgajjgrnjgrPjgqLjg6rjg7PjgrDlsILnlKjoqK3lrprjga7nrqHnkIZcbiAqL1xuZXhwb3J0IGNsYXNzIFNjb3JpbmdDb25maWdNYW5hZ2VyIHtcbiAgLy8gV2VpZ2h0c01hbmFnZXIgcmVtb3ZlZFxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFdlaWdodHNNYW5hZ2VyIGluaXRpYWxpemF0aW9uIHJlbW92ZWRcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGVmYXVsdCB3ZWlnaHRzXG4gICAqL1xuICBwcml2YXRlIGdldERlZmF1bHRXZWlnaHRzKCk6IFdlaWdodENvbmZpZyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpbWVuc2lvbnM6IHtcbiAgICAgICAgY29ycmVjdG5lc3M6IDAuMjUsXG4gICAgICAgIGNvbXBsZXRlbmVzczogMC4yNSxcbiAgICAgICAgbWFpbnRhaW5hYmlsaXR5OiAwLjIwLFxuICAgICAgICBwZXJmb3JtYW5jZTogMC4xNSxcbiAgICAgICAgc2VjdXJpdHk6IDAuMTVcbiAgICAgIH0sXG4gICAgICBwbHVnaW5zOiB7XG4gICAgICAgICd0ZXN0LWV4aXN0ZW5jZSc6IDEuMCxcbiAgICAgICAgJ2Fzc2VydGlvbi1leGlzdHMnOiAxLjBcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOOCueOCs+OCouODquODs+OCsOioreWumuOCkuiqreOBv+i+vOOBv1xuICAgKiBAcGFyYW0gY29uZmlnRGlyIOioreWumuODh+OCo+ODrOOCr+ODiOODqlxuICAgKiBAcmV0dXJucyDjgrnjgrPjgqLjg6rjg7PjgrDoqK3lrppcbiAgICovXG4gIGFzeW5jIGxvYWRTY29yaW5nQ29uZmlnKGNvbmZpZ0Rpcjogc3RyaW5nKTogUHJvbWlzZTxTY29yaW5nQ29uZmlnPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOODh+OCo+ODrOOCr+ODiOODquODkeOCueOBruOCu+OCreODpeODquODhuOCo+aknOiovFxuICAgICAgaWYgKCF0aGlzLmlzU2VjdXJlUGF0aChjb25maWdEaXIpKSB7XG4gICAgICAgIC8vIOODhuOCueODiOeSsOWig+OBp+OBr+itpuWRiuOCkuaKkeWItlxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0JyAmJiBwcm9jZXNzLmVudi5KRVNUX1dPUktFUl9JRCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCfoqK3lrprjg4fjgqPjg6zjgq/jg4jjg6rjga7jg5HjgrnjgYzlronlhajjgafjgarjgYTjgZ/jgoHjgIHjg4fjg5Xjgqnjg6vjg4joqK3lrprjgpLkvb/nlKjjgZfjgb7jgZknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0U2NvcmluZ0NvbmZpZygpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25maWdQYXRoID0gYXdhaXQgdGhpcy5maW5kQ29uZmlnRmlsZShjb25maWdEaXIpO1xuICAgICAgXG4gICAgICBpZiAoIWNvbmZpZ1BhdGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdFNjb3JpbmdDb25maWcoKTtcbiAgICAgIH1cblxuICAgICAgLy8g6Kit5a6a44OV44Kh44Kk44Or44OR44K544Gu44K744Kt44Ol44Oq44OG44Kj5qSc6Ki8XG4gICAgICBpZiAoIXRoaXMuaXNTZWN1cmVQYXRoKGNvbmZpZ1BhdGgpKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign6Kit5a6a44OV44Kh44Kk44Or44Gu44OR44K544GM5a6J5YWo44Gn44Gq44GE44Gf44KB44CB44OH44OV44Kp44Or44OI6Kit5a6a44KS5L2/55So44GX44G+44GZJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRTY29yaW5nQ29uZmlnKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbmZpZ0NvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoY29uZmlnUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICBcbiAgICAgIC8vIOODleOCoeOCpOODq+OCteOCpOOCuuWItumZkO+8iDFNQu+8iVxuICAgICAgaWYgKGNvbmZpZ0NvbnRlbnQubGVuZ3RoID4gMTAyNCAqIDEwMjQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfoqK3lrprjg5XjgqHjgqTjg6vjgYzlpKfjgY3jgZnjgY7jgovjgZ/jgoHjgIHjg4fjg5Xjgqnjg6vjg4joqK3lrprjgpLkvb/nlKjjgZfjgb7jgZknKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdFNjb3JpbmdDb25maWcoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5zZWN1cmVKc29uUGFyc2UoY29uZmlnQ29udGVudCk7XG4gICAgICBcbiAgICAgIGlmICghaXNKc29uT2JqZWN0KGNvbmZpZykgfHwgIWNvbmZpZy5zY29yaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRTY29yaW5nQ29uZmlnKCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHNjb3JpbmdTZWN0aW9uID0gY29uZmlnLnNjb3Jpbmc7XG4gICAgICBpZiAoIWlzUGFydGlhbFNjb3JpbmdDb25maWcoc2NvcmluZ1NlY3Rpb24pKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRTY29yaW5nQ29uZmlnKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkU2NvcmluZ0NvbmZpZyhzY29yaW5nU2VjdGlvbik7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGDjgrnjgrPjgqLjg6rjg7PjgrDoqK3lrprjga7oqq3jgb/ovrzjgb/jgafjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ86ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn5LiN5piO44Gq44Ko44Op44O8J31gKTtcbiAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRTY29yaW5nQ29uZmlnKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCueOCs+OCouODquODs+OCsOioreWumuOCkuS/neWtmFxuICAgKiBAcGFyYW0gY29uZmlnRGlyIOioreWumuODh+OCo+ODrOOCr+ODiOODqlxuICAgKiBAcGFyYW0gc2NvcmluZ0NvbmZpZyDjgrnjgrPjgqLjg6rjg7PjgrDoqK3lrppcbiAgICovXG4gIGFzeW5jIHNhdmVTY29yaW5nQ29uZmlnKGNvbmZpZ0Rpcjogc3RyaW5nLCBzY29yaW5nQ29uZmlnOiBTY29yaW5nQ29uZmlnKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8g44OH44Kj44Os44Kv44OI44Oq44OR44K544Gu44K744Kt44Ol44Oq44OG44Kj5qSc6Ki8XG4gICAgaWYgKCF0aGlzLmlzU2VjdXJlUGF0aChjb25maWdEaXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ioreWumuODh+OCo+ODrOOCr+ODiOODquOBruODkeOCueOBjOWuieWFqOOBp+OBr+OBguOCiuOBvuOBm+OCkycpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbmZpZ1BhdGggPSBwYXRoLmpvaW4oY29uZmlnRGlyLCAncmltb3IuY29uZmlnLmpzb24nKTtcbiAgICBcbiAgICAvLyDoqK3lrprjg5XjgqHjgqTjg6vjg5Hjgrnjga7jgrvjgq3jg6Xjg6rjg4bjgqPmpJzoqLxcbiAgICBpZiAoIXRoaXMuaXNTZWN1cmVQYXRoKGNvbmZpZ1BhdGgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ioreWumuODleOCoeOCpOODq+OBruODkeOCueOBjOWuieWFqOOBp+OBr+OBguOCiuOBvuOBm+OCkycpO1xuICAgIH1cblxuICAgIC8vIOioreWumuOBruWmpeW9k+aAp+aknOiovFxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlU2NvcmluZ0NvbmZpZyhzY29yaW5nQ29uZmlnKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDoqK3lrprjgYznhKHlirnjgafjgZk6ICR7dmFsaWRhdGlvbi5lcnJvcnMuam9pbignLCAnKX1gKTtcbiAgICB9XG4gICAgXG4gICAgbGV0IGV4aXN0aW5nQ29uZmlnID0ge307XG4gICAgXG4gICAgLy8g5pei5a2Y44Gu6Kit5a6a44OV44Kh44Kk44Or44GM44GC44KL5aC05ZCI44Gv6Kqt44G/6L6844G/XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoY29uZmlnUGF0aCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhjb25maWdQYXRoLCAndXRmLTgnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOODleOCoeOCpOODq+OCteOCpOOCuuWItumZkO+8iDFNQu+8iVxuICAgICAgICBpZiAoZXhpc3RpbmdDb250ZW50Lmxlbmd0aCA+IDEwMjQgKiAxMDI0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCfml6LlrZjoqK3lrprjg5XjgqHjgqTjg6vjgYzlpKfjgY3jgZnjgY7jgovjgZ/jgoHjgIHmlrDopo/kvZzmiJDjgZfjgb7jgZknKTtcbiAgICAgICAgICBleGlzdGluZ0NvbmZpZyA9IHt9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHRoaXMuc2VjdXJlSnNvblBhcnNlKGV4aXN0aW5nQ29udGVudCk7XG4gICAgICAgICAgZXhpc3RpbmdDb25maWcgPSBpc0pzb25PYmplY3QocGFyc2VkKSA/IHBhcnNlZCA6IHt9O1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oYOaXouWtmOioreWumuODleOCoeOCpOODq+OBruiqreOBv+i+vOOBv+OBp+OCqOODqeODvDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfkuI3mmI7jgarjgqjjg6njg7wnfWApO1xuICAgICAgICBleGlzdGluZ0NvbmZpZyA9IHt9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOOCueOCs+OCouODquODs+OCsOioreWumuOCkue1seWQiFxuICAgIGNvbnN0IHVwZGF0ZWRDb25maWcgPSB7XG4gICAgICAuLi5leGlzdGluZ0NvbmZpZyxcbiAgICAgIHNjb3Jpbmc6IHNjb3JpbmdDb25maWdcbiAgICB9O1xuXG4gICAgLy8g44OH44Kj44Os44Kv44OI44Oq44GM5a2Y5Zyo44GX44Gq44GE5aC05ZCI44Gv5L2c5oiQXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGNvbmZpZ0RpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyhjb25maWdEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8vIEpTT07lh7rlipvjga7jgrXjgqTjgrrliLbpmZBcbiAgICBjb25zdCBjb25maWdKc29uID0gSlNPTi5zdHJpbmdpZnkodXBkYXRlZENvbmZpZywgbnVsbCwgMik7XG4gICAgaWYgKGNvbmZpZ0pzb24ubGVuZ3RoID4gMTAyNCAqIDEwMjQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6Kit5a6a44OV44Kh44Kk44Or44GM5Yi26ZmQ44K144Kk44K644KS6LaF6YGO44GX44Gm44GE44G+44GZJyk7XG4gICAgfVxuXG4gICAgZnMud3JpdGVGaWxlU3luYyhjb25maWdQYXRoLCBjb25maWdKc29uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5fjg6rjgrvjg4Pjg4joqK3lrprjgpLnlJ/miJBcbiAgICogQHBhcmFtIHByZXNldCDjg5fjg6rjgrvjg4Pjg4jlkI1cbiAgICogQHJldHVybnMg44OX44Oq44K744OD44OI44K544Kz44Ki44Oq44Oz44Kw6Kit5a6aXG4gICAqL1xuICBnZW5lcmF0ZVByZXNldENvbmZpZyhwcmVzZXQ6ICdzdHJpY3QnIHwgJ2JhbGFuY2VkJyB8ICdwZXJmb3JtYW5jZScgfCAnbGVnYWN5Jyk6IFNjb3JpbmdDb25maWcge1xuICAgIC8vIFVzZSBkZWZhdWx0IHdlaWdodHNcbiAgICBjb25zdCB3ZWlnaHRzID0gdGhpcy5nZXREZWZhdWx0V2VpZ2h0cygpO1xuICAgIFxuICAgIGNvbnN0IGdyYWRlVGhyZXNob2xkcyA9IHRoaXMuZ2VuZXJhdGVQcmVzZXRHcmFkZVRocmVzaG9sZHMocHJlc2V0KTtcbiAgICBcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5nZW5lcmF0ZVByZXNldE9wdGlvbnMocHJlc2V0KTtcblxuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgd2VpZ2h0cyxcbiAgICAgIGdyYWRlVGhyZXNob2xkcyxcbiAgICAgIG9wdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOOCueOCs+OCouODquODs+OCsOioreWumuOBruWmpeW9k+aAp+OCkuaknOiovFxuICAgKiBAcGFyYW0gY29uZmlnIOOCueOCs+OCouODquODs+OCsOioreWumlxuICAgKiBAcmV0dXJucyDmpJzoqLzntZDmnpxcbiAgICovXG4gIHZhbGlkYXRlU2NvcmluZ0NvbmZpZyhjb25maWc6IFNjb3JpbmdDb25maWcpOiBDb25maWdWYWxpZGF0aW9uUmVzdWx0IHtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyDlv4XpoIjjg5XjgqPjg7zjg6vjg4njga7norroqo1cbiAgICBpZiAodHlwZW9mIGNvbmZpZy5lbmFibGVkICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdlbmFibGVkIOODleOCo+ODvOODq+ODieOBr2Jvb2xlYW7lnovjgafjgYLjgovlv4XopoHjgYzjgYLjgorjgb7jgZknKTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy53ZWlnaHRzKSB7XG4gICAgICBlcnJvcnMucHVzaCgnd2VpZ2h0cyDjg5XjgqPjg7zjg6vjg4njgYzlv4XopoHjgafjgZknKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g6YeN44G/6Kit5a6a44Gu5qSc6Ki8XG4gICAgICAvLyBTaW1wbGUgd2VpZ2h0IHZhbGlkYXRpb25cbiAgICAgIGlmICghY29uZmlnLndlaWdodHMgfHwgdHlwZW9mIGNvbmZpZy53ZWlnaHRzICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMucHVzaCgn6YeN44G/6Kit5a6a44GM54Sh5Yq544Gn44GZJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcuZ3JhZGVUaHJlc2hvbGRzKSB7XG4gICAgICBlcnJvcnMucHVzaCgnZ3JhZGVUaHJlc2hvbGRzIOODleOCo+ODvOODq+ODieOBjOW/heimgeOBp+OBmScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDjgrDjg6zjg7zjg4nplr7lgKTjga7mpJzoqLxcbiAgICAgIGNvbnN0IGdyYWRlVmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVHcmFkZVRocmVzaG9sZHMoY29uZmlnLmdyYWRlVGhyZXNob2xkcyk7XG4gICAgICBlcnJvcnMucHVzaCguLi5ncmFkZVZhbGlkYXRpb24uZXJyb3JzKTtcbiAgICAgIHdhcm5pbmdzLnB1c2goLi4uZ3JhZGVWYWxpZGF0aW9uLndhcm5pbmdzKTtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goLi4uZ3JhZGVWYWxpZGF0aW9uLnN1Z2dlc3Rpb25zKTtcbiAgICB9XG5cbiAgICAvLyDjgqrjg5fjgrfjg6fjg7PoqK3lrprjga7mpJzoqLxcbiAgICBpZiAoY29uZmlnLm9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IG9wdGlvblZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlT3B0aW9ucyhjb25maWcub3B0aW9ucyk7XG4gICAgICB3YXJuaW5ncy5wdXNoKC4uLm9wdGlvblZhbGlkYXRpb24ud2FybmluZ3MpO1xuICAgICAgc3VnZ2VzdGlvbnMucHVzaCguLi5vcHRpb25WYWxpZGF0aW9uLnN1Z2dlc3Rpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICAgIGVycm9ycyxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgc3VnZ2VzdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOODrOOCrOOCt+ODvOioreWumuOBi+OCieaWsOioreWumuOBuOOBruenu+ihjFxuICAgKiBAcGFyYW0gbGVnYWN5Q29uZmlnIOODrOOCrOOCt+ODvOioreWumlxuICAgKiBAcmV0dXJucyDmlrDjgZfjgYTjgrnjgrPjgqLjg6rjg7PjgrDoqK3lrppcbiAgICovXG4gIG1pZ3JhdGVGcm9tTGVnYWN5Q29uZmlnKGxlZ2FjeUNvbmZpZzogTGVnYWN5Q29uZmlnKTogU2NvcmluZ0NvbmZpZyB7XG4gICAgY29uc3Qgd2VpZ2h0czogV2VpZ2h0Q29uZmlnID0ge1xuICAgICAgcGx1Z2luczoge30sXG4gICAgICBkaW1lbnNpb25zOiB7IC4uLkRFRkFVTFRfV0VJR0hUUy5kaW1lbnNpb25zIH1cbiAgICB9O1xuXG4gICAgLy8g44Os44Ks44K344O844OX44Op44Kw44Kk44Oz6Kit5a6a44Gu5aSJ5o+bXG4gICAgaWYgKGxlZ2FjeUNvbmZpZy5wbHVnaW5zKSB7XG4gICAgICBmb3IgKGNvbnN0IFtwbHVnaW5JZCwgcGx1Z2luQ29uZmlnXSBvZiBPYmplY3QuZW50cmllcyhsZWdhY3lDb25maWcucGx1Z2lucykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5Db25maWcgPT09ICdvYmplY3QnICYmIHBsdWdpbkNvbmZpZy53ZWlnaHQpIHtcbiAgICAgICAgICB3ZWlnaHRzLnBsdWdpbnNbcGx1Z2luSWRdID0gcGx1Z2luQ29uZmlnLndlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOODrOOCrOOCt+ODvOWTgeizquioreWumuOBruWkieaPm1xuICAgIGxldCBncmFkZVRocmVzaG9sZHM6IFJlY29yZDxHcmFkZVR5cGUsIG51bWJlcj4gPSB7IC4uLkdSQURFX1RIUkVTSE9MRFMgfTtcbiAgICBcbiAgICBpZiAobGVnYWN5Q29uZmlnLnF1YWxpdHk/LnRocmVzaG9sZHMpIHtcbiAgICAgIGNvbnN0IGxlZ2FjeSA9IGxlZ2FjeUNvbmZpZy5xdWFsaXR5LnRocmVzaG9sZHM7XG4gICAgICBncmFkZVRocmVzaG9sZHMgPSB7XG4gICAgICAgIEE6IGxlZ2FjeS5leGNlbGxlbnQgfHwgOTAsXG4gICAgICAgIEI6IGxlZ2FjeS5nb29kIHx8IDgwLFxuICAgICAgICBDOiBsZWdhY3kuYWNjZXB0YWJsZSB8fCA3MCxcbiAgICAgICAgRDogbGVnYWN5LnBvb3IgfHwgNjAsXG4gICAgICAgIEY6IDBcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gc3RyaWN0TW9kZSDjga7lpInmj5tcbiAgICBpZiAobGVnYWN5Q29uZmlnLnF1YWxpdHk/LnN0cmljdE1vZGUpIHtcbiAgICAgIC8vIOWOs+agvOODouODvOODieOBruWgtOWQiOOBr+mHjeOBv+OCkuiqv+aVtFxuICAgICAgd2VpZ2h0cy5kaW1lbnNpb25zLmNvcnJlY3RuZXNzICo9IDEuNTtcbiAgICAgIHdlaWdodHMuZGltZW5zaW9ucy5zZWN1cml0eSAqPSAxLjM7XG4gICAgICBcbiAgICAgIC8vIOmWvuWApOOCguWOs+OBl+OBj1xuICAgICAgZ3JhZGVUaHJlc2hvbGRzLkEgPSBNYXRoLm1heChncmFkZVRocmVzaG9sZHMuQSwgOTUpO1xuICAgICAgZ3JhZGVUaHJlc2hvbGRzLkIgPSBNYXRoLm1heChncmFkZVRocmVzaG9sZHMuQiwgODUpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgd2VpZ2h0cyxcbiAgICAgIGdyYWRlVGhyZXNob2xkcyxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgZW5hYmxlVHJlbmRzOiBmYWxzZSwgLy8g44Os44Ks44K344O844Gn44Gv44OI44Os44Oz44OJ5qmf6IO944Gq44GXXG4gICAgICAgIGVuYWJsZVByZWRpY3Rpb25zOiBmYWxzZSxcbiAgICAgICAgY2FjaGVSZXN1bHRzOiB0cnVlLFxuICAgICAgICByZXBvcnRGb3JtYXQ6ICdzdW1tYXJ5J1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog6Kit5a6a44Gu5pyA6YGp5YyW5o+Q5qGI44KS55Sf5oiQXG4gICAqIEBwYXJhbSBjdXJyZW50Q29uZmlnIOePvuWcqOOBruioreWumlxuICAgKiBAcGFyYW0gcHJvamVjdFN0YXRzIOODl+ODreOCuOOCp+OCr+ODiOe1seioiFxuICAgKiBAcmV0dXJucyDmnIDpganljJbjgZXjgozjgZ/oqK3lrppcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlT3B0aW1pemVkQ29uZmlnKFxuICAgIGN1cnJlbnRDb25maWc6IFNjb3JpbmdDb25maWcsXG4gICAgcHJvamVjdFN0YXRzOiB7XG4gICAgICB0b3RhbEZpbGVzOiBudW1iZXI7XG4gICAgICBhdmVyYWdlU2NvcmU6IG51bWJlcjtcbiAgICAgIHBsdWdpblVzYWdlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAgICAgZGltZW5zaW9uSW1wb3J0YW5jZTogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgICAgIGdyYWRlRGlzdHJpYnV0aW9uOiBSZWNvcmQ8R3JhZGVUeXBlLCBudW1iZXI+O1xuICAgIH1cbiAgKTogUHJvbWlzZTxTY29yaW5nQ29uZmlnPiB7XG4gICAgLy8g6YeN44G/44Gu5pyA6YGp5YyWXG4gICAgLy8gVXNlIGRlZmF1bHQgd2VpZ2h0cyBmb3Igb3B0aW1pemF0aW9uXG4gICAgY29uc3Qgb3B0aW1pemVkV2VpZ2h0cyA9IHRoaXMuZ2V0RGVmYXVsdFdlaWdodHMoKTtcblxuICAgIC8vIOOCsOODrOODvOODiemWvuWApOOBruacgOmBqeWMllxuICAgIGNvbnN0IG9wdGltaXplZFRocmVzaG9sZHMgPSB0aGlzLm9wdGltaXplR3JhZGVUaHJlc2hvbGRzKFxuICAgICAgY3VycmVudENvbmZpZy5ncmFkZVRocmVzaG9sZHMsXG4gICAgICBwcm9qZWN0U3RhdHMuZ3JhZGVEaXN0cmlidXRpb24sXG4gICAgICBwcm9qZWN0U3RhdHMuYXZlcmFnZVNjb3JlXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5jdXJyZW50Q29uZmlnLFxuICAgICAgd2VpZ2h0czogb3B0aW1pemVkV2VpZ2h0cyxcbiAgICAgIGdyYWRlVGhyZXNob2xkczogb3B0aW1pemVkVGhyZXNob2xkc1xuICAgIH07XG4gIH1cblxuICAvLyA9PT0g44OX44Op44Kk44OZ44O844OI44Oh44K944OD44OJID09PVxuXG4gIC8qKlxuICAgKiDjg5HjgrnmpJzoqLzjgavjgojjgovjgrvjgq3jg6Xjg6rjg4bjgqPjg4Hjgqfjg4Pjgq9cbiAgICog44OR44K544OI44Op44OQ44O844K144Or5pS75pKD44KS6Ziy44GQ44Gf44KB44Gu5qSc6Ki8XG4gICAqL1xuICBwcml2YXRlIGlzU2VjdXJlUGF0aChpbnB1dFBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNvbHZlZFBhdGggPSBwYXRoLnJlc29sdmUoaW5wdXRQYXRoKTtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gcGF0aC5ub3JtYWxpemUoaW5wdXRQYXRoKTtcbiAgICAgIFxuICAgICAgLy8g44OR44K544OI44Op44OQ44O844K144Or5pS75pKD44Gu5qSc5Ye6XG4gICAgICBpZiAobm9ybWFsaXplZFBhdGguaW5jbHVkZXMoJy4uJykgfHwgbm9ybWFsaXplZFBhdGguaW5jbHVkZXMoJ34nKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOe1tuWvvuODkeOCueOBruWItumZkO+8iOODl+ODreOCuOOCp+OCr+ODiOODq+ODvOODiOmFjeS4i+OBruOBv+ioseWPr++8iVxuICAgICAgY29uc3QgY3dkID0gcHJvY2Vzcy5jd2QoKTtcbiAgICAgIGlmICghcmVzb2x2ZWRQYXRoLnN0YXJ0c1dpdGgoY3dkKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOWNsemZuuOBquODleOCoeOCpOODq+WQjeODkeOCv+ODvOODs+OBruaknOWHulxuICAgICAgY29uc3QgZGFuZ2Vyb3VzUGF0dGVybnMgPSBbXG4gICAgICAgIC9cXC9ldGNcXC8vLCAvXFwvcHJvY1xcLy8sIC9cXC9zeXNcXC8vLCAvXFwvZGV2XFwvLywgIC8vIOOCt+OCueODhuODoOODh+OCo+ODrOOCr+ODiOODqlxuICAgICAgICAvXFwuXFwuXFwvLywgL35cXC8vLCAvXFwkXFx7LywgL1xcJFxcKC8sICAgICAgICAgICAgIC8vIOOCt+OCp+ODqy/nkrDlooPlpInmlbBcbiAgICAgICAgL1xceDAwLywgL1xceDAxLVxceDFmLyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yi25b6h5paH5a2XXG4gICAgICBdO1xuICAgICAgXG4gICAgICByZXR1cm4gIWRhbmdlcm91c1BhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QocmVzb2x2ZWRQYXRoKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEpTT07oqK3lrprjga7lronlhajjgarop6PmnpBcbiAgICog44K744Kt44Ol44Oq44OG44Kj44Oq44K544Kv44Gu44GC44KL5YCk44KS5qSc5Ye644O754Sh5a6z5YyWXG4gICAqL1xuICBwcml2YXRlIHNlY3VyZUpzb25QYXJzZShjb250ZW50OiBzdHJpbmcpOiBKc29uVmFsdWUge1xuICAgIHRyeSB7XG4gICAgICAvLyDln7rmnKznmoTjgapKU09O6Kej5p6QXG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgXG4gICAgICAvLyDjgqrjg5bjgrjjgqfjgq/jg4jjgafjgarjgYTloLTlkIjjga/mi5LlkKZcbiAgICAgIGlmICh0eXBlb2YgcGFyc2VkICE9PSAnb2JqZWN0JyB8fCBwYXJzZWQgPT09IG51bGwgfHwgQXJyYXkuaXNBcnJheShwYXJzZWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6Kit5a6a44OV44Kh44Kk44Or44Gv44Kq44OW44K444Kn44Kv44OI5b2i5byP44Gn44GC44KL5b+F6KaB44GM44GC44KK44G+44GZJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOWNsemZuuOBquODl+ODreODkeODhuOCo+OBrumZpOWOu1xuICAgICAgcmV0dXJuIHRoaXMuc2FuaXRpemVDb25maWdPYmplY3QocGFyc2VkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDoqK3lrprjg5XjgqHjgqTjg6vjga7op6PmnpDjgavlpLHmlZfjgZfjgb7jgZfjgZ86ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn5LiN5piO44Gq44Ko44Op44O8J31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6Kit5a6a44Kq44OW44K444Kn44Kv44OI44Gu54Sh5a6z5YyWXG4gICAqL1xuICBwcml2YXRlIHNhbml0aXplQ29uZmlnT2JqZWN0KG9iajogSnNvblZhbHVlLCBkZXB0aCA9IDApOiBKc29uVmFsdWUge1xuICAgIC8vIOW+queSsOWPgueFp+ODu+a3seOBmeOBjuOCi+ODjeOCueODiOOBrumYsuatolxuICAgIGlmIChkZXB0aCA+IDEwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ioreWumuODleOCoeOCpOODq+OBruani+mAoOOBjOikh+mbkeOBmeOBjuOBvuOBmScpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZVZhbHVlKG9iaik7XG4gICAgfVxuICAgIFxuICAgIC8vIOmFjeWIl+OBruWHpueQhlxuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIHJldHVybiBvYmoubWFwKGl0ZW0gPT4gdGhpcy5zYW5pdGl6ZUNvbmZpZ09iamVjdChpdGVtLCBkZXB0aCArIDEpKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc2FuaXRpemVkOiBKc29uT2JqZWN0ID0ge307XG4gICAgY29uc3QgYWxsb3dlZEtleXMgPSBuZXcgU2V0KFtcbiAgICAgICdzY29yaW5nJywgJ2VuYWJsZWQnLCAnd2VpZ2h0cycsICdncmFkZVRocmVzaG9sZHMnLCAnb3B0aW9ucycsXG4gICAgICAncGx1Z2lucycsICdkaW1lbnNpb25zJywgJ2VuYWJsZVRyZW5kcycsICdlbmFibGVQcmVkaWN0aW9ucycsXG4gICAgICAnY2FjaGVSZXN1bHRzJywgJ3JlcG9ydEZvcm1hdCcsICdBJywgJ0InLCAnQycsICdEJywgJ0YnLFxuICAgICAgJ2V4Y2x1ZGVQYXR0ZXJucycsICdvdXRwdXQnXG4gICAgXSk7XG4gICAgXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkge1xuICAgICAgLy8g44Kt44O85ZCN44Gu5qSc6Ki8XG4gICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycgfHwga2V5Lmxlbmd0aCA+IDEwMCkge1xuICAgICAgICBjb250aW51ZTsgLy8g5Y2x6Zm644Gq44Kt44O844Gv54Sh6KaWXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOWNsemZuuOBquOCreODvOODkeOCv+ODvOODs+OBruaknOWHulxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpIHx8IGtleS5pbmNsdWRlcygnY29uc3RydWN0b3InKSB8fCBrZXkuaW5jbHVkZXMoJ3Byb3RvdHlwZScpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDoqLHlj6/jgZXjgozjgZ/jgq3jg7zjga7jgb/lh6bnkIbvvIjoqK3lrprjga7mlofohIjlpJbjgafjga/liLbpmZDvvIlcbiAgICAgIGlmIChkZXB0aCA9PT0gMCB8fCBhbGxvd2VkS2V5cy5oYXMoa2V5KSB8fCBrZXkubWF0Y2goL15bYS16QS1aXVthLXpBLVowLTlfLV0qJC8pKSB7XG4gICAgICAgIHNhbml0aXplZFtrZXldID0gdGhpcy5zYW5pdGl6ZUNvbmZpZ09iamVjdCh2YWx1ZSwgZGVwdGggKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHNhbml0aXplZDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlgKTjga7nhKHlrrPljJZcbiAgICovXG4gIHByaXZhdGUgc2FuaXRpemVWYWx1ZSh2YWx1ZTogSnNvblZhbHVlKTogSnNvblZhbHVlIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgLy8g5paH5a2X5YiX6ZW344Gu5Yi26ZmQXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID4gMTAwMCkge1xuICAgICAgICByZXR1cm4gdmFsdWUuc3Vic3RyaW5nKDAsIDEwMDApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDljbHpmbrjgarjg5Hjgr/jg7zjg7Pjga7pmaTljrtcbiAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bPD4nXCImXFx4MDAtXFx4MWZdL2csICcnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIC8vIOaVsOWApOOBruevhOWbsuWItumZkFxuICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE1hdGgubWF4KC0xMDAwMCwgTWF0aC5taW4oMTAwMDAsIHZhbHVlKSk7XG4gICAgfVxuICAgIFxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBcbiAgICAvLyDjgZ3jga7ku5bjga7lnovjga/nhKHoppZcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjg5Xjgqnjg6vjg4jjgrnjgrPjgqLjg6rjg7PjgrDoqK3lrprjgpLlj5blvpdcbiAgICovXG4gIHByaXZhdGUgZ2V0RGVmYXVsdFNjb3JpbmdDb25maWcoKTogU2NvcmluZ0NvbmZpZyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICB3ZWlnaHRzOiBERUZBVUxUX1dFSUdIVFMsXG4gICAgICBncmFkZVRocmVzaG9sZHM6IHsgLi4uR1JBREVfVEhSRVNIT0xEUyB9LFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBlbmFibGVUcmVuZHM6IHRydWUsXG4gICAgICAgIGVuYWJsZVByZWRpY3Rpb25zOiBmYWxzZSxcbiAgICAgICAgY2FjaGVSZXN1bHRzOiB0cnVlLFxuICAgICAgICByZXBvcnRGb3JtYXQ6ICdkZXRhaWxlZCdcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOioreWumuODleOCoeOCpOODq+OCkuaknOe0olxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmaW5kQ29uZmlnRmlsZShzdGFydERpcjogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgY29uc3QgY29uZmlnRmlsZW5hbWVzID0gWydyaW1vci5jb25maWcuanNvbicsICcucmltb3JyYy5qc29uJywgJy5yaW1vcnJjJ107XG4gICAgbGV0IGN1cnJlbnREaXIgPSBwYXRoLnJlc29sdmUoc3RhcnREaXIpO1xuICAgIGNvbnN0IHJvb3REaXIgPSBwYXRoLnBhcnNlKGN1cnJlbnREaXIpLnJvb3Q7XG4gICAgY29uc3QgcHJvamVjdFJvb3QgPSBwcm9jZXNzLmN3ZCgpO1xuXG4gICAgLy8g5pyA5aSn5qSc57Si6ZqO5bGk44KS5Yi26ZmQ77yI54Sh6ZmQ44Or44O844OX6Ziy5q2i77yJXG4gICAgbGV0IG1heExldmVscyA9IDEwO1xuXG4gICAgd2hpbGUgKGN1cnJlbnREaXIgIT09IHJvb3REaXIgJiYgbWF4TGV2ZWxzID4gMCkge1xuICAgICAgLy8g44K744Kt44Ol44Oq44OG44KjOiDjg5fjg63jgrjjgqfjgq/jg4jjg6vjg7zjg4jphY3kuIvjga7jgb/mpJzntKJcbiAgICAgIGlmICghY3VycmVudERpci5zdGFydHNXaXRoKHByb2plY3RSb290KSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBmaWxlbmFtZSBvZiBjb25maWdGaWxlbmFtZXMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnUGF0aCA9IHBhdGguam9pbihjdXJyZW50RGlyLCBmaWxlbmFtZSk7XG4gICAgICAgIFxuICAgICAgICAvLyDjg5Hjgrnjga7jgrvjgq3jg6Xjg6rjg4bjgqPmpJzoqLxcbiAgICAgICAgaWYgKHRoaXMuaXNTZWN1cmVQYXRoKGNvbmZpZ1BhdGgpICYmIGZzLmV4aXN0c1N5bmMoY29uZmlnUGF0aCkpIHtcbiAgICAgICAgICAvLyDjg5XjgqHjgqTjg6vjga7ln7rmnKzjg4Hjgqfjg4Pjgq9cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBmcy5zdGF0U3luYyhjb25maWdQYXRoKTtcbiAgICAgICAgICAgIC8vIOmAmuW4uOODleOCoeOCpOODq+ODu+OCteOCpOOCuuWItumZkO+8iDFNQu+8ieODu+iqreOBv+WPluOCiuaoqemZkOOBrueiuuiqjVxuICAgICAgICAgICAgaWYgKHN0YXRzLmlzRmlsZSgpICYmIHN0YXRzLnNpemUgPCAxMDI0ICogMTAyNCkge1xuICAgICAgICAgICAgICByZXR1cm4gY29uZmlnUGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8g44OV44Kh44Kk44Or5oOF5aCx5Y+W5b6X44Ko44Op44O844Gv54Sh6KaW44GX44Gm5qyh44G4XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGN1cnJlbnREaXIgPSBwYXRoLmRpcm5hbWUoY3VycmVudERpcik7XG4gICAgICBtYXhMZXZlbHMtLTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDoqK3lrprjg5XjgqHjgqTjg6vjgYvjgonjgrnjgrPjgqLjg6rjg7PjgrDoqK3lrprjgpLmp4vnr4lcbiAgICovXG4gIHByaXZhdGUgYnVpbGRTY29yaW5nQ29uZmlnKHNjb3JpbmdTZWN0aW9uOiBQYXJ0aWFsU2NvcmluZ0NvbmZpZyk6IFNjb3JpbmdDb25maWcge1xuICAgIGNvbnN0IGNvbmZpZzogU2NvcmluZ0NvbmZpZyA9IHtcbiAgICAgIGVuYWJsZWQ6IHNjb3JpbmdTZWN0aW9uLmVuYWJsZWQgIT09IGZhbHNlLCAvLyDjg4fjg5Xjgqnjg6vjg4h0cnVlXG4gICAgICB3ZWlnaHRzOiBERUZBVUxUX1dFSUdIVFMsXG4gICAgICBncmFkZVRocmVzaG9sZHM6IHsgLi4uR1JBREVfVEhSRVNIT0xEUyB9XG4gICAgfTtcblxuICAgIC8vIOmHjeOBv+ioreWumuOBruWHpueQhlxuICAgIGlmIChzY29yaW5nU2VjdGlvbi53ZWlnaHRzKSB7XG4gICAgICBjb25zdCBkZWZhdWx0V2VpZ2h0cyA9IHRoaXMuZ2V0RGVmYXVsdFdlaWdodHMoKTtcbiAgICAgIGNvbmZpZy53ZWlnaHRzID0ge1xuICAgICAgICBwbHVnaW5zOiB7XG4gICAgICAgICAgLi4uZGVmYXVsdFdlaWdodHMucGx1Z2lucyxcbiAgICAgICAgICAuLi4oc2NvcmluZ1NlY3Rpb24ud2VpZ2h0cy5wbHVnaW5zIHx8IHt9KVxuICAgICAgICB9LFxuICAgICAgICBkaW1lbnNpb25zOiB7XG4gICAgICAgICAgLi4uZGVmYXVsdFdlaWdodHMuZGltZW5zaW9ucyxcbiAgICAgICAgICAuLi4oc2NvcmluZ1NlY3Rpb24ud2VpZ2h0cy5kaW1lbnNpb25zIHx8IHt9KVxuICAgICAgICB9IGFzIFdlaWdodENvbmZpZ1snZGltZW5zaW9ucyddXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIOOCsOODrOODvOODiemWvuWApOOBruWHpueQhlxuICAgIGlmIChzY29yaW5nU2VjdGlvbi5ncmFkZVRocmVzaG9sZHMpIHtcbiAgICAgIGNvbmZpZy5ncmFkZVRocmVzaG9sZHMgPSB0aGlzLnNhbml0aXplR3JhZGVUaHJlc2hvbGRzKHNjb3JpbmdTZWN0aW9uLmdyYWRlVGhyZXNob2xkcyk7XG4gICAgfVxuXG4gICAgLy8g44Kq44OX44K344On44Oz6Kit5a6a44Gu5Yem55CGXG4gICAgaWYgKHNjb3JpbmdTZWN0aW9uLm9wdGlvbnMpIHtcbiAgICAgIGNvbmZpZy5vcHRpb25zID0ge1xuICAgICAgICBlbmFibGVUcmVuZHM6IHNjb3JpbmdTZWN0aW9uLm9wdGlvbnMuZW5hYmxlVHJlbmRzICE9PSBmYWxzZSxcbiAgICAgICAgZW5hYmxlUHJlZGljdGlvbnM6IHNjb3JpbmdTZWN0aW9uLm9wdGlvbnMuZW5hYmxlUHJlZGljdGlvbnMgPT09IHRydWUsXG4gICAgICAgIGNhY2hlUmVzdWx0czogc2NvcmluZ1NlY3Rpb24ub3B0aW9ucy5jYWNoZVJlc3VsdHMgIT09IGZhbHNlLFxuICAgICAgICByZXBvcnRGb3JtYXQ6IHNjb3JpbmdTZWN0aW9uLm9wdGlvbnMucmVwb3J0Rm9ybWF0IHx8ICdkZXRhaWxlZCdcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5fjg6rjgrvjg4Pjg4jnlKjjgrDjg6zjg7zjg4nplr7lgKTjgpLnlJ/miJBcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVQcmVzZXRHcmFkZVRocmVzaG9sZHMocHJlc2V0OiBzdHJpbmcpOiBSZWNvcmQ8R3JhZGVUeXBlLCBudW1iZXI+IHtcbiAgICBzd2l0Y2ggKHByZXNldCkge1xuICAgICAgY2FzZSAnc3RyaWN0JzpcbiAgICAgICAgcmV0dXJuIHsgQTogOTUsIEI6IDg1LCBDOiA3NSwgRDogNjUsIEY6IDAgfTtcbiAgICAgIGNhc2UgJ2JhbGFuY2VkJzpcbiAgICAgICAgcmV0dXJuIHsgQTogOTAsIEI6IDgwLCBDOiA3MCwgRDogNjAsIEY6IDAgfTtcbiAgICAgIGNhc2UgJ3BlcmZvcm1hbmNlJzpcbiAgICAgICAgcmV0dXJuIHsgQTogODgsIEI6IDc4LCBDOiA2OCwgRDogNTgsIEY6IDAgfTtcbiAgICAgIGNhc2UgJ2xlZ2FjeSc6XG4gICAgICAgIHJldHVybiB7IEE6IDg1LCBCOiA3NSwgQzogNjUsIEQ6IDU1LCBGOiAwIH07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4geyAuLi5HUkFERV9USFJFU0hPTERTIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOODl+ODquOCu+ODg+ODiOeUqOOCquODl+OCt+ODp+ODs+OCkueUn+aIkFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVByZXNldE9wdGlvbnMocHJlc2V0OiBzdHJpbmcpOiBTY29yaW5nQ29uZmlnWydvcHRpb25zJ10ge1xuICAgIHN3aXRjaCAocHJlc2V0KSB7XG4gICAgICBjYXNlICdzdHJpY3QnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVuYWJsZVRyZW5kczogdHJ1ZSxcbiAgICAgICAgICBlbmFibGVQcmVkaWN0aW9uczogdHJ1ZSxcbiAgICAgICAgICBjYWNoZVJlc3VsdHM6IHRydWUsXG4gICAgICAgICAgcmVwb3J0Rm9ybWF0OiAnZGV0YWlsZWQnXG4gICAgICAgIH07XG4gICAgICBjYXNlICdwZXJmb3JtYW5jZSc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZW5hYmxlVHJlbmRzOiBmYWxzZSxcbiAgICAgICAgICBlbmFibGVQcmVkaWN0aW9uczogZmFsc2UsXG4gICAgICAgICAgY2FjaGVSZXN1bHRzOiB0cnVlLFxuICAgICAgICAgIHJlcG9ydEZvcm1hdDogJ21pbmltYWwnXG4gICAgICAgIH07XG4gICAgICBjYXNlICdsZWdhY3knOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVuYWJsZVRyZW5kczogZmFsc2UsXG4gICAgICAgICAgZW5hYmxlUHJlZGljdGlvbnM6IGZhbHNlLFxuICAgICAgICAgIGNhY2hlUmVzdWx0czogZmFsc2UsXG4gICAgICAgICAgcmVwb3J0Rm9ybWF0OiAnc3VtbWFyeSdcbiAgICAgICAgfTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZW5hYmxlVHJlbmRzOiB0cnVlLFxuICAgICAgICAgIGVuYWJsZVByZWRpY3Rpb25zOiBmYWxzZSxcbiAgICAgICAgICBjYWNoZVJlc3VsdHM6IHRydWUsXG4gICAgICAgICAgcmVwb3J0Rm9ybWF0OiAnZGV0YWlsZWQnXG4gICAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCsOODrOODvOODiemWvuWApOOBruWmpeW9k+aAp+OCkuaknOiovFxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUdyYWRlVGhyZXNob2xkcyh0aHJlc2hvbGRzOiBSZWNvcmQ8R3JhZGVUeXBlLCBudW1iZXI+KTogQ29uZmlnVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHN1Z2dlc3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8g5b+F6aCI44Kw44Os44O844OJ44Gu56K66KqNXG4gICAgY29uc3QgcmVxdWlyZWRHcmFkZXM6IEdyYWRlVHlwZVtdID0gWydBJywgJ0InLCAnQycsICdEJywgJ0YnXTtcbiAgICBmb3IgKGNvbnN0IGdyYWRlIG9mIHJlcXVpcmVkR3JhZGVzKSB7XG4gICAgICBpZiAoIShncmFkZSBpbiB0aHJlc2hvbGRzKSB8fCB0eXBlb2YgdGhyZXNob2xkc1tncmFkZV0gIT09ICdudW1iZXInKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGDjgrDjg6zjg7zjg4kgXCIke2dyYWRlfVwiIOOBrumWvuWApOOBjOWumue+qeOBleOCjOOBpuOBhOOBvuOBm+OCk2ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlcnJvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyDlgKTjga7nr4Tlm7Lnorroqo1cbiAgICAgIGZvciAoY29uc3QgW2dyYWRlLCB0aHJlc2hvbGRdIG9mIE9iamVjdC5lbnRyaWVzKHRocmVzaG9sZHMpKSB7XG4gICAgICAgIGlmICh0aHJlc2hvbGQgPCAwIHx8IHRocmVzaG9sZCA+IDEwMCkge1xuICAgICAgICAgIGVycm9ycy5wdXNoKGDjgrDjg6zjg7zjg4kgXCIke2dyYWRlfVwiIOOBrumWvuWApCAoJHt0aHJlc2hvbGR9KSDjga8wLTEwMOOBruevhOWbsuOBp+OBguOCi+W/heimgeOBjOOBguOCiuOBvuOBmWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIOmghuW6j+eiuuiqje+8iEEgPiBCID4gQyA+IEQgPiBG77yJXG4gICAgICBpZiAodGhyZXNob2xkcy5BIDw9IHRocmVzaG9sZHMuQiB8fCBcbiAgICAgICAgICB0aHJlc2hvbGRzLkIgPD0gdGhyZXNob2xkcy5DIHx8IFxuICAgICAgICAgIHRocmVzaG9sZHMuQyA8PSB0aHJlc2hvbGRzLkQgfHwgXG4gICAgICAgICAgdGhyZXNob2xkcy5EIDw9IHRocmVzaG9sZHMuRikge1xuICAgICAgICBlcnJvcnMucHVzaCgn44Kw44Os44O844OJ6Za+5YCk44Gu6aCG5bqP44GM5q2j44GX44GP44GC44KK44G+44Gb44KTIChBID4gQiA+IEMgPiBEID4gRiDjgafjgYLjgovlv4XopoHjgYzjgYLjgorjgb7jgZkpJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOmWk+malOOBruitpuWRilxuICAgICAgY29uc3QgZ2FwcyA9IFtcbiAgICAgICAgdGhyZXNob2xkcy5BIC0gdGhyZXNob2xkcy5CLFxuICAgICAgICB0aHJlc2hvbGRzLkIgLSB0aHJlc2hvbGRzLkMsXG4gICAgICAgIHRocmVzaG9sZHMuQyAtIHRocmVzaG9sZHMuRCxcbiAgICAgICAgdGhyZXNob2xkcy5EIC0gdGhyZXNob2xkcy5GXG4gICAgICBdO1xuXG4gICAgICBpZiAoZ2Fwcy5zb21lKGdhcCA9PiBnYXAgPCA1KSkge1xuICAgICAgICB3YXJuaW5ncy5wdXNoKCfjgrDjg6zjg7zjg4nplpPjga7lt67jgYzlsI/jgZXjgZnjgY7jgovlj6/og73mgKfjgYzjgYLjgorjgb7jgZnvvIg154K55pyq5rqA77yJJyk7XG4gICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ+OCsOODrOODvOODiemWk+OBq+OCiOOCiuaYjueiuuOBquW3ruOCkuOBpOOBkeOCi+OBk+OBqOOCkuaknOiojuOBl+OBpuOBj+OBoOOBleOBhCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ2Fwcy5zb21lKGdhcCA9PiBnYXAgPiAyMCkpIHtcbiAgICAgICAgd2FybmluZ3MucHVzaCgn44Kw44Os44O844OJ6ZaT44Gu5beu44GM5aSn44GN44GZ44GO44KL5Y+v6IO95oCn44GM44GC44KK44G+44GZ77yIMjDngrnotoXvvIknKTtcbiAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCgn44Kw44Os44O844OJ6ZaT44Gu5beu44KS44KI44KK5Z2H562J44Gr44GZ44KL44GT44Go44KS5qSc6KiO44GX44Gm44GP44Gg44GV44GEJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzLCB3YXJuaW5ncywgc3VnZ2VzdGlvbnMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqrjg5fjgrfjg6fjg7PoqK3lrprjga7lpqXlvZPmgKfjgpLmpJzoqLxcbiAgICovXG4gIHByaXZhdGUgdmFsaWRhdGVPcHRpb25zKG9wdGlvbnM6IFNjb3JpbmdDb25maWdbJ29wdGlvbnMnXSk6IENvbmZpZ1ZhbGlkYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHN1Z2dlc3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnM/LnJlcG9ydEZvcm1hdCAmJiAhWydkZXRhaWxlZCcsICdzdW1tYXJ5JywgJ21pbmltYWwnXS5pbmNsdWRlcyhvcHRpb25zLnJlcG9ydEZvcm1hdCkpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goYOS4jeaYjuOBquODrOODneODvOODiOW9ouW8jzogJHtvcHRpb25zLnJlcG9ydEZvcm1hdH1gKTtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ3JlcG9ydEZvcm1hdOOBryBcImRldGFpbGVkXCIsIFwic3VtbWFyeVwiLCBcIm1pbmltYWxcIiDjga7jgYTjgZrjgozjgYvjgpLmjIflrprjgZfjgabjgY/jgaDjgZXjgYQnKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucz8uZW5hYmxlUHJlZGljdGlvbnMgJiYgIW9wdGlvbnM/LmVuYWJsZVRyZW5kcykge1xuICAgICAgd2FybmluZ3MucHVzaCgn5LqI5ris5qmf6IO944KS5pyJ5Yq544Gr44GZ44KL5aC05ZCI44CB44OI44Os44Oz44OJ5qmf6IO944KC5pyJ5Yq544Gr44GZ44KL44GT44Go44KS44GK5Yun44KB44GX44G+44GZJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgd2FybmluZ3MsIHN1Z2dlc3Rpb25zIH07XG4gIH1cblxuICAvKipcbiAgICog44Kw44Os44O844OJ6Za+5YCk44KS5q2j5bi45YyWXG4gICAqL1xuICBwcml2YXRlIHNhbml0aXplR3JhZGVUaHJlc2hvbGRzKHRocmVzaG9sZHM6IFBhcnRpYWw8UmVjb3JkPEdyYWRlVHlwZSwgbnVtYmVyPj4gfCBKc29uVmFsdWUpOiBSZWNvcmQ8R3JhZGVUeXBlLCBudW1iZXI+IHtcbiAgICBjb25zdCBzYW5pdGl6ZWQ6IFJlY29yZDxHcmFkZVR5cGUsIG51bWJlcj4gPSB7IC4uLkdSQURFX1RIUkVTSE9MRFMgfTtcblxuICAgIGlmICghaXNKc29uT2JqZWN0KHRocmVzaG9sZHMpKSB7XG4gICAgICByZXR1cm4gc2FuaXRpemVkO1xuICAgIH1cblxuICAgIGNvbnN0IGdyYWRlczogR3JhZGVUeXBlW10gPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRiddO1xuICAgIGZvciAoY29uc3QgZ3JhZGUgb2YgZ3JhZGVzKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRocmVzaG9sZHNbZ3JhZGVdO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2FuaXRpemVkW2dyYWRlXSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgdmFsdWUpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2FuaXRpemVkO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCsOODrOODvOODiemWvuWApOOCkuacgOmBqeWMllxuICAgKi9cbiAgcHJpdmF0ZSBvcHRpbWl6ZUdyYWRlVGhyZXNob2xkcyhcbiAgICBjdXJyZW50OiBSZWNvcmQ8R3JhZGVUeXBlLCBudW1iZXI+LFxuICAgIGRpc3RyaWJ1dGlvbjogUmVjb3JkPEdyYWRlVHlwZSwgbnVtYmVyPixcbiAgICBhdmVyYWdlU2NvcmU6IG51bWJlclxuICApOiBSZWNvcmQ8R3JhZGVUeXBlLCBudW1iZXI+IHtcbiAgICBjb25zdCBvcHRpbWl6ZWQgPSB7IC4uLmN1cnJlbnQgfTtcbiAgICBcbiAgICAvLyDlubPlnYfjgrnjgrPjgqLjgavln7rjgaXjgY/oqr/mlbRcbiAgICBpZiAoYXZlcmFnZVNjb3JlID4gODUpIHtcbiAgICAgIC8vIOW5s+Wdh+OBjOmrmOOBhOWgtOWQiOOBr+Wfuua6luOCkuWOs+OBl+OBj1xuICAgICAgb3B0aW1pemVkLkEgPSBNYXRoLm1pbihvcHRpbWl6ZWQuQSArIDIsIDk1KTtcbiAgICAgIG9wdGltaXplZC5CID0gTWF0aC5taW4ob3B0aW1pemVkLkIgKyAyLCBvcHRpbWl6ZWQuQSAtIDUpO1xuICAgIH0gZWxzZSBpZiAoYXZlcmFnZVNjb3JlIDwgNzApIHtcbiAgICAgIC8vIOW5s+Wdh+OBjOS9juOBhOWgtOWQiOOBr+Wfuua6luOCkue3qeOBj1xuICAgICAgb3B0aW1pemVkLkEgPSBNYXRoLm1heChvcHRpbWl6ZWQuQSAtIDIsIDg1KTtcbiAgICAgIG9wdGltaXplZC5CID0gTWF0aC5tYXgob3B0aW1pemVkLkIgLSAyLCBvcHRpbWl6ZWQuQSAtIDE1KTtcbiAgICB9XG5cbiAgICAvLyDliIbluIPjgavln7rjgaXjgY/oqr/mlbTvvIjmpbXnq6/jgarlgY/jgorjgpLkv67mraPvvIlcbiAgICBjb25zdCB0b3RhbEZpbGVzID0gT2JqZWN0LnZhbHVlcyhkaXN0cmlidXRpb24pLnJlZHVjZSgoc3VtLCBjb3VudCkgPT4gc3VtICsgY291bnQsIDApO1xuICAgIGlmICh0b3RhbEZpbGVzID4gMCkge1xuICAgICAgY29uc3QgYVJhdGlvID0gZGlzdHJpYnV0aW9uLkEgLyB0b3RhbEZpbGVzO1xuICAgICAgY29uc3QgZlJhdGlvID0gZGlzdHJpYnV0aW9uLkYgLyB0b3RhbEZpbGVzO1xuXG4gICAgICBpZiAoYVJhdGlvID4gMC41KSB7XG4gICAgICAgIC8vIEHoqZXkvqHjgYzlpJrjgZnjgY7jgovloLTlkIjjga/ln7rmupbjgpLljrPjgZfjgY9cbiAgICAgICAgb3B0aW1pemVkLkEgKz0gMztcbiAgICAgIH0gZWxzZSBpZiAoZlJhdGlvID4gMC4zKSB7XG4gICAgICAgIC8vIEboqZXkvqHjgYzlpJrjgZnjgY7jgovloLTlkIjjga/ln7rmupbjgpLnt6njgY9cbiAgICAgICAgb3B0aW1pemVkLkEgLT0gMjtcbiAgICAgICAgb3B0aW1pemVkLkIgLT0gMjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW1pemVkO1xuICB9XG59Il0sInZlcnNpb24iOjN9