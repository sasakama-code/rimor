7a1676bc23cba01d071bda6112500075
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const dependency_1 = require("../../src/analyzers/dependency");
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
const os = __importStar(require("os"));
describe('DependencyAnalyzer', () => {
    let analyzer;
    let testProjectPath;
    beforeEach(() => {
        analyzer = new dependency_1.DependencyAnalyzer();
        // テスト用プロジェクトディレクトリを作成
        testProjectPath = fs.mkdtempSync(path.join(os.tmpdir(), 'rimor-dependency-test-'));
        // 複雑なpackage.jsonを作成
        const packageJson = {
            name: 'test-project',
            version: '1.0.0',
            description: 'Test project for dependency analysis',
            main: 'index.js',
            scripts: {
                test: 'jest',
                build: 'tsc',
                start: 'node dist/index.js'
            },
            dependencies: {
                'express': '^4.18.0',
                'lodash': '4.17.21',
                'axios': '~1.4.0',
                'moment': '>=2.29.0',
                'uuid': '^9.0.0'
            },
            devDependencies: {
                'jest': '^29.0.0',
                '@types/jest': '^29.0.0',
                '@types/express': '^4.17.0',
                '@types/node': '^20.0.0',
                'typescript': '^5.0.0',
                'ts-node': '^10.9.0'
            },
            peerDependencies: {
                'react': '>=16.0.0',
                'react-dom': '>=16.0.0'
            },
            optionalDependencies: {
                'fsevents': '^2.3.0' // macOS only
            }
        };
        fs.writeFileSync(path.join(testProjectPath, 'package.json'), JSON.stringify(packageJson, null, 2));
        // yarn.lockファイルを作成
        const yarnLock = `# THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
# yarn lockfile v1

axios@~1.4.0:
  version "1.4.0"
  resolved "https://registry.yarnpkg.com/axios/-/axios-1.4.0.tgz"
  integrity sha512-S4XCWMEmzvo64T9GfvQDOXgYRDJ/wsSZc7Jvdgx5u1sd0JwsuPLqb3SYmusag+edF6ziyMensPVqLTSc1PiSEA==

express@^4.18.0:
  version "4.18.2"
  resolved "https://registry.yarnpkg.com/express/-/express-4.18.2.tgz"
  integrity sha512-5/PsL6iGPdfQ/lKM1UuielYgv3BUoJfz1aUwU9vHZ+J7gyvwdQXFEBIEIaxeGf0GIcreATNyBExtalisDbuMqQ==

lodash@4.17.21:
  version "4.17.21"
  resolved "https://registry.yarnpkg.com/lodash/-/lodash-4.17.21.tgz"
  integrity sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==
`;
        fs.writeFileSync(path.join(testProjectPath, 'yarn.lock'), yarnLock);
        // テスト用のTypeScriptファイル群を作成
        fs.mkdirSync(path.join(testProjectPath, 'src'), { recursive: true });
        // index.ts
        const indexCode = `import express from 'express';
import { Request, Response } from 'express';
import { userRouter } from './routes/user';
import { authMiddleware } from './middleware/auth';
import * as config from './config/database';

const app = express();

app.use('/api/users', userRouter);
app.use(authMiddleware);

export default app;`;
        fs.writeFileSync(path.join(testProjectPath, 'src/index.ts'), indexCode);
        // routes/user.ts
        fs.mkdirSync(path.join(testProjectPath, 'src/routes'), { recursive: true });
        const userRouterCode = `import { Router } from 'express';
import { UserService } from '../services/userService';
import { validateUser } from '../utils/validation';
import _ from 'lodash';

const router = Router();
const userService = new UserService();

router.get('/', async (req, res) => {
  const users = await userService.getAllUsers();
  res.json(_.omit(users, 'password'));
});

export { router as userRouter };`;
        fs.writeFileSync(path.join(testProjectPath, 'src/routes/user.ts'), userRouterCode);
        // services/userService.ts
        fs.mkdirSync(path.join(testProjectPath, 'src/services'), { recursive: true });
        const userServiceCode = `import axios from 'axios';
import { v4 as uuidv4 } from 'uuid';
import { DatabaseConnection } from './database';

export class UserService {
  private db: DatabaseConnection;

  constructor() {
    this.db = new DatabaseConnection();
  }

  async getAllUsers() {
    return await this.db.query('SELECT * FROM users');
  }

  async createUser(userData: any) {
    const id = uuidv4();
    return await this.db.query('INSERT INTO users VALUES (?)', [{ id, ...userData }]);
  }

  async fetchExternalData() {
    return await axios.get('https://api.example.com/data');
  }
}`;
        fs.writeFileSync(path.join(testProjectPath, 'src/services/userService.ts'), userServiceCode);
        // services/database.ts - 循環依存を作るため
        const databaseCode = `import { UserService } from './userService';

export class DatabaseConnection {
  private userService?: UserService;

  query(sql: string, params?: any[]) {
    // 循環依存のデモ
    if (!this.userService) {
      // this.userService = new UserService(); // これは循環依存を作る
    }
    return Promise.resolve([]);
  }
}`;
        fs.writeFileSync(path.join(testProjectPath, 'src/services/database.ts'), databaseCode);
        // middleware/auth.ts
        fs.mkdirSync(path.join(testProjectPath, 'src/middleware'), { recursive: true });
        const authCode = `import jwt from 'jsonwebtoken'; // 存在しない依存関係
import { Request, Response, NextFunction } from 'express';

export function authMiddleware(req: Request, res: Response, next: NextFunction) {
  const token = req.headers.authorization;
  if (!token) {
    return res.status(401).json({ error: 'No token provided' });
  }
  next();
}`;
        fs.writeFileSync(path.join(testProjectPath, 'src/middleware/auth.ts'), authCode);
        // utils/validation.ts
        fs.mkdirSync(path.join(testProjectPath, 'src/utils'), { recursive: true });
        const validationCode = `import moment from 'moment';
import Joi from 'joi'; // 未インストールの依存関係

export function validateUser(userData: any) {
  const schema = Joi.object({
    name: Joi.string().required(),
    email: Joi.string().email().required(),
    birthDate: Joi.date().max(moment().subtract(18, 'years')).required()
  });

  return schema.validate(userData);
}`;
        fs.writeFileSync(path.join(testProjectPath, 'src/utils/validation.ts'), validationCode);
        // config/database.ts
        fs.mkdirSync(path.join(testProjectPath, 'src/config'), { recursive: true });
        const configCode = `export const dbConfig = {
  host: 'localhost',
  port: 5432,
  database: 'testdb'
};`;
        fs.writeFileSync(path.join(testProjectPath, 'src/config/database.ts'), configCode);
        // tsconfig.json
        const tsConfig = {
            compilerOptions: {
                target: 'es2020',
                module: 'commonjs',
                strict: true,
                esModuleInterop: true,
                skipLibCheck: true,
                forceConsistentCasingInFileNames: true,
                outDir: './dist',
                rootDir: './src'
            },
            include: ['src/**/*'],
            exclude: ['node_modules', 'dist']
        };
        fs.writeFileSync(path.join(testProjectPath, 'tsconfig.json'), JSON.stringify(tsConfig, null, 2));
    });
    afterEach(() => {
        if (fs.existsSync(testProjectPath)) {
            fs.rmSync(testProjectPath, { recursive: true, force: true });
        }
    });
    describe('Class Instantiation', () => {
        test('should create DependencyAnalyzer instance', () => {
            expect(analyzer).toBeInstanceOf(dependency_1.DependencyAnalyzer);
        });
        test('should have required public methods', () => {
            expect(typeof analyzer.analyzeDependencies).toBe('function');
            expect(typeof analyzer.detectCyclicDependencies).toBe('function');
            expect(typeof analyzer.findUnusedDependencies).toBe('function');
            expect(typeof analyzer.findMissingDependencies).toBe('function');
            expect(typeof analyzer.analyzeVersionConstraints).toBe('function');
        });
    });
    describe('analyzeDependencies', () => {
        test('should analyze all dependency types from package.json', async () => {
            const analysis = await analyzer.analyzeDependencies(testProjectPath);
            expect(analysis).toBeDefined();
            expect(analysis.projectDependencies).toHaveLength(14); // 5 deps + 6 devDeps + 2 peerDeps + 1 optionalDeps
            // Production dependencies
            const productionDeps = analysis.projectDependencies.filter(dep => dep.type === 'production');
            expect(productionDeps).toHaveLength(5);
            expect(productionDeps.some(dep => dep.name === 'express')).toBe(true);
            expect(productionDeps.some(dep => dep.name === 'lodash')).toBe(true);
            // Development dependencies
            const devDeps = analysis.projectDependencies.filter(dep => dep.type === 'development');
            expect(devDeps).toHaveLength(6);
            expect(devDeps.some(dep => dep.name === 'jest')).toBe(true);
            expect(devDeps.some(dep => dep.name === 'typescript')).toBe(true);
            // Peer dependencies
            const peerDeps = analysis.projectDependencies.filter(dep => dep.type === 'peer');
            expect(peerDeps).toHaveLength(2);
            expect(peerDeps.some(dep => dep.name === 'react')).toBe(true);
        });
        test('should detect file-level dependencies', async () => {
            const analysis = await analyzer.analyzeDependencies(testProjectPath);
            expect(analysis.fileDependencies).toBeDefined();
            expect(analysis.fileDependencies.length).toBeGreaterThan(0);
            // index.ts の依存関係をチェック
            const indexDeps = analysis.fileDependencies.find(dep => dep.file.includes('index.ts'));
            expect(indexDeps).toBeDefined();
            expect(indexDeps.imports).toEqual(expect.arrayContaining(['express', './routes/user', './middleware/auth']));
        });
        test('should track dependency usage across files', async () => {
            const analysis = await analyzer.analyzeDependencies(testProjectPath);
            const expressDep = analysis.projectDependencies.find(dep => dep.name === 'express');
            expect(expressDep).toBeDefined();
            expect(expressDep.usage).toBeDefined();
            expect(expressDep.usage.length).toBeGreaterThan(0);
            const usage = expressDep.usage[0];
            expect(usage.file).toContain('index.ts');
            expect(usage.imports).toEqual(expect.arrayContaining(['express']));
        });
        test('should analyze version information from lock files', async () => {
            const analysis = await analyzer.analyzeDependencies(testProjectPath);
            const expressDep = analysis.projectDependencies.find(dep => dep.name === 'express');
            expect(expressDep).toBeDefined();
            expect(expressDep.version).toBe('^4.18.0');
            expect(expressDep.installedVersion).toBe('4.18.2'); // From yarn.lock
        });
    });
    describe('detectCyclicDependencies', () => {
        test('should detect potential cyclic dependencies', async () => {
            const cyclicDeps = await analyzer.detectCyclicDependencies(testProjectPath);
            expect(cyclicDeps).toBeDefined();
            expect(Array.isArray(cyclicDeps)).toBe(true);
            // UserService と DatabaseConnection の間の潜在的な循環依存
            const hasCyclicDep = cyclicDeps.some(dep => dep.files.some(file => file.includes('userService')) &&
                dep.files.some(file => file.includes('database')));
            // 循環依存の可能性があることを確認（コメントアウトされているが）
            expect(cyclicDeps.length).toBeGreaterThanOrEqual(0);
        });
        test('should categorize cyclic dependencies by severity', async () => {
            const cyclicDeps = await analyzer.detectCyclicDependencies(testProjectPath);
            if (cyclicDeps.length > 0) {
                cyclicDeps.forEach(dep => {
                    expect(['error', 'warning', 'info']).toContain(dep.severity);
                    expect(dep.suggestion).toBeDefined();
                    expect(typeof dep.suggestion).toBe('string');
                });
            }
        });
    });
    describe('findUnusedDependencies', () => {
        test('should identify unused dependencies', async () => {
            const unusedDeps = await analyzer.findUnusedDependencies(testProjectPath);
            expect(unusedDeps).toBeDefined();
            expect(Array.isArray(unusedDeps)).toBe(true);
            // 検出された未使用パッケージの存在を確認
            // fseventsはオプショナルな依存関係として扱われる可能性があるため、
            // より確実に未使用となるパッケージを確認
            if (unusedDeps.includes('fsevents')) {
                expect(unusedDeps).toContain('fsevents');
            }
            else {
                // 少なくとも何らかの未使用パッケージが検出されることを確認
                expect(unusedDeps.length).toBeGreaterThan(0);
            }
        });
        test('should not flag used dependencies as unused', async () => {
            const unusedDeps = await analyzer.findUnusedDependencies(testProjectPath);
            // 実際に使用されているdependenciesは含まれないはず
            expect(unusedDeps).not.toContain('express');
            expect(unusedDeps).not.toContain('lodash');
            expect(unusedDeps).not.toContain('axios');
            expect(unusedDeps).not.toContain('uuid');
        });
        test('should handle devDependencies appropriately', async () => {
            const unusedDeps = await analyzer.findUnusedDependencies(testProjectPath);
            // devDependenciesは通常のコード分析では使用されていないように見えるが、
            // テストやビルドツールとして実際には必要
            // この判定は複雑なので、基本的な動作確認のみ
            expect(Array.isArray(unusedDeps)).toBe(true);
        });
    });
    describe('findMissingDependencies', () => {
        test('should detect missing dependencies', async () => {
            const missingDeps = await analyzer.findMissingDependencies(testProjectPath);
            expect(missingDeps).toBeDefined();
            expect(Array.isArray(missingDeps)).toBe(true);
            // jsonwebtoken と joi は使用されているがpackage.jsonにない
            expect(missingDeps).toContain('jsonwebtoken');
            expect(missingDeps).toContain('joi');
        });
        test('should not flag installed dependencies as missing', async () => {
            const missingDeps = await analyzer.findMissingDependencies(testProjectPath);
            // インストール済みの依存関係は含まれないはず
            expect(missingDeps).not.toContain('express');
            expect(missingDeps).not.toContain('lodash');
            expect(missingDeps).not.toContain('moment');
        });
        test('should handle TypeScript type dependencies', async () => {
            const missingDeps = await analyzer.findMissingDependencies(testProjectPath);
            // @types/* パッケージの扱いを確認
            // 実装によっては型定義の不足も検出する可能性がある
            expect(Array.isArray(missingDeps)).toBe(true);
        });
    });
    describe('analyzeVersionConstraints', () => {
        test('should analyze version constraint patterns', async () => {
            const constraints = await analyzer.analyzeVersionConstraints(testProjectPath);
            expect(constraints).toBeDefined();
            expect(Array.isArray(constraints)).toBe(true);
            if (constraints.length > 0) {
                constraints.forEach(constraint => {
                    expect(constraint).toHaveProperty('package');
                    expect(constraint).toHaveProperty('declaredVersion');
                    // installedVersionはオプショナル
                    expect(constraint).toHaveProperty('constraint');
                    // 型チェック
                    expect(typeof constraint.package).toBe('string');
                    expect(typeof constraint.declaredVersion).toBe('string');
                    expect(['exact', 'range', 'caret', 'tilde', 'wildcard']).toContain(constraint.constraint);
                });
            }
        });
        test('should detect version mismatches', async () => {
            const constraints = await analyzer.analyzeVersionConstraints(testProjectPath);
            // バージョン制約が満たされているかチェック
            const lodashConstraint = constraints.find(c => c.package === 'lodash');
            if (lodashConstraint) {
                expect(typeof lodashConstraint.hasVulnerability).toBe('boolean');
            }
        });
    });
    describe('Error Handling', () => {
        test('should handle missing package.json gracefully', async () => {
            const emptyProjectPath = fs.mkdtempSync(path.join(os.tmpdir(), 'empty-project-'));
            try {
                const analysis = await analyzer.analyzeDependencies(emptyProjectPath);
                expect(analysis).toBeDefined();
                expect(analysis.projectDependencies).toHaveLength(0);
                expect(analysis.fileDependencies).toHaveLength(0);
            }
            finally {
                fs.rmSync(emptyProjectPath, { recursive: true, force: true });
            }
        });
        test('should handle corrupted package.json', async () => {
            const corruptedProjectPath = fs.mkdtempSync(path.join(os.tmpdir(), 'corrupted-project-'));
            try {
                fs.writeFileSync(path.join(corruptedProjectPath, 'package.json'), '{ invalid json');
                const analysis = await analyzer.analyzeDependencies(corruptedProjectPath);
                expect(analysis).toBeDefined();
                expect(analysis.projectDependencies).toHaveLength(0);
            }
            finally {
                fs.rmSync(corruptedProjectPath, { recursive: true, force: true });
            }
        });
        test('should handle non-existent project path', async () => {
            await expect(analyzer.analyzeDependencies('/non/existent/path')).rejects.toThrow();
        });
    });
    describe('Performance', () => {
        test('should complete analysis within reasonable time', async () => {
            const startTime = Date.now();
            const analysis = await analyzer.analyzeDependencies(testProjectPath);
            const endTime = Date.now();
            expect(analysis).toBeDefined();
            expect(endTime - startTime).toBeLessThan(10000); // 10秒以内
        });
        test('should handle large projects efficiently', async () => {
            // 大量のファイルを作成
            const largeProjectPath = fs.mkdtempSync(path.join(os.tmpdir(), 'large-project-'));
            try {
                fs.writeFileSync(path.join(largeProjectPath, 'package.json'), JSON.stringify({
                    name: 'large-project',
                    dependencies: Object.fromEntries(Array.from({ length: 100 }, (_, i) => [`package-${i}`, `^1.0.0`]))
                }, null, 2));
                fs.mkdirSync(path.join(largeProjectPath, 'src'), { recursive: true });
                // 100個のファイルを作成
                for (let i = 0; i < 100; i++) {
                    const fileContent = `import pkg${i} from 'package-${i}';\nexport const value${i} = pkg${i};`;
                    fs.writeFileSync(path.join(largeProjectPath, `src/file${i}.ts`), fileContent);
                }
                const startTime = Date.now();
                const analysis = await analyzer.analyzeDependencies(largeProjectPath);
                const endTime = Date.now();
                expect(analysis.projectDependencies.length).toBeGreaterThan(50);
                expect(endTime - startTime).toBeLessThan(15000); // 15秒以内
            }
            finally {
                fs.rmSync(largeProjectPath, { recursive: true, force: true });
            }
        });
    });
    describe('Integration with Package Managers', () => {
        test('should detect package manager type', async () => {
            const packageManager = await analyzer.detectPackageManager(testProjectPath);
            expect(packageManager).toBeDefined();
            expect(['npm', 'yarn', 'pnpm', 'unknown']).toContain(packageManager);
            // yarn.lock があるので yarn を検出するはず
            expect(packageManager).toBe('yarn');
        });
        test('should handle multiple lock files', async () => {
            // package-lock.json も追加
            const packageLock = {
                name: 'test-project',
                version: '1.0.0',
                lockfileVersion: 2,
                requires: true,
                packages: {
                    '': {
                        name: 'test-project',
                        version: '1.0.0'
                    }
                }
            };
            fs.writeFileSync(path.join(testProjectPath, 'package-lock.json'), JSON.stringify(packageLock, null, 2));
            const packageManager = await analyzer.detectPackageManager(testProjectPath);
            // 複数のlock fileがある場合の優先順位をテスト
            expect(['npm', 'yarn']).toContain(packageManager);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3Nhc2FrYW1hL1Byb2plY3RzL1JpbW9yL3Rlc3QvYW5hbHl6ZXJzL2RlcGVuZGVuY3kudGVzdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLCtEQUFvRTtBQUVwRSx1Q0FBeUI7QUFDekIsMkNBQTZCO0FBQzdCLHVDQUF5QjtBQUV6QixRQUFRLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO0lBQ2xDLElBQUksUUFBNEIsQ0FBQztJQUNqQyxJQUFJLGVBQXVCLENBQUM7SUFFNUIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFFBQVEsR0FBRyxJQUFJLCtCQUFrQixFQUFFLENBQUM7UUFFcEMsc0JBQXNCO1FBQ3RCLGVBQWUsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLHdCQUF3QixDQUFDLENBQUMsQ0FBQztRQUVuRixxQkFBcUI7UUFDckIsTUFBTSxXQUFXLEdBQUc7WUFDbEIsSUFBSSxFQUFFLGNBQWM7WUFDcEIsT0FBTyxFQUFFLE9BQU87WUFDaEIsV0FBVyxFQUFFLHNDQUFzQztZQUNuRCxJQUFJLEVBQUUsVUFBVTtZQUNoQixPQUFPLEVBQUU7Z0JBQ1AsSUFBSSxFQUFFLE1BQU07Z0JBQ1osS0FBSyxFQUFFLEtBQUs7Z0JBQ1osS0FBSyxFQUFFLG9CQUFvQjthQUM1QjtZQUNELFlBQVksRUFBRTtnQkFDWixTQUFTLEVBQUUsU0FBUztnQkFDcEIsUUFBUSxFQUFFLFNBQVM7Z0JBQ25CLE9BQU8sRUFBRSxRQUFRO2dCQUNqQixRQUFRLEVBQUUsVUFBVTtnQkFDcEIsTUFBTSxFQUFFLFFBQVE7YUFDakI7WUFDRCxlQUFlLEVBQUU7Z0JBQ2YsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLGFBQWEsRUFBRSxTQUFTO2dCQUN4QixnQkFBZ0IsRUFBRSxTQUFTO2dCQUMzQixhQUFhLEVBQUUsU0FBUztnQkFDeEIsWUFBWSxFQUFFLFFBQVE7Z0JB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RSwrQkFBK0I7WUFDL0IsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxtQ0FBbUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNuRCx3QkFBd0I7WUFDeEIsTUFBTSxXQUFXLEdBQUc7Z0JBQ2xCLElBQUksRUFBRSxjQUFjO2dCQUNwQixPQUFPLEVBQUUsT0FBTztnQkFDaEIsZUFBZSxFQUFFLENBQUM7Z0JBQ2xCLFFBQVEsRUFBRSxJQUFJO2dCQUNkLFFBQVEsRUFBRTtvQkFDUixFQUFFLEVBQUU7d0JBQ0YsSUFBSSxFQUFFLGNBQWM7d0JBQ3BCLE9BQU8sRUFBRSxPQUFPO3FCQUNqQjtpQkFDRjthQUNGLENBQUM7WUFFRixFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLG1CQUFtQixDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFeEcsTUFBTSxjQUFjLEdBQUcsTUFBTSxRQUFRLENBQUMsb0JBQW9CLENBQUMsZUFBZSxDQUFDLENBQUM7WUFFNUUsNkJBQTZCO1lBQzdCLE1BQU0sQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3Nhc2FrYW1hL1Byb2plY3RzL1JpbW9yL3Rlc3QvYW5hbHl6ZXJzL2RlcGVuZGVuY3kudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZXBlbmRlbmN5QW5hbHl6ZXIgfSBmcm9tICcuLi8uLi9zcmMvYW5hbHl6ZXJzL2RlcGVuZGVuY3knO1xuaW1wb3J0IHsgRGVwZW5kZW5jeUFuYWx5c2lzLCBQcm9qZWN0RGVwZW5kZW5jeSwgRmlsZURlcGVuZGVuY3ksIEN5Y2xpY0RlcGVuZGVuY3kgfSBmcm9tICcuLi8uLi9zcmMvYW5hbHl6ZXJzL3R5cGVzJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7XG5cbmRlc2NyaWJlKCdEZXBlbmRlbmN5QW5hbHl6ZXInLCAoKSA9PiB7XG4gIGxldCBhbmFseXplcjogRGVwZW5kZW5jeUFuYWx5emVyO1xuICBsZXQgdGVzdFByb2plY3RQYXRoOiBzdHJpbmc7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYW5hbHl6ZXIgPSBuZXcgRGVwZW5kZW5jeUFuYWx5emVyKCk7XG4gICAgXG4gICAgLy8g44OG44K544OI55So44OX44Ot44K444Kn44Kv44OI44OH44Kj44Os44Kv44OI44Oq44KS5L2c5oiQXG4gICAgdGVzdFByb2plY3RQYXRoID0gZnMubWtkdGVtcFN5bmMocGF0aC5qb2luKG9zLnRtcGRpcigpLCAncmltb3ItZGVwZW5kZW5jeS10ZXN0LScpKTtcbiAgICBcbiAgICAvLyDopIfpm5HjgapwYWNrYWdlLmpzb27jgpLkvZzmiJBcbiAgICBjb25zdCBwYWNrYWdlSnNvbiA9IHtcbiAgICAgIG5hbWU6ICd0ZXN0LXByb2plY3QnLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBwcm9qZWN0IGZvciBkZXBlbmRlbmN5IGFuYWx5c2lzJyxcbiAgICAgIG1haW46ICdpbmRleC5qcycsXG4gICAgICBzY3JpcHRzOiB7XG4gICAgICAgIHRlc3Q6ICdqZXN0JyxcbiAgICAgICAgYnVpbGQ6ICd0c2MnLFxuICAgICAgICBzdGFydDogJ25vZGUgZGlzdC9pbmRleC5qcydcbiAgICAgIH0sXG4gICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgJ2V4cHJlc3MnOiAnXjQuMTguMCcsXG4gICAgICAgICdsb2Rhc2gnOiAnNC4xNy4yMScsXG4gICAgICAgICdheGlvcyc6ICd+MS40LjAnLFxuICAgICAgICAnbW9tZW50JzogJz49Mi4yOS4wJyxcbiAgICAgICAgJ3V1aWQnOiAnXjkuMC4wJ1xuICAgICAgfSxcbiAgICAgIGRldkRlcGVuZGVuY2llczoge1xuICAgICAgICAnamVzdCc6ICdeMjkuMC4wJyxcbiAgICAgICAgJ0B0eXBlcy9qZXN0JzogJ14yOS4wLjAnLFxuICAgICAgICAnQHR5cGVzL2V4cHJlc3MnOiAnXjQuMTcuMCcsXG4gICAgICAgICdAdHlwZXMvbm9kZSc6ICdeMjAuMC4wJyxcbiAgICAgICAgJ3R5cGVzY3JpcHQnOiAnXjUuMC4wJyxcbiAgICAgICAgJ3RzLW5vZGUnOiAnXjEwLjkuMCdcbiAgICAgIH0sXG4gICAgICBwZWVyRGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICdyZWFjdCc6ICc+PTE2LjAuMCcsXG4gICAgICAgICdyZWFjdC1kb20nOiAnPj0xNi4wLjAnXG4gICAgICB9LFxuICAgICAgb3B0aW9uYWxEZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgJ2ZzZXZlbnRzJzogJ14yLjMuMCcgIC8vIG1hY09TIG9ubHlcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVzdFByb2plY3RQYXRoLCAncGFja2FnZS5qc29uJyksIEpTT04uc3RyaW5naWZ5KHBhY2thZ2VKc29uLCBudWxsLCAyKSk7XG5cbiAgICAvLyB5YXJuLmxvY2vjg5XjgqHjgqTjg6vjgpLkvZzmiJBcbiAgICBjb25zdCB5YXJuTG9jayA9IGAjIFRISVMgSVMgQU4gQVVUT0dFTkVSQVRFRCBGSUxFLiBETyBOT1QgRURJVCBUSElTIEZJTEUgRElSRUNUTFkuXG4jIHlhcm4gbG9ja2ZpbGUgdjFcblxuYXhpb3NAfjEuNC4wOlxuICB2ZXJzaW9uIFwiMS40LjBcIlxuICByZXNvbHZlZCBcImh0dHBzOi8vcmVnaXN0cnkueWFybnBrZy5jb20vYXhpb3MvLS9heGlvcy0xLjQuMC50Z3pcIlxuICBpbnRlZ3JpdHkgc2hhNTEyLVM0WENXTUVtenZvNjRUOUdmdlFET1hnWVJESi93c1NaYzdKdmRneDV1MXNkMEp3c3VQTHFiM1NZbXVzYWcrZWRGNnppeU1lbnNQVnFMVFNjMVBpU0VBPT1cblxuZXhwcmVzc0BeNC4xOC4wOlxuICB2ZXJzaW9uIFwiNC4xOC4yXCJcbiAgcmVzb2x2ZWQgXCJodHRwczovL3JlZ2lzdHJ5Lnlhcm5wa2cuY29tL2V4cHJlc3MvLS9leHByZXNzLTQuMTguMi50Z3pcIlxuICBpbnRlZ3JpdHkgc2hhNTEyLTUvUHNMNmlHUGRmUS9sS00xVXVpZWxZZ3YzQlVvSmZ6MWFVd1U5dkhaK0o3Z3l2d2RRWEZFQklFSWF4ZUdmMEdJY3JlQVROeUJFeHRhbGlzRGJ1TXFRPT1cblxubG9kYXNoQDQuMTcuMjE6XG4gIHZlcnNpb24gXCI0LjE3LjIxXCJcbiAgcmVzb2x2ZWQgXCJodHRwczovL3JlZ2lzdHJ5Lnlhcm5wa2cuY29tL2xvZGFzaC8tL2xvZGFzaC00LjE3LjIxLnRnelwiXG4gIGludGVncml0eSBzaGE1MTItdjJrREVlNTdsZWNUdWxhREl1TlRQeTNSeTRnTEdKNloxTzN2RTFrcmdYWk5yc1ErTEZUR0hWeFZqY1hQczE3TGhiWlZHZWRBSnY4WFoxdHZqNUZ2U2c9PVxuYDtcblxuICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHRlc3RQcm9qZWN0UGF0aCwgJ3lhcm4ubG9jaycpLCB5YXJuTG9jayk7XG5cbiAgICAvLyDjg4bjgrnjg4jnlKjjga5UeXBlU2NyaXB044OV44Kh44Kk44Or576k44KS5L2c5oiQXG4gICAgZnMubWtkaXJTeW5jKHBhdGguam9pbih0ZXN0UHJvamVjdFBhdGgsICdzcmMnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgXG4gICAgLy8gaW5kZXgudHNcbiAgICBjb25zdCBpbmRleENvZGUgPSBgaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgdXNlclJvdXRlciB9IGZyb20gJy4vcm91dGVzL3VzZXInO1xuaW1wb3J0IHsgYXV0aE1pZGRsZXdhcmUgfSBmcm9tICcuL21pZGRsZXdhcmUvYXV0aCc7XG5pbXBvcnQgKiBhcyBjb25maWcgZnJvbSAnLi9jb25maWcvZGF0YWJhc2UnO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2UoJy9hcGkvdXNlcnMnLCB1c2VyUm91dGVyKTtcbmFwcC51c2UoYXV0aE1pZGRsZXdhcmUpO1xuXG5leHBvcnQgZGVmYXVsdCBhcHA7YDtcblxuICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHRlc3RQcm9qZWN0UGF0aCwgJ3NyYy9pbmRleC50cycpLCBpbmRleENvZGUpO1xuXG4gICAgLy8gcm91dGVzL3VzZXIudHNcbiAgICBmcy5ta2RpclN5bmMocGF0aC5qb2luKHRlc3RQcm9qZWN0UGF0aCwgJ3NyYy9yb3V0ZXMnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgY29uc3QgdXNlclJvdXRlckNvZGUgPSBgaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBVc2VyU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3VzZXJTZXJ2aWNlJztcbmltcG9ydCB7IHZhbGlkYXRlVXNlciB9IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRpb24nO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5jb25zdCB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZSgpO1xuXG5yb3V0ZXIuZ2V0KCcvJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHVzZXJzID0gYXdhaXQgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKTtcbiAgcmVzLmpzb24oXy5vbWl0KHVzZXJzLCAncGFzc3dvcmQnKSk7XG59KTtcblxuZXhwb3J0IHsgcm91dGVyIGFzIHVzZXJSb3V0ZXIgfTtgO1xuXG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVzdFByb2plY3RQYXRoLCAnc3JjL3JvdXRlcy91c2VyLnRzJyksIHVzZXJSb3V0ZXJDb2RlKTtcblxuICAgIC8vIHNlcnZpY2VzL3VzZXJTZXJ2aWNlLnRzXG4gICAgZnMubWtkaXJTeW5jKHBhdGguam9pbih0ZXN0UHJvamVjdFBhdGgsICdzcmMvc2VydmljZXMnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgY29uc3QgdXNlclNlcnZpY2VDb2RlID0gYGltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IERhdGFiYXNlQ29ubmVjdGlvbiB9IGZyb20gJy4vZGF0YWJhc2UnO1xuXG5leHBvcnQgY2xhc3MgVXNlclNlcnZpY2Uge1xuICBwcml2YXRlIGRiOiBEYXRhYmFzZUNvbm5lY3Rpb247XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5kYiA9IG5ldyBEYXRhYmFzZUNvbm5lY3Rpb24oKTtcbiAgfVxuXG4gIGFzeW5jIGdldEFsbFVzZXJzKCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmRiLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIHVzZXJzJyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVVc2VyKHVzZXJEYXRhOiBhbnkpIHtcbiAgICBjb25zdCBpZCA9IHV1aWR2NCgpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmRiLnF1ZXJ5KCdJTlNFUlQgSU5UTyB1c2VycyBWQUxVRVMgKD8pJywgW3sgaWQsIC4uLnVzZXJEYXRhIH1dKTtcbiAgfVxuXG4gIGFzeW5jIGZldGNoRXh0ZXJuYWxEYXRhKCkge1xuICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQoJ2h0dHBzOi8vYXBpLmV4YW1wbGUuY29tL2RhdGEnKTtcbiAgfVxufWA7XG5cbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0UHJvamVjdFBhdGgsICdzcmMvc2VydmljZXMvdXNlclNlcnZpY2UudHMnKSwgdXNlclNlcnZpY2VDb2RlKTtcblxuICAgIC8vIHNlcnZpY2VzL2RhdGFiYXNlLnRzIC0g5b6q55Kw5L6d5a2Y44KS5L2c44KL44Gf44KBXG4gICAgY29uc3QgZGF0YWJhc2VDb2RlID0gYGltcG9ydCB7IFVzZXJTZXJ2aWNlIH0gZnJvbSAnLi91c2VyU2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZUNvbm5lY3Rpb24ge1xuICBwcml2YXRlIHVzZXJTZXJ2aWNlPzogVXNlclNlcnZpY2U7XG5cbiAgcXVlcnkoc3FsOiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKSB7XG4gICAgLy8g5b6q55Kw5L6d5a2Y44Gu44OH44OiXG4gICAgaWYgKCF0aGlzLnVzZXJTZXJ2aWNlKSB7XG4gICAgICAvLyB0aGlzLnVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKCk7IC8vIOOBk+OCjOOBr+W+queSsOS+neWtmOOCkuS9nOOCi1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgfVxufWA7XG5cbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0UHJvamVjdFBhdGgsICdzcmMvc2VydmljZXMvZGF0YWJhc2UudHMnKSwgZGF0YWJhc2VDb2RlKTtcblxuICAgIC8vIG1pZGRsZXdhcmUvYXV0aC50c1xuICAgIGZzLm1rZGlyU3luYyhwYXRoLmpvaW4odGVzdFByb2plY3RQYXRoLCAnc3JjL21pZGRsZXdhcmUnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgY29uc3QgYXV0aENvZGUgPSBgaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nOyAvLyDlrZjlnKjjgZfjgarjgYTkvp3lrZjplqLkv4JcbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlLCBOZXh0RnVuY3Rpb24gfSBmcm9tICdleHByZXNzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGF1dGhNaWRkbGV3YXJlKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XG4gIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgaWYgKCF0b2tlbikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnTm8gdG9rZW4gcHJvdmlkZWQnIH0pO1xuICB9XG4gIG5leHQoKTtcbn1gO1xuXG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVzdFByb2plY3RQYXRoLCAnc3JjL21pZGRsZXdhcmUvYXV0aC50cycpLCBhdXRoQ29kZSk7XG5cbiAgICAvLyB1dGlscy92YWxpZGF0aW9uLnRzXG4gICAgZnMubWtkaXJTeW5jKHBhdGguam9pbih0ZXN0UHJvamVjdFBhdGgsICdzcmMvdXRpbHMnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgY29uc3QgdmFsaWRhdGlvbkNvZGUgPSBgaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IEpvaSBmcm9tICdqb2knOyAvLyDmnKrjgqTjg7Pjgrnjg4jjg7zjg6vjga7kvp3lrZjplqLkv4JcblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVXNlcih1c2VyRGF0YTogYW55KSB7XG4gIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgIG5hbWU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIGVtYWlsOiBKb2kuc3RyaW5nKCkuZW1haWwoKS5yZXF1aXJlZCgpLFxuICAgIGJpcnRoRGF0ZTogSm9pLmRhdGUoKS5tYXgobW9tZW50KCkuc3VidHJhY3QoMTgsICd5ZWFycycpKS5yZXF1aXJlZCgpXG4gIH0pO1xuXG4gIHJldHVybiBzY2hlbWEudmFsaWRhdGUodXNlckRhdGEpO1xufWA7XG5cbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0UHJvamVjdFBhdGgsICdzcmMvdXRpbHMvdmFsaWRhdGlvbi50cycpLCB2YWxpZGF0aW9uQ29kZSk7XG5cbiAgICAvLyBjb25maWcvZGF0YWJhc2UudHNcbiAgICBmcy5ta2RpclN5bmMocGF0aC5qb2luKHRlc3RQcm9qZWN0UGF0aCwgJ3NyYy9jb25maWcnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgY29uc3QgY29uZmlnQ29kZSA9IGBleHBvcnQgY29uc3QgZGJDb25maWcgPSB7XG4gIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICBwb3J0OiA1NDMyLFxuICBkYXRhYmFzZTogJ3Rlc3RkYidcbn07YDtcblxuICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHRlc3RQcm9qZWN0UGF0aCwgJ3NyYy9jb25maWcvZGF0YWJhc2UudHMnKSwgY29uZmlnQ29kZSk7XG5cbiAgICAvLyB0c2NvbmZpZy5qc29uXG4gICAgY29uc3QgdHNDb25maWcgPSB7XG4gICAgICBjb21waWxlck9wdGlvbnM6IHtcbiAgICAgICAgdGFyZ2V0OiAnZXMyMDIwJyxcbiAgICAgICAgbW9kdWxlOiAnY29tbW9uanMnLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIGVzTW9kdWxlSW50ZXJvcDogdHJ1ZSxcbiAgICAgICAgc2tpcExpYkNoZWNrOiB0cnVlLFxuICAgICAgICBmb3JjZUNvbnNpc3RlbnRDYXNpbmdJbkZpbGVOYW1lczogdHJ1ZSxcbiAgICAgICAgb3V0RGlyOiAnLi9kaXN0JyxcbiAgICAgICAgcm9vdERpcjogJy4vc3JjJ1xuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IFsnc3JjLyoqLyonXSxcbiAgICAgIGV4Y2x1ZGU6IFsnbm9kZV9tb2R1bGVzJywgJ2Rpc3QnXVxuICAgIH07XG5cbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0UHJvamVjdFBhdGgsICd0c2NvbmZpZy5qc29uJyksIEpTT04uc3RyaW5naWZ5KHRzQ29uZmlnLCBudWxsLCAyKSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgaWYgKGZzLmV4aXN0c1N5bmModGVzdFByb2plY3RQYXRoKSkge1xuICAgICAgZnMucm1TeW5jKHRlc3RQcm9qZWN0UGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NsYXNzIEluc3RhbnRpYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBEZXBlbmRlbmN5QW5hbHl6ZXIgaW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoYW5hbHl6ZXIpLnRvQmVJbnN0YW5jZU9mKERlcGVuZGVuY3lBbmFseXplcik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSByZXF1aXJlZCBwdWJsaWMgbWV0aG9kcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0eXBlb2YgYW5hbHl6ZXIuYW5hbHl6ZURlcGVuZGVuY2llcykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgYW5hbHl6ZXIuZGV0ZWN0Q3ljbGljRGVwZW5kZW5jaWVzKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBhbmFseXplci5maW5kVW51c2VkRGVwZW5kZW5jaWVzKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBhbmFseXplci5maW5kTWlzc2luZ0RlcGVuZGVuY2llcykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgYW5hbHl6ZXIuYW5hbHl6ZVZlcnNpb25Db25zdHJhaW50cykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FuYWx5emVEZXBlbmRlbmNpZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGFuYWx5emUgYWxsIGRlcGVuZGVuY3kgdHlwZXMgZnJvbSBwYWNrYWdlLmpzb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEZXBlbmRlbmNpZXModGVzdFByb2plY3RQYXRoKTtcblxuICAgICAgZXhwZWN0KGFuYWx5c2lzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLnByb2plY3REZXBlbmRlbmNpZXMpLnRvSGF2ZUxlbmd0aCgxNCk7IC8vIDUgZGVwcyArIDYgZGV2RGVwcyArIDIgcGVlckRlcHMgKyAxIG9wdGlvbmFsRGVwc1xuICAgICAgXG4gICAgICAvLyBQcm9kdWN0aW9uIGRlcGVuZGVuY2llc1xuICAgICAgY29uc3QgcHJvZHVjdGlvbkRlcHMgPSBhbmFseXNpcy5wcm9qZWN0RGVwZW5kZW5jaWVzLmZpbHRlcihkZXAgPT4gZGVwLnR5cGUgPT09ICdwcm9kdWN0aW9uJyk7XG4gICAgICBleHBlY3QocHJvZHVjdGlvbkRlcHMpLnRvSGF2ZUxlbmd0aCg1KTtcbiAgICAgIGV4cGVjdChwcm9kdWN0aW9uRGVwcy5zb21lKGRlcCA9PiBkZXAubmFtZSA9PT0gJ2V4cHJlc3MnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChwcm9kdWN0aW9uRGVwcy5zb21lKGRlcCA9PiBkZXAubmFtZSA9PT0gJ2xvZGFzaCcpKS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBEZXZlbG9wbWVudCBkZXBlbmRlbmNpZXNcbiAgICAgIGNvbnN0IGRldkRlcHMgPSBhbmFseXNpcy5wcm9qZWN0RGVwZW5kZW5jaWVzLmZpbHRlcihkZXAgPT4gZGVwLnR5cGUgPT09ICdkZXZlbG9wbWVudCcpO1xuICAgICAgZXhwZWN0KGRldkRlcHMpLnRvSGF2ZUxlbmd0aCg2KTtcbiAgICAgIGV4cGVjdChkZXZEZXBzLnNvbWUoZGVwID0+IGRlcC5uYW1lID09PSAnamVzdCcpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRldkRlcHMuc29tZShkZXAgPT4gZGVwLm5hbWUgPT09ICd0eXBlc2NyaXB0JykpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFBlZXIgZGVwZW5kZW5jaWVzXG4gICAgICBjb25zdCBwZWVyRGVwcyA9IGFuYWx5c2lzLnByb2plY3REZXBlbmRlbmNpZXMuZmlsdGVyKGRlcCA9PiBkZXAudHlwZSA9PT0gJ3BlZXInKTtcbiAgICAgIGV4cGVjdChwZWVyRGVwcykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHBlZXJEZXBzLnNvbWUoZGVwID0+IGRlcC5uYW1lID09PSAncmVhY3QnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBkZXRlY3QgZmlsZS1sZXZlbCBkZXBlbmRlbmNpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEZXBlbmRlbmNpZXModGVzdFByb2plY3RQYXRoKTtcblxuICAgICAgZXhwZWN0KGFuYWx5c2lzLmZpbGVEZXBlbmRlbmNpZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoYW5hbHlzaXMuZmlsZURlcGVuZGVuY2llcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgLy8gaW5kZXgudHMg44Gu5L6d5a2Y6Zai5L+C44KS44OB44Kn44OD44KvXG4gICAgICBjb25zdCBpbmRleERlcHMgPSBhbmFseXNpcy5maWxlRGVwZW5kZW5jaWVzLmZpbmQoZGVwID0+IGRlcC5maWxlLmluY2x1ZGVzKCdpbmRleC50cycpKTtcbiAgICAgIGV4cGVjdChpbmRleERlcHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoaW5kZXhEZXBzIS5pbXBvcnRzKS50b0VxdWFsKFxuICAgICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKFsnZXhwcmVzcycsICcuL3JvdXRlcy91c2VyJywgJy4vbWlkZGxld2FyZS9hdXRoJ10pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRyYWNrIGRlcGVuZGVuY3kgdXNhZ2UgYWNyb3NzIGZpbGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBhbmFseXplci5hbmFseXplRGVwZW5kZW5jaWVzKHRlc3RQcm9qZWN0UGF0aCk7XG5cbiAgICAgIGNvbnN0IGV4cHJlc3NEZXAgPSBhbmFseXNpcy5wcm9qZWN0RGVwZW5kZW5jaWVzLmZpbmQoZGVwID0+IGRlcC5uYW1lID09PSAnZXhwcmVzcycpO1xuICAgICAgZXhwZWN0KGV4cHJlc3NEZXApLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXhwcmVzc0RlcCEudXNhZ2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXhwcmVzc0RlcCEudXNhZ2UubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHVzYWdlID0gZXhwcmVzc0RlcCEudXNhZ2VbMF07XG4gICAgICBleHBlY3QodXNhZ2UuZmlsZSkudG9Db250YWluKCdpbmRleC50cycpO1xuICAgICAgZXhwZWN0KHVzYWdlLmltcG9ydHMpLnRvRXF1YWwoZXhwZWN0LmFycmF5Q29udGFpbmluZyhbJ2V4cHJlc3MnXSkpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGFuYWx5emUgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIGxvY2sgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEZXBlbmRlbmNpZXModGVzdFByb2plY3RQYXRoKTtcblxuICAgICAgY29uc3QgZXhwcmVzc0RlcCA9IGFuYWx5c2lzLnByb2plY3REZXBlbmRlbmNpZXMuZmluZChkZXAgPT4gZGVwLm5hbWUgPT09ICdleHByZXNzJyk7XG4gICAgICBleHBlY3QoZXhwcmVzc0RlcCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChleHByZXNzRGVwIS52ZXJzaW9uKS50b0JlKCdeNC4xOC4wJyk7XG4gICAgICBleHBlY3QoZXhwcmVzc0RlcCEuaW5zdGFsbGVkVmVyc2lvbikudG9CZSgnNC4xOC4yJyk7IC8vIEZyb20geWFybi5sb2NrXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkZXRlY3RDeWNsaWNEZXBlbmRlbmNpZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGRldGVjdCBwb3RlbnRpYWwgY3ljbGljIGRlcGVuZGVuY2llcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGN5Y2xpY0RlcHMgPSBhd2FpdCBhbmFseXplci5kZXRlY3RDeWNsaWNEZXBlbmRlbmNpZXModGVzdFByb2plY3RQYXRoKTtcblxuICAgICAgZXhwZWN0KGN5Y2xpY0RlcHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShjeWNsaWNEZXBzKSkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gVXNlclNlcnZpY2Ug44GoIERhdGFiYXNlQ29ubmVjdGlvbiDjga7plpPjga7mvZzlnKjnmoTjgarlvqrnkrDkvp3lrZhcbiAgICAgIGNvbnN0IGhhc0N5Y2xpY0RlcCA9IGN5Y2xpY0RlcHMuc29tZShkZXAgPT4gXG4gICAgICAgIGRlcC5maWxlcy5zb21lKGZpbGUgPT4gZmlsZS5pbmNsdWRlcygndXNlclNlcnZpY2UnKSkgJiZcbiAgICAgICAgZGVwLmZpbGVzLnNvbWUoZmlsZSA9PiBmaWxlLmluY2x1ZGVzKCdkYXRhYmFzZScpKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8g5b6q55Kw5L6d5a2Y44Gu5Y+v6IO95oCn44GM44GC44KL44GT44Go44KS56K66KqN77yI44Kz44Oh44Oz44OI44Ki44Km44OI44GV44KM44Gm44GE44KL44GM77yJXG4gICAgICBleHBlY3QoY3ljbGljRGVwcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2F0ZWdvcml6ZSBjeWNsaWMgZGVwZW5kZW5jaWVzIGJ5IHNldmVyaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3ljbGljRGVwcyA9IGF3YWl0IGFuYWx5emVyLmRldGVjdEN5Y2xpY0RlcGVuZGVuY2llcyh0ZXN0UHJvamVjdFBhdGgpO1xuXG4gICAgICBpZiAoY3ljbGljRGVwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGN5Y2xpY0RlcHMuZm9yRWFjaChkZXAgPT4ge1xuICAgICAgICAgIGV4cGVjdChbJ2Vycm9yJywgJ3dhcm5pbmcnLCAnaW5mbyddKS50b0NvbnRhaW4oZGVwLnNldmVyaXR5KTtcbiAgICAgICAgICBleHBlY3QoZGVwLnN1Z2dlc3Rpb24pLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgZXhwZWN0KHR5cGVvZiBkZXAuc3VnZ2VzdGlvbikudG9CZSgnc3RyaW5nJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZmluZFVudXNlZERlcGVuZGVuY2llcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaWRlbnRpZnkgdW51c2VkIGRlcGVuZGVuY2llcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVudXNlZERlcHMgPSBhd2FpdCBhbmFseXplci5maW5kVW51c2VkRGVwZW5kZW5jaWVzKHRlc3RQcm9qZWN0UGF0aCk7XG5cbiAgICAgIGV4cGVjdCh1bnVzZWREZXBzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkodW51c2VkRGVwcykpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIOaknOWHuuOBleOCjOOBn+acquS9v+eUqOODkeODg+OCseODvOOCuOOBruWtmOWcqOOCkueiuuiqjVxuICAgICAgLy8gZnNldmVudHPjga/jgqrjg5fjgrfjg6fjg4rjg6vjgarkvp3lrZjplqLkv4LjgajjgZfjgabmibHjgo/jgozjgovlj6/og73mgKfjgYzjgYLjgovjgZ/jgoHjgIFcbiAgICAgIC8vIOOCiOOCiueiuuWun+OBq+acquS9v+eUqOOBqOOBquOCi+ODkeODg+OCseODvOOCuOOCkueiuuiqjVxuICAgICAgaWYgKHVudXNlZERlcHMuaW5jbHVkZXMoJ2ZzZXZlbnRzJykpIHtcbiAgICAgICAgZXhwZWN0KHVudXNlZERlcHMpLnRvQ29udGFpbignZnNldmVudHMnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWwkeOBquOBj+OBqOOCguS9leOCieOBi+OBruacquS9v+eUqOODkeODg+OCseODvOOCuOOBjOaknOWHuuOBleOCjOOCi+OBk+OBqOOCkueiuuiqjVxuICAgICAgICBleHBlY3QodW51c2VkRGVwcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBub3QgZmxhZyB1c2VkIGRlcGVuZGVuY2llcyBhcyB1bnVzZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1bnVzZWREZXBzID0gYXdhaXQgYW5hbHl6ZXIuZmluZFVudXNlZERlcGVuZGVuY2llcyh0ZXN0UHJvamVjdFBhdGgpO1xuXG4gICAgICAvLyDlrp/pmpvjgavkvb/nlKjjgZXjgozjgabjgYTjgotkZXBlbmRlbmNpZXPjga/lkKvjgb7jgozjgarjgYTjga/jgZpcbiAgICAgIGV4cGVjdCh1bnVzZWREZXBzKS5ub3QudG9Db250YWluKCdleHByZXNzJyk7XG4gICAgICBleHBlY3QodW51c2VkRGVwcykubm90LnRvQ29udGFpbignbG9kYXNoJyk7XG4gICAgICBleHBlY3QodW51c2VkRGVwcykubm90LnRvQ29udGFpbignYXhpb3MnKTtcbiAgICAgIGV4cGVjdCh1bnVzZWREZXBzKS5ub3QudG9Db250YWluKCd1dWlkJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGRldkRlcGVuZGVuY2llcyBhcHByb3ByaWF0ZWx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdW51c2VkRGVwcyA9IGF3YWl0IGFuYWx5emVyLmZpbmRVbnVzZWREZXBlbmRlbmNpZXModGVzdFByb2plY3RQYXRoKTtcblxuICAgICAgLy8gZGV2RGVwZW5kZW5jaWVz44Gv6YCa5bi444Gu44Kz44O844OJ5YiG5p6Q44Gn44Gv5L2/55So44GV44KM44Gm44GE44Gq44GE44KI44GG44Gr6KaL44GI44KL44GM44CBXG4gICAgICAvLyDjg4bjgrnjg4jjgoTjg5Pjg6vjg4njg4Tjg7zjg6vjgajjgZfjgablrp/pmpvjgavjga/lv4XopoFcbiAgICAgIC8vIOOBk+OBruWIpOWumuOBr+ikh+mbkeOBquOBruOBp+OAgeWfuuacrOeahOOBquWLleS9nOeiuuiqjeOBruOBv1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkodW51c2VkRGVwcykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmaW5kTWlzc2luZ0RlcGVuZGVuY2llcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgZGV0ZWN0IG1pc3NpbmcgZGVwZW5kZW5jaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWlzc2luZ0RlcHMgPSBhd2FpdCBhbmFseXplci5maW5kTWlzc2luZ0RlcGVuZGVuY2llcyh0ZXN0UHJvamVjdFBhdGgpO1xuXG4gICAgICBleHBlY3QobWlzc2luZ0RlcHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShtaXNzaW5nRGVwcykpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIGpzb253ZWJ0b2tlbiDjgaggam9pIOOBr+S9v+eUqOOBleOCjOOBpuOBhOOCi+OBjHBhY2thZ2UuanNvbuOBq+OBquOBhFxuICAgICAgZXhwZWN0KG1pc3NpbmdEZXBzKS50b0NvbnRhaW4oJ2pzb253ZWJ0b2tlbicpO1xuICAgICAgZXhwZWN0KG1pc3NpbmdEZXBzKS50b0NvbnRhaW4oJ2pvaScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG5vdCBmbGFnIGluc3RhbGxlZCBkZXBlbmRlbmNpZXMgYXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1pc3NpbmdEZXBzID0gYXdhaXQgYW5hbHl6ZXIuZmluZE1pc3NpbmdEZXBlbmRlbmNpZXModGVzdFByb2plY3RQYXRoKTtcblxuICAgICAgLy8g44Kk44Oz44K544OI44O844Or5riI44G/44Gu5L6d5a2Y6Zai5L+C44Gv5ZCr44G+44KM44Gq44GE44Gv44GaXG4gICAgICBleHBlY3QobWlzc2luZ0RlcHMpLm5vdC50b0NvbnRhaW4oJ2V4cHJlc3MnKTtcbiAgICAgIGV4cGVjdChtaXNzaW5nRGVwcykubm90LnRvQ29udGFpbignbG9kYXNoJyk7XG4gICAgICBleHBlY3QobWlzc2luZ0RlcHMpLm5vdC50b0NvbnRhaW4oJ21vbWVudCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBUeXBlU2NyaXB0IHR5cGUgZGVwZW5kZW5jaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWlzc2luZ0RlcHMgPSBhd2FpdCBhbmFseXplci5maW5kTWlzc2luZ0RlcGVuZGVuY2llcyh0ZXN0UHJvamVjdFBhdGgpO1xuXG4gICAgICAvLyBAdHlwZXMvKiDjg5Hjg4PjgrHjg7zjgrjjga7mibHjgYTjgpLnorroqo1cbiAgICAgIC8vIOWun+ijheOBq+OCiOOBo+OBpuOBr+Wei+Wumue+qeOBruS4jei2s+OCguaknOWHuuOBmeOCi+WPr+iDveaAp+OBjOOBguOCi1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobWlzc2luZ0RlcHMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYW5hbHl6ZVZlcnNpb25Db25zdHJhaW50cycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgYW5hbHl6ZSB2ZXJzaW9uIGNvbnN0cmFpbnQgcGF0dGVybnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25zdHJhaW50cyA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVWZXJzaW9uQ29uc3RyYWludHModGVzdFByb2plY3RQYXRoKTtcblxuICAgICAgZXhwZWN0KGNvbnN0cmFpbnRzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoY29uc3RyYWludHMpKS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICBpZiAoY29uc3RyYWludHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdHJhaW50cy5mb3JFYWNoKGNvbnN0cmFpbnQgPT4ge1xuICAgICAgICAgIGV4cGVjdChjb25zdHJhaW50KS50b0hhdmVQcm9wZXJ0eSgncGFja2FnZScpO1xuICAgICAgICAgIGV4cGVjdChjb25zdHJhaW50KS50b0hhdmVQcm9wZXJ0eSgnZGVjbGFyZWRWZXJzaW9uJyk7XG4gICAgICAgICAgLy8gaW5zdGFsbGVkVmVyc2lvbuOBr+OCquODl+OCt+ODp+ODiuODq1xuICAgICAgICAgIGV4cGVjdChjb25zdHJhaW50KS50b0hhdmVQcm9wZXJ0eSgnY29uc3RyYWludCcpO1xuICAgICAgICAgIC8vIOWei+ODgeOCp+ODg+OCr1xuICAgICAgICAgIGV4cGVjdCh0eXBlb2YgY29uc3RyYWludC5wYWNrYWdlKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgICAgICBleHBlY3QodHlwZW9mIGNvbnN0cmFpbnQuZGVjbGFyZWRWZXJzaW9uKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgICAgICBleHBlY3QoWydleGFjdCcsICdyYW5nZScsICdjYXJldCcsICd0aWxkZScsICd3aWxkY2FyZCddKS50b0NvbnRhaW4oY29uc3RyYWludC5jb25zdHJhaW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZGV0ZWN0IHZlcnNpb24gbWlzbWF0Y2hlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZVZlcnNpb25Db25zdHJhaW50cyh0ZXN0UHJvamVjdFBhdGgpO1xuXG4gICAgICAvLyDjg5Djg7zjgrjjg6fjg7PliLbntITjgYzmuoDjgZ/jgZXjgozjgabjgYTjgovjgYvjg4Hjgqfjg4Pjgq9cbiAgICAgIGNvbnN0IGxvZGFzaENvbnN0cmFpbnQgPSBjb25zdHJhaW50cy5maW5kKGMgPT4gYy5wYWNrYWdlID09PSAnbG9kYXNoJyk7XG4gICAgICBpZiAobG9kYXNoQ29uc3RyYWludCkge1xuICAgICAgICBleHBlY3QodHlwZW9mIGxvZGFzaENvbnN0cmFpbnQuaGFzVnVsbmVyYWJpbGl0eSkudG9CZSgnYm9vbGVhbicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIHBhY2thZ2UuanNvbiBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZW1wdHlQcm9qZWN0UGF0aCA9IGZzLm1rZHRlbXBTeW5jKHBhdGguam9pbihvcy50bXBkaXIoKSwgJ2VtcHR5LXByb2plY3QtJykpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEZXBlbmRlbmNpZXMoZW1wdHlQcm9qZWN0UGF0aCk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QoYW5hbHlzaXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChhbmFseXNpcy5wcm9qZWN0RGVwZW5kZW5jaWVzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICAgIGV4cGVjdChhbmFseXNpcy5maWxlRGVwZW5kZW5jaWVzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBmcy5ybVN5bmMoZW1wdHlQcm9qZWN0UGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb3JydXB0ZWQgcGFja2FnZS5qc29uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29ycnVwdGVkUHJvamVjdFBhdGggPSBmcy5ta2R0ZW1wU3luYyhwYXRoLmpvaW4ob3MudG1wZGlyKCksICdjb3JydXB0ZWQtcHJvamVjdC0nKSk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKGNvcnJ1cHRlZFByb2plY3RQYXRoLCAncGFja2FnZS5qc29uJyksICd7IGludmFsaWQganNvbicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBhbmFseXplci5hbmFseXplRGVwZW5kZW5jaWVzKGNvcnJ1cHRlZFByb2plY3RQYXRoKTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChhbmFseXNpcykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGFuYWx5c2lzLnByb2plY3REZXBlbmRlbmNpZXMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGZzLnJtU3luYyhjb3JydXB0ZWRQcm9qZWN0UGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBub24tZXhpc3RlbnQgcHJvamVjdCBwYXRoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBhbmFseXplci5hbmFseXplRGVwZW5kZW5jaWVzKCcvbm9uL2V4aXN0ZW50L3BhdGgnKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjb21wbGV0ZSBhbmFseXNpcyB3aXRoaW4gcmVhc29uYWJsZSB0aW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IGFuYWx5c2lzID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURlcGVuZGVuY2llcyh0ZXN0UHJvamVjdFBhdGgpO1xuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIGV4cGVjdChhbmFseXNpcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlTGVzc1RoYW4oMTAwMDApOyAvLyAxMOenkuS7peWGhVxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBwcm9qZWN0cyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWkp+mHj+OBruODleOCoeOCpOODq+OCkuS9nOaIkFxuICAgICAgY29uc3QgbGFyZ2VQcm9qZWN0UGF0aCA9IGZzLm1rZHRlbXBTeW5jKHBhdGguam9pbihvcy50bXBkaXIoKSwgJ2xhcmdlLXByb2plY3QtJykpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbihsYXJnZVByb2plY3RQYXRoLCAncGFja2FnZS5qc29uJyksIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lOiAnbGFyZ2UtcHJvamVjdCcsXG4gICAgICAgICAgZGVwZW5kZW5jaWVzOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAgfSwgKF8sIGkpID0+IFtgcGFja2FnZS0ke2l9YCwgYF4xLjAuMGBdKVxuICAgICAgICAgIClcbiAgICAgICAgfSwgbnVsbCwgMikpO1xuXG4gICAgICAgIGZzLm1rZGlyU3luYyhwYXRoLmpvaW4obGFyZ2VQcm9qZWN0UGF0aCwgJ3NyYycpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIDEwMOWAi+OBruODleOCoeOCpOODq+OCkuS9nOaIkFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBgaW1wb3J0IHBrZyR7aX0gZnJvbSAncGFja2FnZS0ke2l9JztcXG5leHBvcnQgY29uc3QgdmFsdWUke2l9ID0gcGtnJHtpfTtgO1xuICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKGxhcmdlUHJvamVjdFBhdGgsIGBzcmMvZmlsZSR7aX0udHNgKSwgZmlsZUNvbnRlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBhbmFseXplci5hbmFseXplRGVwZW5kZW5jaWVzKGxhcmdlUHJvamVjdFBhdGgpO1xuICAgICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgICBleHBlY3QoYW5hbHlzaXMucHJvamVjdERlcGVuZGVuY2llcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbig1MCk7XG4gICAgICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlTGVzc1RoYW4oMTUwMDApOyAvLyAxNeenkuS7peWGhVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZnMucm1TeW5jKGxhcmdlUHJvamVjdFBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHdpdGggUGFja2FnZSBNYW5hZ2VycycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgZGV0ZWN0IHBhY2thZ2UgbWFuYWdlciB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGFja2FnZU1hbmFnZXIgPSBhd2FpdCBhbmFseXplci5kZXRlY3RQYWNrYWdlTWFuYWdlcih0ZXN0UHJvamVjdFBhdGgpO1xuICAgICAgXG4gICAgICBleHBlY3QocGFja2FnZU1hbmFnZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoWyducG0nLCAneWFybicsICdwbnBtJywgJ3Vua25vd24nXSkudG9Db250YWluKHBhY2thZ2VNYW5hZ2VyKTtcbiAgICAgIFxuICAgICAgLy8geWFybi5sb2NrIOOBjOOBguOCi+OBruOBpyB5YXJuIOOCkuaknOWHuuOBmeOCi+OBr+OBmlxuICAgICAgZXhwZWN0KHBhY2thZ2VNYW5hZ2VyKS50b0JlKCd5YXJuJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGxvY2sgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBwYWNrYWdlLWxvY2suanNvbiDjgoLov73liqBcbiAgICAgIGNvbnN0IHBhY2thZ2VMb2NrID0ge1xuICAgICAgICBuYW1lOiAndGVzdC1wcm9qZWN0JyxcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgbG9ja2ZpbGVWZXJzaW9uOiAyLFxuICAgICAgICByZXF1aXJlczogdHJ1ZSxcbiAgICAgICAgcGFja2FnZXM6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgbmFtZTogJ3Rlc3QtcHJvamVjdCcsXG4gICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0UHJvamVjdFBhdGgsICdwYWNrYWdlLWxvY2suanNvbicpLCBKU09OLnN0cmluZ2lmeShwYWNrYWdlTG9jaywgbnVsbCwgMikpO1xuXG4gICAgICBjb25zdCBwYWNrYWdlTWFuYWdlciA9IGF3YWl0IGFuYWx5emVyLmRldGVjdFBhY2thZ2VNYW5hZ2VyKHRlc3RQcm9qZWN0UGF0aCk7XG4gICAgICBcbiAgICAgIC8vIOikh+aVsOOBrmxvY2sgZmlsZeOBjOOBguOCi+WgtOWQiOOBruWEquWFiOmghuS9jeOCkuODhuOCueODiFxuICAgICAgZXhwZWN0KFsnbnBtJywgJ3lhcm4nXSkudG9Db250YWluKHBhY2thZ2VNYW5hZ2VyKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=