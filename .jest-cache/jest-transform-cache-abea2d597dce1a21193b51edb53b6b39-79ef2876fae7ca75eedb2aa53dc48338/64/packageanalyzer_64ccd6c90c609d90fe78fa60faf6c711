6c243fb61068f615d214ec6ceeba86ad
"use strict";
/**
 * パッケージ分析クラス
 * package.json、lockファイル、依存関係の管理を担当
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.PackageAnalyzer = void 0;
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
const glob = __importStar(require("glob"));
class PackageAnalyzer {
    BUILT_IN_MODULES = new Set([
        'fs', 'path', 'http', 'https', 'crypto', 'os', 'util', 'stream',
        'url', 'querystring', 'child_process', 'cluster', 'events',
        'buffer', 'process', 'console', 'module', 'require', 'assert',
        'net', 'tls', 'dns', 'readline', 'repl', 'vm', 'zlib'
    ]);
    /**
     * パッケージマネージャーを検出
     */
    async detectPackageManager(projectPath) {
        // yarn.lockがあればyarn
        if (fs.existsSync(path.join(projectPath, 'yarn.lock'))) {
            return 'yarn';
        }
        // pnpm-lock.yamlがあればpnpm
        if (fs.existsSync(path.join(projectPath, 'pnpm-lock.yaml'))) {
            return 'pnpm';
        }
        // package-lock.jsonがあればnpm
        if (fs.existsSync(path.join(projectPath, 'package-lock.json'))) {
            return 'npm';
        }
        // デフォルトはnpm
        return 'npm';
    }
    /**
     * package.jsonを解析
     */
    async analyzePackageJson(projectPath) {
        const packageJsonPath = path.join(projectPath, 'package.json');
        if (!fs.existsSync(packageJsonPath)) {
            return {
                name: undefined,
                version: undefined,
                dependencies: {},
                devDependencies: {},
                peerDependencies: {},
                allDependencies: []
            };
        }
        try {
            const content = fs.readFileSync(packageJsonPath, 'utf-8');
            const packageJson = JSON.parse(content);
            const dependencies = packageJson.dependencies || {};
            const devDependencies = packageJson.devDependencies || {};
            const peerDependencies = packageJson.peerDependencies || {};
            const allDependencies = [
                ...Object.keys(dependencies),
                ...Object.keys(devDependencies),
                ...Object.keys(peerDependencies)
            ];
            return {
                name: packageJson.name,
                version: packageJson.version,
                dependencies,
                devDependencies,
                peerDependencies,
                allDependencies
            };
        }
        catch (error) {
            // パースエラーの場合は空のオブジェクトを返す
            return {
                name: undefined,
                version: undefined,
                dependencies: {},
                devDependencies: {},
                peerDependencies: {},
                allDependencies: []
            };
        }
    }
    /**
     * 未使用の依存関係を検出
     */
    async findUnusedDependencies(projectPath) {
        const packageAnalysis = await this.analyzePackageJson(projectPath);
        const allDeps = packageAnalysis.allDependencies;
        if (allDeps.length === 0) {
            return [];
        }
        const usedPackages = await this.findUsedPackages(projectPath);
        const unusedDeps = allDeps.filter(dep => !usedPackages.has(dep));
        return unusedDeps;
    }
    /**
     * 不足している依存関係を検出
     */
    async findMissingDependencies(projectPath) {
        const packageAnalysis = await this.analyzePackageJson(projectPath);
        const installedDeps = new Set(packageAnalysis.allDependencies);
        const usedPackages = await this.findUsedPackages(projectPath);
        const missingDeps = [];
        usedPackages.forEach(pkg => {
            if (!installedDeps.has(pkg) && !this.BUILT_IN_MODULES.has(pkg)) {
                missingDeps.push(pkg);
            }
        });
        return missingDeps;
    }
    /**
     * バージョン制約を分析
     */
    async analyzeVersionConstraints(projectPath) {
        const packageAnalysis = await this.analyzePackageJson(projectPath);
        const results = [];
        const allDeps = {
            ...packageAnalysis.dependencies,
            ...packageAnalysis.devDependencies,
            ...packageAnalysis.peerDependencies
        };
        for (const [pkg, version] of Object.entries(allDeps)) {
            const result = this.analyzeVersionString(pkg, version);
            results.push(result);
        }
        return results;
    }
    /**
     * lockファイルを解析
     */
    async parseLockFiles(projectPath) {
        const lockInfo = new Map();
        // yarn.lockをパース
        const yarnLockPath = path.join(projectPath, 'yarn.lock');
        if (fs.existsSync(yarnLockPath)) {
            try {
                const content = fs.readFileSync(yarnLockPath, 'utf-8');
                const parsed = this.parseYarnLock(content);
                parsed.forEach((version, name) => {
                    lockInfo.set(name, version);
                });
            }
            catch (error) {
                // yarn.lockの解析に失敗した場合は無視
            }
        }
        // package-lock.jsonをパース（yarn.lockがない場合）
        if (lockInfo.size === 0) {
            const packageLockPath = path.join(projectPath, 'package-lock.json');
            if (fs.existsSync(packageLockPath)) {
                try {
                    const content = fs.readFileSync(packageLockPath, 'utf-8');
                    const packageLock = JSON.parse(content);
                    const packages = this.parsePackageLock(packageLock);
                    packages.forEach((version, name) => {
                        lockInfo.set(name, version);
                    });
                }
                catch (error) {
                    // package-lock.jsonの解析に失敗した場合は無視
                }
            }
        }
        return lockInfo;
    }
    /**
     * プロジェクト内で使用されているパッケージを検出
     * @private
     */
    async findUsedPackages(projectPath) {
        const usedPackages = new Set();
        const sourceFiles = glob.sync('**/*.{js,jsx,ts,tsx,mjs,cjs}', {
            cwd: projectPath,
            ignore: ['node_modules/**', 'dist/**', 'build/**']
        });
        for (const file of sourceFiles) {
            const filePath = path.join(projectPath, file);
            try {
                const content = fs.readFileSync(filePath, 'utf-8');
                const imports = this.extractImports(content);
                imports.forEach(imp => {
                    if (!this.isRelativeImport(imp) && !this.BUILT_IN_MODULES.has(imp)) {
                        usedPackages.add(this.getPackageName(imp));
                    }
                });
            }
            catch (error) {
                // ファイル読み込みエラーは無視
            }
        }
        return usedPackages;
    }
    /**
     * コードからimport/requireを抽出
     * @private
     */
    extractImports(content) {
        const imports = new Set();
        // ES6 imports
        const importRegex = /import\s+(?:.*?\s+from\s+)?['"]([^'"]+)['"]/g;
        let match;
        while ((match = importRegex.exec(content)) !== null) {
            imports.add(match[1]);
        }
        // CommonJS requires
        const requireRegex = /require\s*\(\s*['"]([^'"]+)['"]\s*\)/g;
        while ((match = requireRegex.exec(content)) !== null) {
            imports.add(match[1]);
        }
        // Dynamic imports
        const dynamicImportRegex = /import\s*\(\s*['"]([^'"]+)['"]\s*\)/g;
        while ((match = dynamicImportRegex.exec(content)) !== null) {
            imports.add(match[1]);
        }
        return imports;
    }
    /**
     * 相対インポートかどうかを判定
     * @private
     */
    isRelativeImport(importPath) {
        return importPath.startsWith('./') ||
            importPath.startsWith('../') ||
            importPath.startsWith('/');
    }
    /**
     * インポートパスからパッケージ名を取得
     * @private
     */
    getPackageName(importPath) {
        // スコープ付きパッケージの場合
        if (importPath.startsWith('@')) {
            const parts = importPath.split('/');
            return parts.slice(0, 2).join('/');
        }
        // 通常のパッケージ
        return importPath.split('/')[0];
    }
    /**
     * バージョン文字列を分析
     * @private
     */
    analyzeVersionString(pkg, version) {
        let type;
        let isRisky = false;
        if (version === '*' || version === 'latest') {
            type = 'any';
            isRisky = true;
        }
        else if (version.startsWith('^')) {
            type = 'caret';
            isRisky = false;
        }
        else if (version.startsWith('~')) {
            type = 'tilde';
            isRisky = false;
        }
        else if (version.includes('>') || version.includes('<') || version.includes('||')) {
            type = 'range';
            isRisky = true;
        }
        else {
            type = 'exact';
            isRisky = false;
        }
        return {
            package: pkg,
            constraint: version,
            type,
            isRisky
        };
    }
    /**
     * yarn.lockをパース
     * @private
     */
    parseYarnLock(content) {
        const packages = new Map();
        const lines = content.split('\n');
        let currentPackage = '';
        for (const line of lines) {
            // パッケージ名の行
            if (line && !line.startsWith(' ') && line.includes('@')) {
                currentPackage = line.split('@')[0].trim().replace(/"/g, '');
            }
            // バージョンの行
            else if (line.trim().startsWith('version ')) {
                const version = line.trim().replace('version ', '').replace(/"/g, '');
                if (currentPackage) {
                    packages.set(currentPackage, version);
                    currentPackage = '';
                }
            }
        }
        return packages;
    }
    /**
     * package-lock.jsonをパース
     * @private
     */
    parsePackageLock(packageLock) {
        const packages = new Map();
        if (packageLock.packages) {
            Object.entries(packageLock.packages).forEach(([pkgPath, info]) => {
                if (pkgPath && pkgPath.startsWith('node_modules/')) {
                    const name = pkgPath.replace('node_modules/', '');
                    const packageInfo = info;
                    if (packageInfo?.version) {
                        packages.set(name, packageInfo.version);
                    }
                }
            });
        }
        // 旧形式のpackage-lock.json
        if (packageLock.dependencies) {
            Object.entries(packageLock.dependencies).forEach(([name, info]) => {
                if (info?.version) {
                    packages.set(name, info.version);
                }
            });
        }
        return packages;
    }
}
exports.PackageAnalyzer = PackageAnalyzer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3Nhc2FrYW1hL1Byb2plY3RzL1JpbW9yL3NyYy9hbmFseXplcnMvZGVwZW5kZW5jeS1hbmFseXNpcy9wYWNrYWdlLWFuYWx5emVyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILHVDQUF5QjtBQUN6QiwyQ0FBNkI7QUFDN0IsMkNBQTZCO0FBMEI3QixNQUFhLGVBQWU7SUFDVCxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsQ0FBQztRQUMxQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUTtRQUMvRCxLQUFLLEVBQUUsYUFBYSxFQUFFLGVBQWUsRUFBRSxTQUFTLEVBQUUsUUFBUTtRQUMxRCxRQUFRLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVE7UUFDN0QsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTTtLQUN0RCxDQUFDLENBQUM7SUFFSDs7T0FFRztJQUNILEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxXQUFtQjtRQUM1QyxvQkFBb0I7UUFDcEIsSUFBSSxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN2RCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQseUJBQXlCO1FBQ3pCLElBQUksRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUM1RCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQsMkJBQTJCO1FBQzNCLElBQUksRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFB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RSxJQUFJLENBQUMsRUFBRSxFQUFFO2dCQUNoRSxJQUFJLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQztvQkFDbEIsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNuQyxDQUFDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBRUQsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGO0FBaFdELDBDQWdXQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvc2FzYWthbWEvUHJvamVjdHMvUmltb3Ivc3JjL2FuYWx5emVycy9kZXBlbmRlbmN5LWFuYWx5c2lzL3BhY2thZ2UtYW5hbHl6ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDjg5Hjg4PjgrHjg7zjgrjliIbmnpDjgq/jg6njgrlcbiAqIHBhY2thZ2UuanNvbuOAgWxvY2vjg5XjgqHjgqTjg6vjgIHkvp3lrZjplqLkv4Ljga7nrqHnkIbjgpLmi4XlvZNcbiAqL1xuXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0ICogYXMgZ2xvYiBmcm9tICdnbG9iJztcbmltcG9ydCB7XG4gIEV4dGVuZGVkUGFja2FnZUpzb24sXG4gIFZlcnNpb25Db25zdHJhaW50LFxuICBQYWNrYWdlTG9ja0pzb24sXG4gIFBhY2thZ2VMb2NrRGVwZW5kZW5jeSxcbiAgWWFybkxvY2tFbnRyeVxufSBmcm9tICcuLi9kZXBlbmRlbmN5LXR5cGVzJztcbmltcG9ydCB7IFBhY2thZ2VKc29uQ29uZmlnIH0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFja2FnZUFuYWx5c2lzUmVzdWx0IHtcbiAgbmFtZT86IHN0cmluZztcbiAgdmVyc2lvbj86IHN0cmluZztcbiAgZGVwZW5kZW5jaWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBkZXZEZXBlbmRlbmNpZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIHBlZXJEZXBlbmRlbmNpZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGFsbERlcGVuZGVuY2llczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmVyc2lvbkNvbnN0cmFpbnRSZXN1bHQge1xuICBwYWNrYWdlOiBzdHJpbmc7XG4gIGNvbnN0cmFpbnQ6IHN0cmluZztcbiAgdHlwZTogJ2V4YWN0JyB8ICdjYXJldCcgfCAndGlsZGUnIHwgJ3JhbmdlJyB8ICdhbnknO1xuICBpc1Jpc2t5OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgUGFja2FnZUFuYWx5emVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBCVUlMVF9JTl9NT0RVTEVTID0gbmV3IFNldChbXG4gICAgJ2ZzJywgJ3BhdGgnLCAnaHR0cCcsICdodHRwcycsICdjcnlwdG8nLCAnb3MnLCAndXRpbCcsICdzdHJlYW0nLFxuICAgICd1cmwnLCAncXVlcnlzdHJpbmcnLCAnY2hpbGRfcHJvY2VzcycsICdjbHVzdGVyJywgJ2V2ZW50cycsXG4gICAgJ2J1ZmZlcicsICdwcm9jZXNzJywgJ2NvbnNvbGUnLCAnbW9kdWxlJywgJ3JlcXVpcmUnLCAnYXNzZXJ0JyxcbiAgICAnbmV0JywgJ3RscycsICdkbnMnLCAncmVhZGxpbmUnLCAncmVwbCcsICd2bScsICd6bGliJ1xuICBdKTtcblxuICAvKipcbiAgICog44OR44OD44Kx44O844K444Oe44ON44O844K444Oj44O844KS5qSc5Ye6XG4gICAqL1xuICBhc3luYyBkZXRlY3RQYWNrYWdlTWFuYWdlcihwcm9qZWN0UGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyB5YXJuLmxvY2vjgYzjgYLjgozjgbB5YXJuXG4gICAgaWYgKGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHByb2plY3RQYXRoLCAneWFybi5sb2NrJykpKSB7XG4gICAgICByZXR1cm4gJ3lhcm4nO1xuICAgIH1cbiAgICBcbiAgICAvLyBwbnBtLWxvY2sueWFtbOOBjOOBguOCjOOBsHBucG1cbiAgICBpZiAoZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4ocHJvamVjdFBhdGgsICdwbnBtLWxvY2sueWFtbCcpKSkge1xuICAgICAgcmV0dXJuICdwbnBtJztcbiAgICB9XG4gICAgXG4gICAgLy8gcGFja2FnZS1sb2NrLmpzb27jgYzjgYLjgozjgbBucG1cbiAgICBpZiAoZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4ocHJvamVjdFBhdGgsICdwYWNrYWdlLWxvY2suanNvbicpKSkge1xuICAgICAgcmV0dXJuICducG0nO1xuICAgIH1cbiAgICBcbiAgICAvLyDjg4fjg5Xjgqnjg6vjg4jjga9ucG1cbiAgICByZXR1cm4gJ25wbSc7XG4gIH1cblxuICAvKipcbiAgICogcGFja2FnZS5qc29u44KS6Kej5p6QXG4gICAqL1xuICBhc3luYyBhbmFseXplUGFja2FnZUpzb24ocHJvamVjdFBhdGg6IHN0cmluZyk6IFByb21pc2U8UGFja2FnZUFuYWx5c2lzUmVzdWx0PiB7XG4gICAgY29uc3QgcGFja2FnZUpzb25QYXRoID0gcGF0aC5qb2luKHByb2plY3RQYXRoLCAncGFja2FnZS5qc29uJyk7XG4gICAgXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhY2thZ2VKc29uUGF0aCkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgdmVyc2lvbjogdW5kZWZpbmVkLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IHt9LFxuICAgICAgICBkZXZEZXBlbmRlbmNpZXM6IHt9LFxuICAgICAgICBwZWVyRGVwZW5kZW5jaWVzOiB7fSxcbiAgICAgICAgYWxsRGVwZW5kZW5jaWVzOiBbXVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhwYWNrYWdlSnNvblBhdGgsICd1dGYtOCcpO1xuICAgICAgY29uc3QgcGFja2FnZUpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpIGFzIEV4dGVuZGVkUGFja2FnZUpzb247XG4gICAgICBcbiAgICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IHBhY2thZ2VKc29uLmRlcGVuZGVuY2llcyB8fCB7fTtcbiAgICAgIGNvbnN0IGRldkRlcGVuZGVuY2llcyA9IHBhY2thZ2VKc29uLmRldkRlcGVuZGVuY2llcyB8fCB7fTtcbiAgICAgIGNvbnN0IHBlZXJEZXBlbmRlbmNpZXMgPSBwYWNrYWdlSnNvbi5wZWVyRGVwZW5kZW5jaWVzIHx8IHt9O1xuICAgICAgXG4gICAgICBjb25zdCBhbGxEZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgIC4uLk9iamVjdC5rZXlzKGRlcGVuZGVuY2llcyksXG4gICAgICAgIC4uLk9iamVjdC5rZXlzKGRldkRlcGVuZGVuY2llcyksXG4gICAgICAgIC4uLk9iamVjdC5rZXlzKHBlZXJEZXBlbmRlbmNpZXMpXG4gICAgICBdO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBwYWNrYWdlSnNvbi5uYW1lLFxuICAgICAgICB2ZXJzaW9uOiBwYWNrYWdlSnNvbi52ZXJzaW9uLFxuICAgICAgICBkZXBlbmRlbmNpZXMsXG4gICAgICAgIGRldkRlcGVuZGVuY2llcyxcbiAgICAgICAgcGVlckRlcGVuZGVuY2llcyxcbiAgICAgICAgYWxsRGVwZW5kZW5jaWVzXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyDjg5Hjg7zjgrnjgqjjg6njg7zjga7loLTlkIjjga/nqbrjga7jgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TjgZlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgdmVyc2lvbjogdW5kZWZpbmVkLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IHt9LFxuICAgICAgICBkZXZEZXBlbmRlbmNpZXM6IHt9LFxuICAgICAgICBwZWVyRGVwZW5kZW5jaWVzOiB7fSxcbiAgICAgICAgYWxsRGVwZW5kZW5jaWVzOiBbXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pyq5L2/55So44Gu5L6d5a2Y6Zai5L+C44KS5qSc5Ye6XG4gICAqL1xuICBhc3luYyBmaW5kVW51c2VkRGVwZW5kZW5jaWVzKHByb2plY3RQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgcGFja2FnZUFuYWx5c2lzID0gYXdhaXQgdGhpcy5hbmFseXplUGFja2FnZUpzb24ocHJvamVjdFBhdGgpO1xuICAgIGNvbnN0IGFsbERlcHMgPSBwYWNrYWdlQW5hbHlzaXMuYWxsRGVwZW5kZW5jaWVzO1xuICAgIFxuICAgIGlmIChhbGxEZXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZWRQYWNrYWdlcyA9IGF3YWl0IHRoaXMuZmluZFVzZWRQYWNrYWdlcyhwcm9qZWN0UGF0aCk7XG4gICAgY29uc3QgdW51c2VkRGVwcyA9IGFsbERlcHMuZmlsdGVyKGRlcCA9PiAhdXNlZFBhY2thZ2VzLmhhcyhkZXApKTtcbiAgICBcbiAgICByZXR1cm4gdW51c2VkRGVwcztcbiAgfVxuXG4gIC8qKlxuICAgKiDkuI3otrPjgZfjgabjgYTjgovkvp3lrZjplqLkv4LjgpLmpJzlh7pcbiAgICovXG4gIGFzeW5jIGZpbmRNaXNzaW5nRGVwZW5kZW5jaWVzKHByb2plY3RQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgcGFja2FnZUFuYWx5c2lzID0gYXdhaXQgdGhpcy5hbmFseXplUGFja2FnZUpzb24ocHJvamVjdFBhdGgpO1xuICAgIGNvbnN0IGluc3RhbGxlZERlcHMgPSBuZXcgU2V0KHBhY2thZ2VBbmFseXNpcy5hbGxEZXBlbmRlbmNpZXMpO1xuICAgIFxuICAgIGNvbnN0IHVzZWRQYWNrYWdlcyA9IGF3YWl0IHRoaXMuZmluZFVzZWRQYWNrYWdlcyhwcm9qZWN0UGF0aCk7XG4gICAgY29uc3QgbWlzc2luZ0RlcHM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgdXNlZFBhY2thZ2VzLmZvckVhY2gocGtnID0+IHtcbiAgICAgIGlmICghaW5zdGFsbGVkRGVwcy5oYXMocGtnKSAmJiAhdGhpcy5CVUlMVF9JTl9NT0RVTEVTLmhhcyhwa2cpKSB7XG4gICAgICAgIG1pc3NpbmdEZXBzLnB1c2gocGtnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gbWlzc2luZ0RlcHM7XG4gIH1cblxuICAvKipcbiAgICog44OQ44O844K444On44Oz5Yi257SE44KS5YiG5p6QXG4gICAqL1xuICBhc3luYyBhbmFseXplVmVyc2lvbkNvbnN0cmFpbnRzKHByb2plY3RQYXRoOiBzdHJpbmcpOiBQcm9taXNlPFZlcnNpb25Db25zdHJhaW50UmVzdWx0W10+IHtcbiAgICBjb25zdCBwYWNrYWdlQW5hbHlzaXMgPSBhd2FpdCB0aGlzLmFuYWx5emVQYWNrYWdlSnNvbihwcm9qZWN0UGF0aCk7XG4gICAgY29uc3QgcmVzdWx0czogVmVyc2lvbkNvbnN0cmFpbnRSZXN1bHRbXSA9IFtdO1xuICAgIFxuICAgIGNvbnN0IGFsbERlcHMgPSB7XG4gICAgICAuLi5wYWNrYWdlQW5hbHlzaXMuZGVwZW5kZW5jaWVzLFxuICAgICAgLi4ucGFja2FnZUFuYWx5c2lzLmRldkRlcGVuZGVuY2llcyxcbiAgICAgIC4uLnBhY2thZ2VBbmFseXNpcy5wZWVyRGVwZW5kZW5jaWVzXG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgW3BrZywgdmVyc2lvbl0gb2YgT2JqZWN0LmVudHJpZXMoYWxsRGVwcykpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYW5hbHl6ZVZlcnNpb25TdHJpbmcocGtnLCB2ZXJzaW9uKTtcbiAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIGxvY2vjg5XjgqHjgqTjg6vjgpLop6PmnpBcbiAgICovXG4gIGFzeW5jIHBhcnNlTG9ja0ZpbGVzKHByb2plY3RQYXRoOiBzdHJpbmcpOiBQcm9taXNlPE1hcDxzdHJpbmcsIHN0cmluZz4+IHtcbiAgICBjb25zdCBsb2NrSW5mbyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG5cbiAgICAvLyB5YXJuLmxvY2vjgpLjg5Hjg7zjgrlcbiAgICBjb25zdCB5YXJuTG9ja1BhdGggPSBwYXRoLmpvaW4ocHJvamVjdFBhdGgsICd5YXJuLmxvY2snKTtcbiAgICBpZiAoZnMuZXhpc3RzU3luYyh5YXJuTG9ja1BhdGgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHlhcm5Mb2NrUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHRoaXMucGFyc2VZYXJuTG9jayhjb250ZW50KTtcbiAgICAgICAgcGFyc2VkLmZvckVhY2goKHZlcnNpb24sIG5hbWUpID0+IHtcbiAgICAgICAgICBsb2NrSW5mby5zZXQobmFtZSwgdmVyc2lvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8geWFybi5sb2Nr44Gu6Kej5p6Q44Gr5aSx5pWX44GX44Gf5aC05ZCI44Gv54Sh6KaWXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcGFja2FnZS1sb2NrLmpzb27jgpLjg5Hjg7zjgrnvvIh5YXJuLmxvY2vjgYzjgarjgYTloLTlkIjvvIlcbiAgICBpZiAobG9ja0luZm8uc2l6ZSA9PT0gMCkge1xuICAgICAgY29uc3QgcGFja2FnZUxvY2tQYXRoID0gcGF0aC5qb2luKHByb2plY3RQYXRoLCAncGFja2FnZS1sb2NrLmpzb24nKTtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKHBhY2thZ2VMb2NrUGF0aCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHBhY2thZ2VMb2NrUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICAgICAgY29uc3QgcGFja2FnZUxvY2sgPSBKU09OLnBhcnNlKGNvbnRlbnQpIGFzIFBhY2thZ2VMb2NrSnNvbjtcbiAgICAgICAgICBjb25zdCBwYWNrYWdlcyA9IHRoaXMucGFyc2VQYWNrYWdlTG9jayhwYWNrYWdlTG9jayk7XG4gICAgICAgICAgcGFja2FnZXMuZm9yRWFjaCgodmVyc2lvbiwgbmFtZSkgPT4ge1xuICAgICAgICAgICAgbG9ja0luZm8uc2V0KG5hbWUsIHZlcnNpb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIHBhY2thZ2UtbG9jay5qc29u44Gu6Kej5p6Q44Gr5aSx5pWX44GX44Gf5aC05ZCI44Gv54Sh6KaWXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbG9ja0luZm87XG4gIH1cblxuICAvKipcbiAgICog44OX44Ot44K444Kn44Kv44OI5YaF44Gn5L2/55So44GV44KM44Gm44GE44KL44OR44OD44Kx44O844K444KS5qSc5Ye6XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGZpbmRVc2VkUGFja2FnZXMocHJvamVjdFBhdGg6IHN0cmluZyk6IFByb21pc2U8U2V0PHN0cmluZz4+IHtcbiAgICBjb25zdCB1c2VkUGFja2FnZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBzb3VyY2VGaWxlcyA9IGdsb2Iuc3luYygnKiovKi57anMsanN4LHRzLHRzeCxtanMsY2pzfScsIHtcbiAgICAgIGN3ZDogcHJvamVjdFBhdGgsXG4gICAgICBpZ25vcmU6IFsnbm9kZV9tb2R1bGVzLyoqJywgJ2Rpc3QvKionLCAnYnVpbGQvKionXVxuICAgIH0pO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIHNvdXJjZUZpbGVzKSB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihwcm9qZWN0UGF0aCwgZmlsZSk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICAgICAgY29uc3QgaW1wb3J0cyA9IHRoaXMuZXh0cmFjdEltcG9ydHMoY29udGVudCk7XG4gICAgICAgIGltcG9ydHMuZm9yRWFjaChpbXAgPT4ge1xuICAgICAgICAgIGlmICghdGhpcy5pc1JlbGF0aXZlSW1wb3J0KGltcCkgJiYgIXRoaXMuQlVJTFRfSU5fTU9EVUxFUy5oYXMoaW1wKSkge1xuICAgICAgICAgICAgdXNlZFBhY2thZ2VzLmFkZCh0aGlzLmdldFBhY2thZ2VOYW1lKGltcCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyDjg5XjgqHjgqTjg6voqq3jgb/ovrzjgb/jgqjjg6njg7zjga/nhKHoppZcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXNlZFBhY2thZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCs+ODvOODieOBi+OCiWltcG9ydC9yZXF1aXJl44KS5oq95Ye6XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RJbXBvcnRzKGNvbnRlbnQ6IHN0cmluZyk6IFNldDxzdHJpbmc+IHtcbiAgICBjb25zdCBpbXBvcnRzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgXG4gICAgLy8gRVM2IGltcG9ydHNcbiAgICBjb25zdCBpbXBvcnRSZWdleCA9IC9pbXBvcnRcXHMrKD86Lio/XFxzK2Zyb21cXHMrKT9bJ1wiXShbXidcIl0rKVsnXCJdL2c7XG4gICAgbGV0IG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSBpbXBvcnRSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgaW1wb3J0cy5hZGQobWF0Y2hbMV0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBDb21tb25KUyByZXF1aXJlc1xuICAgIGNvbnN0IHJlcXVpcmVSZWdleCA9IC9yZXF1aXJlXFxzKlxcKFxccypbJ1wiXShbXidcIl0rKVsnXCJdXFxzKlxcKS9nO1xuICAgIHdoaWxlICgobWF0Y2ggPSByZXF1aXJlUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgIGltcG9ydHMuYWRkKG1hdGNoWzFdKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRHluYW1pYyBpbXBvcnRzXG4gICAgY29uc3QgZHluYW1pY0ltcG9ydFJlZ2V4ID0gL2ltcG9ydFxccypcXChcXHMqWydcIl0oW14nXCJdKylbJ1wiXVxccypcXCkvZztcbiAgICB3aGlsZSAoKG1hdGNoID0gZHluYW1pY0ltcG9ydFJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICBpbXBvcnRzLmFkZChtYXRjaFsxXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGltcG9ydHM7XG4gIH1cblxuICAvKipcbiAgICog55u45a++44Kk44Oz44Od44O844OI44GL44Gp44GG44GL44KS5Yik5a6aXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGlzUmVsYXRpdmVJbXBvcnQoaW1wb3J0UGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGltcG9ydFBhdGguc3RhcnRzV2l0aCgnLi8nKSB8fCBcbiAgICAgICAgICAgaW1wb3J0UGF0aC5zdGFydHNXaXRoKCcuLi8nKSB8fCBcbiAgICAgICAgICAgaW1wb3J0UGF0aC5zdGFydHNXaXRoKCcvJyk7XG4gIH1cblxuICAvKipcbiAgICog44Kk44Oz44Od44O844OI44OR44K544GL44KJ44OR44OD44Kx44O844K45ZCN44KS5Y+W5b6XXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGdldFBhY2thZ2VOYW1lKGltcG9ydFBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8g44K544Kz44O844OX5LuY44GN44OR44OD44Kx44O844K444Gu5aC05ZCIXG4gICAgaWYgKGltcG9ydFBhdGguc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICBjb25zdCBwYXJ0cyA9IGltcG9ydFBhdGguc3BsaXQoJy8nKTtcbiAgICAgIHJldHVybiBwYXJ0cy5zbGljZSgwLCAyKS5qb2luKCcvJyk7XG4gICAgfVxuICAgIC8vIOmAmuW4uOOBruODkeODg+OCseODvOOCuFxuICAgIHJldHVybiBpbXBvcnRQYXRoLnNwbGl0KCcvJylbMF07XG4gIH1cblxuICAvKipcbiAgICog44OQ44O844K444On44Oz5paH5a2X5YiX44KS5YiG5p6QXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVWZXJzaW9uU3RyaW5nKHBrZzogc3RyaW5nLCB2ZXJzaW9uOiBzdHJpbmcpOiBWZXJzaW9uQ29uc3RyYWludFJlc3VsdCB7XG4gICAgbGV0IHR5cGU6ICdleGFjdCcgfCAnY2FyZXQnIHwgJ3RpbGRlJyB8ICdyYW5nZScgfCAnYW55JztcbiAgICBsZXQgaXNSaXNreSA9IGZhbHNlO1xuXG4gICAgaWYgKHZlcnNpb24gPT09ICcqJyB8fCB2ZXJzaW9uID09PSAnbGF0ZXN0Jykge1xuICAgICAgdHlwZSA9ICdhbnknO1xuICAgICAgaXNSaXNreSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh2ZXJzaW9uLnN0YXJ0c1dpdGgoJ14nKSkge1xuICAgICAgdHlwZSA9ICdjYXJldCc7XG4gICAgICBpc1Jpc2t5ID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh2ZXJzaW9uLnN0YXJ0c1dpdGgoJ34nKSkge1xuICAgICAgdHlwZSA9ICd0aWxkZSc7XG4gICAgICBpc1Jpc2t5ID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh2ZXJzaW9uLmluY2x1ZGVzKCc+JykgfHwgdmVyc2lvbi5pbmNsdWRlcygnPCcpIHx8IHZlcnNpb24uaW5jbHVkZXMoJ3x8JykpIHtcbiAgICAgIHR5cGUgPSAncmFuZ2UnO1xuICAgICAgaXNSaXNreSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSAnZXhhY3QnO1xuICAgICAgaXNSaXNreSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYWNrYWdlOiBwa2csXG4gICAgICBjb25zdHJhaW50OiB2ZXJzaW9uLFxuICAgICAgdHlwZSxcbiAgICAgIGlzUmlza3lcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIHlhcm4ubG9ja+OCkuODkeODvOOCuVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVlhcm5Mb2NrKGNvbnRlbnQ6IHN0cmluZyk6IE1hcDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGNvbnN0IHBhY2thZ2VzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGxldCBjdXJyZW50UGFja2FnZSA9ICcnO1xuICAgIFxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgLy8g44OR44OD44Kx44O844K45ZCN44Gu6KGMXG4gICAgICBpZiAobGluZSAmJiAhbGluZS5zdGFydHNXaXRoKCcgJykgJiYgbGluZS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICAgIGN1cnJlbnRQYWNrYWdlID0gbGluZS5zcGxpdCgnQCcpWzBdLnRyaW0oKS5yZXBsYWNlKC9cIi9nLCAnJyk7XG4gICAgICB9XG4gICAgICAvLyDjg5Djg7zjgrjjg6fjg7Pjga7ooYxcbiAgICAgIGVsc2UgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ3ZlcnNpb24gJykpIHtcbiAgICAgICAgY29uc3QgdmVyc2lvbiA9IGxpbmUudHJpbSgpLnJlcGxhY2UoJ3ZlcnNpb24gJywgJycpLnJlcGxhY2UoL1wiL2csICcnKTtcbiAgICAgICAgaWYgKGN1cnJlbnRQYWNrYWdlKSB7XG4gICAgICAgICAgcGFja2FnZXMuc2V0KGN1cnJlbnRQYWNrYWdlLCB2ZXJzaW9uKTtcbiAgICAgICAgICBjdXJyZW50UGFja2FnZSA9ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBwYWNrYWdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBwYWNrYWdlLWxvY2suanNvbuOCkuODkeODvOOCuVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVBhY2thZ2VMb2NrKHBhY2thZ2VMb2NrOiBQYWNrYWdlTG9ja0pzb24pOiBNYXA8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICBjb25zdCBwYWNrYWdlcyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gICAgXG4gICAgaWYgKHBhY2thZ2VMb2NrLnBhY2thZ2VzKSB7XG4gICAgICBPYmplY3QuZW50cmllcyhwYWNrYWdlTG9jay5wYWNrYWdlcykuZm9yRWFjaCgoW3BrZ1BhdGgsIGluZm9dKSA9PiB7XG4gICAgICAgIGlmIChwa2dQYXRoICYmIHBrZ1BhdGguc3RhcnRzV2l0aCgnbm9kZV9tb2R1bGVzLycpKSB7XG4gICAgICAgICAgY29uc3QgbmFtZSA9IHBrZ1BhdGgucmVwbGFjZSgnbm9kZV9tb2R1bGVzLycsICcnKTtcbiAgICAgICAgICBjb25zdCBwYWNrYWdlSW5mbyA9IGluZm8gYXMgUGFja2FnZUxvY2tEZXBlbmRlbmN5O1xuICAgICAgICAgIGlmIChwYWNrYWdlSW5mbz8udmVyc2lvbikge1xuICAgICAgICAgICAgcGFja2FnZXMuc2V0KG5hbWUsIHBhY2thZ2VJbmZvLnZlcnNpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIOaXp+W9ouW8j+OBrnBhY2thZ2UtbG9jay5qc29uXG4gICAgaWYgKHBhY2thZ2VMb2NrLmRlcGVuZGVuY2llcykge1xuICAgICAgT2JqZWN0LmVudHJpZXMocGFja2FnZUxvY2suZGVwZW5kZW5jaWVzKS5mb3JFYWNoKChbbmFtZSwgaW5mb10pID0+IHtcbiAgICAgICAgaWYgKGluZm8/LnZlcnNpb24pIHtcbiAgICAgICAgICBwYWNrYWdlcy5zZXQobmFtZSwgaW5mby52ZXJzaW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBwYWNrYWdlcztcbiAgfVxufSJdLCJ2ZXJzaW9uIjozfQ==