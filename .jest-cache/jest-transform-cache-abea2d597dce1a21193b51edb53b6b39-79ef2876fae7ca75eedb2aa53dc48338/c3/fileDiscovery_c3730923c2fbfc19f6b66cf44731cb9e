f6ea24fa7281856a1ea83fdd74593a8f
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.findTestFiles = findTestFiles;
exports.isTestFile = isTestFile;
const promises_1 = require("fs/promises");
const path_1 = require("path");
async function* findTestFiles(dir, excludePatterns = [], projectRoot, depth = 0) {
    // セキュリティ: 探索深度制限（無限再帰防止）
    if (depth > 20) {
        return;
    }
    // セキュリティ: プロジェクトルートの設定
    if (!projectRoot) {
        projectRoot = process.cwd();
    }
    // セキュリティ: パス検証
    const { PathSecurity } = await Promise.resolve().then(() => __importStar(require('../utils/pathSecurity')));
    if (!PathSecurity.validateProjectPath(dir, projectRoot)) {
        console.warn(`セキュリティ警告: プロジェクト範囲外のディレクトリをスキップ: ${dir}`);
        return;
    }
    try {
        const dirents = await (0, promises_1.readdir)(dir, { withFileTypes: true });
        for (const dirent of dirents) {
            // セキュリティ: ファイル名の検証
            if (!isValidFileName(dirent.name)) {
                continue;
            }
            const path = (0, path_1.resolve)(dir, dirent.name);
            // セキュリティ: 解決されたパスの検証
            if (!PathSecurity.validateProjectPath(path, projectRoot)) {
                continue;
            }
            // 除外パターンの検証（より安全な方法）
            if (shouldExcludePath(path, excludePatterns)) {
                continue;
            }
            if (dirent.isDirectory()) {
                // セキュリティ: シンボリックリンクのスキップ
                if (dirent.isSymbolicLink()) {
                    continue;
                }
                if (dirent.name === '__tests__') {
                    const nestedDirents = await (0, promises_1.readdir)(path, { withFileTypes: true });
                    for (const nested of nestedDirents) {
                        if (nested.isFile() && isValidFileName(nested.name)) {
                            const nestedPath = (0, path_1.resolve)(path, nested.name);
                            if (PathSecurity.validateProjectPath(nestedPath, projectRoot)) {
                                yield nestedPath;
                            }
                        }
                    }
                }
                else {
                    yield* findTestFiles(path, excludePatterns, projectRoot, depth + 1);
                }
            }
            else if (dirent.isFile() && isTestFile(dirent.name)) {
                yield path;
            }
        }
    }
    catch (error) {
        // ディレクトリアクセスエラーは警告として処理
        console.warn(`ディレクトリアクセスエラー: ${dir}`, error);
    }
}
/**
 * 安全な除外パターンチェック
 */
function shouldExcludePath(path, excludePatterns) {
    // セキュリティ: 除外パターンの検証
    const safePatterns = excludePatterns.filter(pattern => typeof pattern === 'string' &&
        pattern.length > 0 &&
        pattern.length < 200 &&
        !pattern.includes('..') &&
        !/[<>:"|?*]/.test(pattern));
    return safePatterns.some(pattern => {
        // 単純な文字列マッチのみ使用（正規表現を避ける）
        return path.includes(pattern);
    });
}
/**
 * ファイル名の安全性チェック
 */
function isValidFileName(filename) {
    // 基本的な検証
    if (!filename || filename.length === 0 || filename.length > 255) {
        return false;
    }
    // 危険なファイル名パターンの検出
    const dangerousPatterns = [
        /^\./, // 隠しファイル（制限）
        /\0/, // NULL文字
        /[<>:"|?*]/, // Windows不正文字
        /^(CON|PRN|AUX|NUL|COM[1-9]|LPT[1-9])$/i, // Windows予約名
        /\.\./, // パストラバーサル
    ];
    for (const pattern of dangerousPatterns) {
        if (pattern.test(filename)) {
            return false;
        }
    }
    return true;
}
function isTestFile(filename) {
    return /\.(test|spec)\.(js|ts)$/.test(filename);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3Nhc2FrYW1hL1Byb2plY3RzL1JpbW9yL3NyYy9jb3JlL2ZpbGVEaXNjb3ZlcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxzQ0F1RUM7QUFnREQsZ0NBRUM7QUE1SEQsMENBQXNDO0FBQ3RDLCtCQUErQjtBQUV4QixLQUFLLFNBQVMsQ0FBQyxDQUFDLGFBQWEsQ0FDbEMsR0FBVyxFQUNYLGtCQUE0QixFQUFFLEVBQzlCLFdBQW9CLEVBQ3BCLFFBQWdCLENBQUM7SUFFakIseUJBQXlCO0lBQ3pCLElBQUksS0FBSyxHQUFHLEVBQUUsRUFBRSxDQUFDO1FBQ2YsT0FBTztJQUNULENBQUM7SUFFRCx1QkFBdUI7SUFDdkIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2pCLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVELGVBQWU7SUFDZixNQUFNLEVBQUUsWUFBWSxFQUFFLEdBQUcsd0RBQWEsdUJBQXVCLEdBQUMsQ0FBQztJQUMvRCxJQUFJLENBQUMsWUFBWSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsRUFBRSxDQUFDO1FBQ3hELE9BQU8sQ0FBQyxJQUFJLENBQUMsb0NBQW9DLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDeEQsT0FBTztJQUNULENBQUM7SUFFRCxJQUFJLENBQUM7UUFDSCxNQUFNLE9BQU8sR0FBRyxNQUFNLElBQUEsa0JBQU8sRUFBQyxHQUFHLEVBQUUsRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUU1RCxLQUFLLE1BQU0sTUFBTSxJQUFJLE9BQU8sRUFBRSxDQUFDO1lBQzdCLG1CQUFtQjtZQUNuQixJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUNsQyxTQUFTO1lBQ1gsQ0FBQztZQUVELE1BQU0sSUFBSSxHQUFHLElBQUEsY0FBTyxFQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFdkMscUJBQXFCO1lBQ3JCLElBQUksQ0FBQyxZQUFZLENBQUMsbUJBQW1CLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxFQUFFLENBQUM7Z0JBQ3pELFNBQVM7WUFDWCxDQUFDO1lBRUQscUJBQXFCO1lBQ3JCLElBQUksaUJBQWlCLENBQUMsSUFBSSxFQUFFLGVBQWUsQ0FBQyxFQUFFLENBQUM7Z0JBQzdDLFNBQVM7WUFDWCxDQUFDO1lBRUQsSUFBSSxNQUFNLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQztnQkFDekIseUJBQXlCO2dCQUN6QixJQUFJLE1BQU0sQ0FBQyxjQUFjLEVBQUUsRUFBRSxDQUFDO29CQUM1QixTQUFTO2dCQUNYLENBQUM7Z0JBRUQsSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLFdBQVcsRUFBRSxDQUFDO29CQUNoQyxNQUFNLGFBQWEsR0FBRyxNQUFNLElBQUEsa0JBQU8sRUFBQyxJQUFJLEVBQUUsRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztvQkFDbkUsS0FBSyxNQUFNLE1BQU0sSUFBSSxhQUFhLEVBQUUsQ0FBQzt3QkFDbkMsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDOzRCQUNwRCxNQUFNLFVBQVUsR0FBRyxJQUFBLGNBQU8sRUFBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDOzRCQUM5QyxJQUFJLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLEVBQUUsQ0FBQztnQ0FDOUQsTUFBTSxVQUFVLENBQUM7NEJBQ25CLENBQUM7d0JBQ0gsQ0FBQztvQkFDSCxDQUFDO2dCQUNILENBQUM7cUJBQU0sQ0FBQztvQkFDTixLQUFLLENBQUMsQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUN0RSxDQUFDO1lBQ0gsQ0FBQztpQkFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ3RELE1BQU0sSUFBSSxDQUFDO1lBQ2IsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLHdCQUF3QjtRQUN4QixPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMvQyxDQUFDO0FBQ0gsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxpQkFBaUIsQ0FBQyxJQUFZLEVBQUUsZUFBeUI7SUFDaEUsb0JBQW9CO0lBQ3BCLE1BQU0sWUFBWSxHQUFHLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FDcEQsT0FBTyxPQUFPLEtBQUssUUFBUTtRQUMzQixPQUFPLENBQUMsTUFBTSxHQUFHLENBQUM7UUFDbEIsT0FBTyxDQUFDLE1BQU0sR0FBRyxHQUFHO1FBQ3BCLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7UUFDdkIsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUMzQixDQUFDO0lBRUYsT0FBTyxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ2pDLDBCQUEwQjtRQUMxQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDaEMsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLGVBQWUsQ0FBQyxRQUFnQjtJQUN2QyxTQUFTO0lBQ1QsSUFBSSxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxRQUFRLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDO1FBQ2hFLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVELGtCQUFrQjtJQUNsQixNQUFNLGlCQUFpQixHQUFHO1FBQ3hCLEtBQUssRUFBRyxhQUFhO1FBQ3JCLElBQUksRUFBSSxTQUFTO1FBQ2pCLFdBQVcsRUFBRyxjQUFjO1FBQzVCLHdDQUF3QyxFQUFHLGFBQWE7UUFDeEQsTUFBTSxFQUFHLFdBQVc7S0FDckIsQ0FBQztJQUVGLEtBQUssTUFBTSxPQUFPLElBQUksaUJBQWlCLEVBQUUsQ0FBQztRQUN4QyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztZQUMzQixPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7SUFDSCxDQUFDO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBRUQsU0FBZ0IsVUFBVSxDQUFDLFFBQWdCO0lBQ3pDLE9BQU8seUJBQXlCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2xELENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3Nhc2FrYW1hL1Byb2plY3RzL1JpbW9yL3NyYy9jb3JlL2ZpbGVEaXNjb3ZlcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVhZGRpciB9IGZyb20gJ2ZzL3Byb21pc2VzJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBmaW5kVGVzdEZpbGVzKFxuICBkaXI6IHN0cmluZyxcbiAgZXhjbHVkZVBhdHRlcm5zOiBzdHJpbmdbXSA9IFtdLFxuICBwcm9qZWN0Um9vdD86IHN0cmluZyxcbiAgZGVwdGg6IG51bWJlciA9IDBcbik6IEFzeW5jR2VuZXJhdG9yPHN0cmluZz4ge1xuICAvLyDjgrvjgq3jg6Xjg6rjg4bjgqM6IOaOoue0oua3seW6puWItumZkO+8iOeEoemZkOWGjeW4sOmYsuatou+8iVxuICBpZiAoZGVwdGggPiAyMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIOOCu+OCreODpeODquODhuOCozog44OX44Ot44K444Kn44Kv44OI44Or44O844OI44Gu6Kit5a6aXG4gIGlmICghcHJvamVjdFJvb3QpIHtcbiAgICBwcm9qZWN0Um9vdCA9IHByb2Nlc3MuY3dkKCk7XG4gIH1cblxuICAvLyDjgrvjgq3jg6Xjg6rjg4bjgqM6IOODkeOCueaknOiovFxuICBjb25zdCB7IFBhdGhTZWN1cml0eSB9ID0gYXdhaXQgaW1wb3J0KCcuLi91dGlscy9wYXRoU2VjdXJpdHknKTtcbiAgaWYgKCFQYXRoU2VjdXJpdHkudmFsaWRhdGVQcm9qZWN0UGF0aChkaXIsIHByb2plY3RSb290KSkge1xuICAgIGNvbnNvbGUud2Fybihg44K744Kt44Ol44Oq44OG44Kj6K2m5ZGKOiDjg5fjg63jgrjjgqfjgq/jg4jnr4Tlm7LlpJbjga7jg4fjgqPjg6zjgq/jg4jjg6rjgpLjgrnjgq3jg4Pjg5c6ICR7ZGlyfWApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGlyZW50cyA9IGF3YWl0IHJlYWRkaXIoZGlyLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSk7XG4gIFxuICAgIGZvciAoY29uc3QgZGlyZW50IG9mIGRpcmVudHMpIHtcbiAgICAgIC8vIOOCu+OCreODpeODquODhuOCozog44OV44Kh44Kk44Or5ZCN44Gu5qSc6Ki8XG4gICAgICBpZiAoIWlzVmFsaWRGaWxlTmFtZShkaXJlbnQubmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhdGggPSByZXNvbHZlKGRpciwgZGlyZW50Lm5hbWUpO1xuICAgICAgXG4gICAgICAvLyDjgrvjgq3jg6Xjg6rjg4bjgqM6IOino+axuuOBleOCjOOBn+ODkeOCueOBruaknOiovFxuICAgICAgaWYgKCFQYXRoU2VjdXJpdHkudmFsaWRhdGVQcm9qZWN0UGF0aChwYXRoLCBwcm9qZWN0Um9vdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOmZpOWkluODkeOCv+ODvOODs+OBruaknOiovO+8iOOCiOOCiuWuieWFqOOBquaWueazle+8iVxuICAgICAgaWYgKHNob3VsZEV4Y2x1ZGVQYXRoKHBhdGgsIGV4Y2x1ZGVQYXR0ZXJucykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChkaXJlbnQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAvLyDjgrvjgq3jg6Xjg6rjg4bjgqM6IOOCt+ODs+ODnOODquODg+OCr+ODquODs+OCr+OBruOCueOCreODg+ODl1xuICAgICAgICBpZiAoZGlyZW50LmlzU3ltYm9saWNMaW5rKCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJlbnQubmFtZSA9PT0gJ19fdGVzdHNfXycpIHtcbiAgICAgICAgICBjb25zdCBuZXN0ZWREaXJlbnRzID0gYXdhaXQgcmVhZGRpcihwYXRoLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSk7XG4gICAgICAgICAgZm9yIChjb25zdCBuZXN0ZWQgb2YgbmVzdGVkRGlyZW50cykge1xuICAgICAgICAgICAgaWYgKG5lc3RlZC5pc0ZpbGUoKSAmJiBpc1ZhbGlkRmlsZU5hbWUobmVzdGVkLm5hbWUpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5lc3RlZFBhdGggPSByZXNvbHZlKHBhdGgsIG5lc3RlZC5uYW1lKTtcbiAgICAgICAgICAgICAgaWYgKFBhdGhTZWN1cml0eS52YWxpZGF0ZVByb2plY3RQYXRoKG5lc3RlZFBhdGgsIHByb2plY3RSb290KSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIG5lc3RlZFBhdGg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeWllbGQqIGZpbmRUZXN0RmlsZXMocGF0aCwgZXhjbHVkZVBhdHRlcm5zLCBwcm9qZWN0Um9vdCwgZGVwdGggKyAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChkaXJlbnQuaXNGaWxlKCkgJiYgaXNUZXN0RmlsZShkaXJlbnQubmFtZSkpIHtcbiAgICAgICAgeWllbGQgcGF0aDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8g44OH44Kj44Os44Kv44OI44Oq44Ki44Kv44K744K544Ko44Op44O844Gv6K2m5ZGK44Go44GX44Gm5Yem55CGXG4gICAgY29uc29sZS53YXJuKGDjg4fjgqPjg6zjgq/jg4jjg6rjgqLjgq/jgrvjgrnjgqjjg6njg7w6ICR7ZGlyfWAsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIOWuieWFqOOBqumZpOWkluODkeOCv+ODvOODs+ODgeOCp+ODg+OCr1xuICovXG5mdW5jdGlvbiBzaG91bGRFeGNsdWRlUGF0aChwYXRoOiBzdHJpbmcsIGV4Y2x1ZGVQYXR0ZXJuczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgLy8g44K744Kt44Ol44Oq44OG44KjOiDpmaTlpJbjg5Hjgr/jg7zjg7Pjga7mpJzoqLxcbiAgY29uc3Qgc2FmZVBhdHRlcm5zID0gZXhjbHVkZVBhdHRlcm5zLmZpbHRlcihwYXR0ZXJuID0+IFxuICAgIHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJyAmJiBcbiAgICBwYXR0ZXJuLmxlbmd0aCA+IDAgJiYgXG4gICAgcGF0dGVybi5sZW5ndGggPCAyMDAgJiZcbiAgICAhcGF0dGVybi5pbmNsdWRlcygnLi4nKSAmJlxuICAgICEvWzw+OlwifD8qXS8udGVzdChwYXR0ZXJuKVxuICApO1xuXG4gIHJldHVybiBzYWZlUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHtcbiAgICAvLyDljZjntJTjgarmloflrZfliJfjg57jg4Pjg4Hjga7jgb/kvb/nlKjvvIjmraPopo/ooajnj77jgpLpgb/jgZHjgovvvIlcbiAgICByZXR1cm4gcGF0aC5pbmNsdWRlcyhwYXR0ZXJuKTtcbiAgfSk7XG59XG5cbi8qKlxuICog44OV44Kh44Kk44Or5ZCN44Gu5a6J5YWo5oCn44OB44Kn44OD44KvXG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRGaWxlTmFtZShmaWxlbmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIOWfuuacrOeahOOBquaknOiovFxuICBpZiAoIWZpbGVuYW1lIHx8IGZpbGVuYW1lLmxlbmd0aCA9PT0gMCB8fCBmaWxlbmFtZS5sZW5ndGggPiAyNTUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyDljbHpmbrjgarjg5XjgqHjgqTjg6vlkI3jg5Hjgr/jg7zjg7Pjga7mpJzlh7pcbiAgY29uc3QgZGFuZ2Vyb3VzUGF0dGVybnMgPSBbXG4gICAgL15cXC4vLCAgLy8g6Zqg44GX44OV44Kh44Kk44Or77yI5Yi26ZmQ77yJXG4gICAgL1xcMC8sICAgLy8gTlVMTOaWh+Wtl1xuICAgIC9bPD46XCJ8PypdLywgIC8vIFdpbmRvd3PkuI3mraPmloflrZdcbiAgICAvXihDT058UFJOfEFVWHxOVUx8Q09NWzEtOV18TFBUWzEtOV0pJC9pLCAgLy8gV2luZG93c+S6iOe0hOWQjVxuICAgIC9cXC5cXC4vLCAgLy8g44OR44K544OI44Op44OQ44O844K144OrXG4gIF07XG5cbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGRhbmdlcm91c1BhdHRlcm5zKSB7XG4gICAgaWYgKHBhdHRlcm4udGVzdChmaWxlbmFtZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVGVzdEZpbGUoZmlsZW5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gL1xcLih0ZXN0fHNwZWMpXFwuKGpzfHRzKSQvLnRlc3QoZmlsZW5hbWUpO1xufSJdLCJ2ZXJzaW9uIjozfQ==