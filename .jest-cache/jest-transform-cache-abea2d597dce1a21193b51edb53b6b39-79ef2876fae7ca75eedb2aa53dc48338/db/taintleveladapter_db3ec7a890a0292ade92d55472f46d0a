97128fb673d6c9e91f2c71c484ea61b3
"use strict";
/**
 * TaintLevel列挙型から新型システムへの互換アダプター
 * arXiv:2504.18529v2への段階的移行をサポート
 *
 * このアダプターは、既存のTaintLevelベースのコードを
 * 新しい@Tainted/@Untaintedアノテーションシステムに
 * 段階的に移行するためのブリッジとして機能します。
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.MigrationTracker = exports.MigrationHelper = exports.TaintLevelAdapter = void 0;
const checker_framework_types_1 = require("../types/checker-framework-types");
/**
 * TaintLevel互換アダプター
 * Dorothy Denningの格子理論から新しい型システムへの変換を提供
 */
class TaintLevelAdapter {
    /**
     * TaintLevelから型クオリファイアへの変換
     * 格子理論の多段階レベルを二値システムにマッピング
     */
    static toTaintQualifier(level) {
        // CLEAN/UNTAINTEDは@Untaintedにマップ
        if (level === 'untainted' || level === 'sanitized') {
            return '@Untainted';
        }
        // その他すべては@Taintedにマップ
        return '@Tainted';
    }
    /**
     * TaintLevelから具体的な型への変換
     * 信頼度情報を保持しながら新型システムに変換
     */
    static toQualifiedType(value, level, source, metadata) {
        // 信頼度の計算（0.0-1.0の範囲）
        const confidence = this.calculateConfidence(level);
        if (level === 'untainted' || level === 'sanitized') {
            return checker_framework_types_1.TypeConstructors.untainted(value, 'legacy-clean');
        }
        else {
            const sourceStr = source || (metadata?.sources && metadata.sources[0]) || 'legacy-taint';
            return checker_framework_types_1.TypeConstructors.tainted(value, sourceStr, confidence);
        }
    }
    /**
     * 新型システムからTaintLevelへの逆変換
     * 内部実装での格子理論使用のため
     */
    static fromQualifiedType(qualified) {
        if (qualified.__brand === '@Untainted') {
            return 'untainted';
        }
        else if (qualified.__brand === '@Tainted') {
            const tainted = qualified;
            return this.confidenceToTaintLevel(tainted.__confidence);
        }
        else {
            // @PolyTaintは文脈依存なので、保守的にPOSSIBLY_TAINTEDとする
            return 'possibly_tainted';
        }
    }
    /**
     * TaintLevelから信頼度への変換
     */
    static calculateConfidence(level) {
        switch (level) {
            case 'untainted':
            case 'sanitized':
                return 0.0;
            case 'possibly_tainted':
                return 0.25;
            case 'unknown':
                return 0.5;
            case 'tainted':
                return 0.75;
            case 'highly_tainted':
                return 1.0;
            default:
                return 0.5; // デフォルトは中間値
        }
    }
    /**
     * 信頼度からTaintLevelへの逆変換
     */
    static confidenceToTaintLevel(confidence) {
        if (confidence <= 0.0) {
            return 'untainted';
        }
        else if (confidence <= 0.25) {
            return 'possibly_tainted';
        }
        else if (confidence <= 0.5) {
            return 'unknown';
        }
        else if (confidence <= 0.75) {
            return 'tainted';
        }
        else {
            return 'highly_tainted';
        }
    }
    /**
     * 格子演算の互換実装
     * 新型システムで格子理論の演算を再現
     */
    static join(a, b) {
        // 両方が@Untaintedの場合のみ@Untainted
        if (a.__brand === '@Untainted' && b.__brand === '@Untainted') {
            return a;
        }
        // いずれかが@Taintedなら結果も@Tainted
        if (a.__brand === '@Tainted') {
            return a;
        }
        else if (b.__brand === '@Tainted') {
            return b;
        }
        // PolyTaintが含まれる場合は保守的に@Tainted
        return checker_framework_types_1.TypeConstructors.tainted(a.__value, 'join-operation', 0.5);
    }
    /**
     * 格子演算のmeet操作
     */
    static meet(a, b) {
        // いずれかが@Untaintedなら結果も@Untainted
        if (a.__brand === '@Untainted') {
            return a;
        }
        else if (b.__brand === '@Untainted') {
            return b;
        }
        // 両方が@Taintedの場合、より低い信頼度を選択
        if (a.__brand === '@Tainted' && b.__brand === '@Tainted') {
            const aConf = a.__confidence;
            const bConf = b.__confidence;
            if (aConf <= bConf) {
                return a;
            }
            else {
                return b;
            }
        }
        return a;
    }
    /**
     * レガシーコードのための便利メソッド
     * TaintLevelベースの比較を新型システムで実行
     */
    static isMoreTaintedThan(a, b) {
        const aLevel = this.fromQualifiedType(a);
        const bLevel = this.fromQualifiedType(b);
        return aLevel > bLevel;
    }
    /**
     * バッチ変換用のヘルパー
     * 複数の値を一括で変換
     */
    static batchConvert(values) {
        return values.map(({ value, level, source }) => this.toQualifiedType(value, level, source));
    }
    /**
     * デバッグ用の文字列表現
     */
    static toString(qualified) {
        if (qualified.__brand === '@Untainted') {
            return 'Untainted (safe)';
        }
        else if (qualified.__brand === '@Tainted') {
            const tainted = qualified;
            return `Tainted (source: ${tainted.__source}, confidence: ${tainted.__confidence})`;
        }
        else {
            return 'PolyTaint (context-dependent)';
        }
    }
}
exports.TaintLevelAdapter = TaintLevelAdapter;
/**
 * 移行支援ユーティリティ
 */
class MigrationHelper {
    /**
     * レガシーAPIの互換実装
     * 既存コードの最小限の変更で新システムを使用可能に
     */
    static createLegacyCompatibleAPI() {
        return {
            // TaintLevel定数の互換実装
            TaintLevel: {
                UNTAINTED: '@Untainted',
                POSSIBLY_TAINTED: '@Tainted',
                LIKELY_TAINTED: '@Tainted',
                DEFINITELY_TAINTED: '@Tainted',
                HIGHLY_TAINTED: '@Tainted'
            },
            // 格子演算の互換実装
            TaintLattice: {
                join: TaintLevelAdapter.join,
                meet: TaintLevelAdapter.meet,
                lessThanOrEqual: (a, b) => !TaintLevelAdapter.isMoreTaintedThan(a, b)
            }
        };
    }
    /**
     * 段階的移行のためのデコレータ
     * 既存メソッドを新型システムで自動的にラップ
     */
    static wrapLegacyMethod(method) {
        return (...args) => {
            const legacyResult = method(...args);
            return TaintLevelAdapter.toTaintQualifier(legacyResult);
        };
    }
}
exports.MigrationHelper = MigrationHelper;
/**
 * 移行状況の追跡
 */
class MigrationTracker {
    static migrationStats = new Map();
    static recordMigration(fileName, total, migrated) {
        this.migrationStats.set(fileName, {
            total,
            migrated,
            lastUpdated: new Date()
        });
    }
    static getMigrationProgress() {
        let totalItems = 0;
        let migratedItems = 0;
        const fileStats = [];
        for (const [file, stats] of this.migrationStats) {
            totalItems += stats.total;
            migratedItems += stats.migrated;
            fileStats.push({
                file,
                progress: stats.total > 0 ? (stats.migrated / stats.total) * 100 : 0
            });
        }
        return {
            overallProgress: totalItems > 0 ? (migratedItems / totalItems) * 100 : 0,
            fileStats
        };
    }
}
exports.MigrationTracker = MigrationTracker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3Nhc2FrYW1hL1Byb2plY3RzL1JpbW9yL3NyYy9zZWN1cml0eS9jb21wYXRpYmlsaXR5L3RhaW50LWxldmVsLWFkYXB0ZXIudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7O0dBT0c7OztBQUdILDhFQU0wQztBQUUxQzs7O0dBR0c7QUFDSCxNQUFhLGlCQUFpQjtJQUM1Qjs7O09BR0c7SUFDSCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBaUI7UUFDdkMsaUNBQWlDO1FBQ2pDLElBQUksS0FBSyxLQUFLLFdBQVcsSUFBSSxLQUFLLEtBQUssV0FBVyxFQUFFLENBQUM7WUFDbkQsT0FBTyxZQUFZLENBQUM7UUFDdEIsQ0FBQztRQUNELHNCQUFzQjtRQUN0QixPQUFPLFVBQVUsQ0FBQztJQUNwQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsTUFBTSxDQUFDLGVBQWUsQ0FDcEIsS0FBUSxFQUNSLEtBQWlCLEVBQ2pCLE1BQW9CLEVBQ3BCLFFBQXdCO1FBRXhCLHFCQUFxQjtRQUNyQixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFbkQsSUFBSSxLQUFLLEtBQUssV0FBVyxJQUFJLEtBQUssS0FBSyxXQUFXLEVBQUUsQ0FBQztZQUNuRCxPQUFPLDBDQUFnQixDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDM0QsQ0FBQzthQUFNLENBQUM7WUFDTixNQUFNLFNBQVMsR0FBRyxNQUFNLElBQUksQ0FBQyxRQUFRLEVBQUUsT0FBTyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxjQUFjLENBQUM7WUFDekYsT0FBTywwQ0FBZ0IsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNoRSxDQUFDO0lBQ0gsQ0FBQztJQUVEOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxpQkFBaUIsQ0FBSSxTQUEyQjtRQUNyRCxJQUFJLFNBQVMsQ0FBQyxP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LElBQUksSUFBSSxFQUFFO1NBQ3hCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxNQUFNLENBQUMsb0JBQW9CO1FBSXpCLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNuQixJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUM7UUFDdEIsTUFBTSxTQUFTLEdBQThDLEVBQUUsQ0FBQztRQUVoRSxLQUFLLE1BQU0sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ2hELFVBQVUsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDO1lBQzFCLGFBQWEsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDO1lBQ2hDLFNBQVMsQ0FBQyxJQUFJLENBQUM7Z0JBQ2IsSUFBSTtnQkFDSixRQUFRLEVBQUUsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3JFLENBQUMsQ0FBQztRQUNMLENBQUM7UUFFRCxPQUFPO1lBQ0wsZUFBZSxFQUFFLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxHQUFHLFVBQVUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4RSxTQUFTO1NBQ1YsQ0FBQztJQUNKLENBQUM7O0FBcENILDRDQXFDQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvc2FzYWthbWEvUHJvamVjdHMvUmltb3Ivc3JjL3NlY3VyaXR5L2NvbXBhdGliaWxpdHkvdGFpbnQtbGV2ZWwtYWRhcHRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRhaW50TGV2ZWzliJfmjJnlnovjgYvjgonmlrDlnovjgrfjgrnjg4bjg6Djgbjjga7kupLmj5vjgqLjg4Djg5fjgr/jg7xcbiAqIGFyWGl2OjI1MDQuMTg1Mjl2MuOBuOOBruautemajueahOenu+ihjOOCkuOCteODneODvOODiFxuICogXG4gKiDjgZPjga7jgqLjg4Djg5fjgr/jg7zjga/jgIHml6LlrZjjga5UYWludExldmVs44OZ44O844K544Gu44Kz44O844OJ44KSXG4gKiDmlrDjgZfjgYRAVGFpbnRlZC9AVW50YWludGVk44Ki44OO44OG44O844K344On44Oz44K344K544OG44Og44GrXG4gKiDmrrXpmo7nmoTjgavnp7vooYzjgZnjgovjgZ/jgoHjga7jg5bjg6rjg4PjgrjjgajjgZfjgabmqZ/og73jgZfjgb7jgZnjgIJcbiAqL1xuXG5pbXBvcnQgeyBUYWludExldmVsLCBUYWludFNvdXJjZSwgVGFpbnRNZXRhZGF0YSB9IGZyb20gJy4uL3R5cGVzL3RhaW50JztcbmltcG9ydCB7IFxuICBUYWludFF1YWxpZmllciwgXG4gIFR5cGVDb25zdHJ1Y3RvcnMsIFxuICBRdWFsaWZpZWRUeXBlLFxuICBUYWludGVkVHlwZSxcbiAgVW50YWludGVkVHlwZVxufSBmcm9tICcuLi90eXBlcy9jaGVja2VyLWZyYW1ld29yay10eXBlcyc7XG5cbi8qKlxuICogVGFpbnRMZXZlbOS6kuaPm+OCouODgOODl+OCv+ODvFxuICogRG9yb3RoeSBEZW5uaW5n44Gu5qC85a2Q55CG6KuW44GL44KJ5paw44GX44GE5Z6L44K344K544OG44Og44G444Gu5aSJ5o+b44KS5o+Q5L6bXG4gKi9cbmV4cG9ydCBjbGFzcyBUYWludExldmVsQWRhcHRlciB7XG4gIC8qKlxuICAgKiBUYWludExldmVs44GL44KJ5Z6L44Kv44Kq44Oq44OV44Kh44Kk44Ki44G444Gu5aSJ5o+bXG4gICAqIOagvOWtkOeQhuirluOBruWkmuautemajuODrOODmeODq+OCkuS6jOWApOOCt+OCueODhuODoOOBq+ODnuODg+ODlOODs+OCsFxuICAgKi9cbiAgc3RhdGljIHRvVGFpbnRRdWFsaWZpZXIobGV2ZWw6IFRhaW50TGV2ZWwpOiBUYWludFF1YWxpZmllciB7XG4gICAgLy8gQ0xFQU4vVU5UQUlOVEVE44GvQFVudGFpbnRlZOOBq+ODnuODg+ODl1xuICAgIGlmIChsZXZlbCA9PT0gJ3VudGFpbnRlZCcgfHwgbGV2ZWwgPT09ICdzYW5pdGl6ZWQnKSB7XG4gICAgICByZXR1cm4gJ0BVbnRhaW50ZWQnO1xuICAgIH1cbiAgICAvLyDjgZ3jga7ku5bjgZnjgbnjgabjga9AVGFpbnRlZOOBq+ODnuODg+ODl1xuICAgIHJldHVybiAnQFRhaW50ZWQnO1xuICB9XG5cbiAgLyoqXG4gICAqIFRhaW50TGV2ZWzjgYvjgonlhbfkvZPnmoTjgarlnovjgbjjga7lpInmj5tcbiAgICog5L+h6aC85bqm5oOF5aCx44KS5L+d5oyB44GX44Gq44GM44KJ5paw5Z6L44K344K544OG44Og44Gr5aSJ5o+bXG4gICAqL1xuICBzdGF0aWMgdG9RdWFsaWZpZWRUeXBlPFQ+KFxuICAgIHZhbHVlOiBULCBcbiAgICBsZXZlbDogVGFpbnRMZXZlbCxcbiAgICBzb3VyY2U/OiBUYWludFNvdXJjZSxcbiAgICBtZXRhZGF0YT86IFRhaW50TWV0YWRhdGFcbiAgKTogUXVhbGlmaWVkVHlwZTxUPiB7XG4gICAgLy8g5L+h6aC85bqm44Gu6KiI566X77yIMC4wLTEuMOOBruevhOWbsu+8iVxuICAgIGNvbnN0IGNvbmZpZGVuY2UgPSB0aGlzLmNhbGN1bGF0ZUNvbmZpZGVuY2UobGV2ZWwpO1xuICAgIFxuICAgIGlmIChsZXZlbCA9PT0gJ3VudGFpbnRlZCcgfHwgbGV2ZWwgPT09ICdzYW5pdGl6ZWQnKSB7XG4gICAgICByZXR1cm4gVHlwZUNvbnN0cnVjdG9ycy51bnRhaW50ZWQodmFsdWUsICdsZWdhY3ktY2xlYW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc291cmNlU3RyID0gc291cmNlIHx8IChtZXRhZGF0YT8uc291cmNlcyAmJiBtZXRhZGF0YS5zb3VyY2VzWzBdKSB8fCAnbGVnYWN5LXRhaW50JztcbiAgICAgIHJldHVybiBUeXBlQ29uc3RydWN0b3JzLnRhaW50ZWQodmFsdWUsIHNvdXJjZVN0ciwgY29uZmlkZW5jZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaWsOWei+OCt+OCueODhuODoOOBi+OCiVRhaW50TGV2ZWzjgbjjga7pgIblpInmj5tcbiAgICog5YaF6YOo5a6f6KOF44Gn44Gu5qC85a2Q55CG6KuW5L2/55So44Gu44Gf44KBXG4gICAqL1xuICBzdGF0aWMgZnJvbVF1YWxpZmllZFR5cGU8VD4ocXVhbGlmaWVkOiBRdWFsaWZpZWRUeXBlPFQ+KTogVGFpbnRMZXZlbCB7XG4gICAgaWYgKHF1YWxpZmllZC5fX2JyYW5kID09PSAnQFVudGFpbnRlZCcpIHtcbiAgICAgIHJldHVybiAndW50YWludGVkJztcbiAgICB9IGVsc2UgaWYgKHF1YWxpZmllZC5fX2JyYW5kID09PSAnQFRhaW50ZWQnKSB7XG4gICAgICBjb25zdCB0YWludGVkID0gcXVhbGlmaWVkIGFzIFRhaW50ZWRUeXBlPFQ+O1xuICAgICAgcmV0dXJuIHRoaXMuY29uZmlkZW5jZVRvVGFpbnRMZXZlbCh0YWludGVkLl9fY29uZmlkZW5jZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEBQb2x5VGFpbnTjga/mlofohIjkvp3lrZjjgarjga7jgafjgIHkv53lrojnmoTjgatQT1NTSUJMWV9UQUlOVEVE44Go44GZ44KLXG4gICAgICByZXR1cm4gJ3Bvc3NpYmx5X3RhaW50ZWQnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUYWludExldmVs44GL44KJ5L+h6aC85bqm44G444Gu5aSJ5o+bXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBjYWxjdWxhdGVDb25maWRlbmNlKGxldmVsOiBUYWludExldmVsKTogbnVtYmVyIHtcbiAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICBjYXNlICd1bnRhaW50ZWQnOlxuICAgICAgY2FzZSAnc2FuaXRpemVkJzpcbiAgICAgICAgcmV0dXJuIDAuMDtcbiAgICAgIGNhc2UgJ3Bvc3NpYmx5X3RhaW50ZWQnOlxuICAgICAgICByZXR1cm4gMC4yNTtcbiAgICAgIGNhc2UgJ3Vua25vd24nOlxuICAgICAgICByZXR1cm4gMC41O1xuICAgICAgY2FzZSAndGFpbnRlZCc6XG4gICAgICAgIHJldHVybiAwLjc1O1xuICAgICAgY2FzZSAnaGlnaGx5X3RhaW50ZWQnOlxuICAgICAgICByZXR1cm4gMS4wO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDAuNTsgLy8g44OH44OV44Kp44Or44OI44Gv5Lit6ZaT5YCkXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOS/oemgvOW6puOBi+OCiVRhaW50TGV2ZWzjgbjjga7pgIblpInmj5tcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGNvbmZpZGVuY2VUb1RhaW50TGV2ZWwoY29uZmlkZW5jZTogbnVtYmVyKTogVGFpbnRMZXZlbCB7XG4gICAgaWYgKGNvbmZpZGVuY2UgPD0gMC4wKSB7XG4gICAgICByZXR1cm4gJ3VudGFpbnRlZCc7XG4gICAgfSBlbHNlIGlmIChjb25maWRlbmNlIDw9IDAuMjUpIHtcbiAgICAgIHJldHVybiAncG9zc2libHlfdGFpbnRlZCc7XG4gICAgfSBlbHNlIGlmIChjb25maWRlbmNlIDw9IDAuNSkge1xuICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgICB9IGVsc2UgaWYgKGNvbmZpZGVuY2UgPD0gMC43NSkge1xuICAgICAgcmV0dXJuICd0YWludGVkJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdoaWdobHlfdGFpbnRlZCc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOagvOWtkOa8lOeul+OBruS6kuaPm+Wun+ijhVxuICAgKiDmlrDlnovjgrfjgrnjg4bjg6DjgafmoLzlrZDnkIboq5bjga7mvJTnrpfjgpLlho3nj75cbiAgICovXG4gIHN0YXRpYyBqb2luPFQ+KFxuICAgIGE6IFF1YWxpZmllZFR5cGU8VD4sIFxuICAgIGI6IFF1YWxpZmllZFR5cGU8VD5cbiAgKTogUXVhbGlmaWVkVHlwZTxUPiB7XG4gICAgLy8g5Lih5pa544GMQFVudGFpbnRlZOOBruWgtOWQiOOBruOBv0BVbnRhaW50ZWRcbiAgICBpZiAoYS5fX2JyYW5kID09PSAnQFVudGFpbnRlZCcgJiYgYi5fX2JyYW5kID09PSAnQFVudGFpbnRlZCcpIHtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICBcbiAgICAvLyDjgYTjgZrjgozjgYvjgYxAVGFpbnRlZOOBquOCiee1kOaenOOCgkBUYWludGVkXG4gICAgaWYgKGEuX19icmFuZCA9PT0gJ0BUYWludGVkJykge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfSBlbHNlIGlmIChiLl9fYnJhbmQgPT09ICdAVGFpbnRlZCcpIHtcbiAgICAgIHJldHVybiBiO1xuICAgIH1cbiAgICBcbiAgICAvLyBQb2x5VGFpbnTjgYzlkKvjgb7jgozjgovloLTlkIjjga/kv53lrojnmoTjgatAVGFpbnRlZFxuICAgIHJldHVybiBUeXBlQ29uc3RydWN0b3JzLnRhaW50ZWQoXG4gICAgICBhLl9fdmFsdWUsIFxuICAgICAgJ2pvaW4tb3BlcmF0aW9uJyxcbiAgICAgIDAuNVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog5qC85a2Q5ryU566X44GubWVldOaTjeS9nFxuICAgKi9cbiAgc3RhdGljIG1lZXQ8VD4oXG4gICAgYTogUXVhbGlmaWVkVHlwZTxUPiwgXG4gICAgYjogUXVhbGlmaWVkVHlwZTxUPlxuICApOiBRdWFsaWZpZWRUeXBlPFQ+IHtcbiAgICAvLyDjgYTjgZrjgozjgYvjgYxAVW50YWludGVk44Gq44KJ57WQ5p6c44KCQFVudGFpbnRlZFxuICAgIGlmIChhLl9fYnJhbmQgPT09ICdAVW50YWludGVkJykge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfSBlbHNlIGlmIChiLl9fYnJhbmQgPT09ICdAVW50YWludGVkJykge1xuICAgICAgcmV0dXJuIGI7XG4gICAgfVxuICAgIFxuICAgIC8vIOS4oeaWueOBjEBUYWludGVk44Gu5aC05ZCI44CB44KI44KK5L2O44GE5L+h6aC85bqm44KS6YG45oqeXG4gICAgaWYgKGEuX19icmFuZCA9PT0gJ0BUYWludGVkJyAmJiBiLl9fYnJhbmQgPT09ICdAVGFpbnRlZCcpIHtcbiAgICAgIGNvbnN0IGFDb25mID0gKGEgYXMgVGFpbnRlZFR5cGU8VD4pLl9fY29uZmlkZW5jZTtcbiAgICAgIGNvbnN0IGJDb25mID0gKGIgYXMgVGFpbnRlZFR5cGU8VD4pLl9fY29uZmlkZW5jZTtcbiAgICAgIGlmIChhQ29uZiA8PSBiQ29uZikge1xuICAgICAgICByZXR1cm4gYTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBiO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6zjgqzjgrfjg7zjgrPjg7zjg4njga7jgZ/jgoHjga7kvr/liKnjg6Hjgr3jg4Pjg4lcbiAgICogVGFpbnRMZXZlbOODmeODvOOCueOBruavlOi8g+OCkuaWsOWei+OCt+OCueODhuODoOOBp+Wun+ihjFxuICAgKi9cbiAgc3RhdGljIGlzTW9yZVRhaW50ZWRUaGFuPFQ+KFxuICAgIGE6IFF1YWxpZmllZFR5cGU8VD4sXG4gICAgYjogUXVhbGlmaWVkVHlwZTxUPlxuICApOiBib29sZWFuIHtcbiAgICBjb25zdCBhTGV2ZWwgPSB0aGlzLmZyb21RdWFsaWZpZWRUeXBlKGEpO1xuICAgIGNvbnN0IGJMZXZlbCA9IHRoaXMuZnJvbVF1YWxpZmllZFR5cGUoYik7XG4gICAgcmV0dXJuIGFMZXZlbCA+IGJMZXZlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Djg4Pjg4HlpInmj5vnlKjjga7jg5jjg6vjg5Hjg7xcbiAgICog6KSH5pWw44Gu5YCk44KS5LiA5ous44Gn5aSJ5o+bXG4gICAqL1xuICBzdGF0aWMgYmF0Y2hDb252ZXJ0PFQ+KFxuICAgIHZhbHVlczogQXJyYXk8eyB2YWx1ZTogVDsgbGV2ZWw6IFRhaW50TGV2ZWw7IHNvdXJjZT86IFRhaW50U291cmNlIH0+XG4gICk6IFF1YWxpZmllZFR5cGU8VD5bXSB7XG4gICAgcmV0dXJuIHZhbHVlcy5tYXAoKHsgdmFsdWUsIGxldmVsLCBzb3VyY2UgfSkgPT4gXG4gICAgICB0aGlzLnRvUXVhbGlmaWVkVHlwZSh2YWx1ZSwgbGV2ZWwsIHNvdXJjZSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOODh+ODkOODg+OCsOeUqOOBruaWh+Wtl+WIl+ihqOePvlxuICAgKi9cbiAgc3RhdGljIHRvU3RyaW5nPFQ+KHF1YWxpZmllZDogUXVhbGlmaWVkVHlwZTxUPik6IHN0cmluZyB7XG4gICAgaWYgKHF1YWxpZmllZC5fX2JyYW5kID09PSAnQFVudGFpbnRlZCcpIHtcbiAgICAgIHJldHVybiAnVW50YWludGVkIChzYWZlKSc7XG4gICAgfSBlbHNlIGlmIChxdWFsaWZpZWQuX19icmFuZCA9PT0gJ0BUYWludGVkJykge1xuICAgICAgY29uc3QgdGFpbnRlZCA9IHF1YWxpZmllZCBhcyBUYWludGVkVHlwZTxUPjtcbiAgICAgIHJldHVybiBgVGFpbnRlZCAoc291cmNlOiAke3RhaW50ZWQuX19zb3VyY2V9LCBjb25maWRlbmNlOiAke3RhaW50ZWQuX19jb25maWRlbmNlfSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ1BvbHlUYWludCAoY29udGV4dC1kZXBlbmRlbnQpJztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiDnp7vooYzmnJ/plpPkuK3jga7kvr/liKnjgarlnovjgqjjgqTjg6rjgqLjgrlcbiAqL1xuZXhwb3J0IHR5cGUgTGVnYWN5Q29tcGF0aWJsZVR5cGU8VD4gPSBRdWFsaWZpZWRUeXBlPFQ+ICYge1xuICBfX2xlZ2FjeUxldmVsPzogVGFpbnRMZXZlbDtcbn07XG5cbi8qKlxuICog56e76KGM5pSv5o+044Om44O844OG44Kj44Oq44OG44KjXG4gKi9cbmV4cG9ydCBjbGFzcyBNaWdyYXRpb25IZWxwZXIge1xuICAvKipcbiAgICog44Os44Ks44K344O8QVBJ44Gu5LqS5o+b5a6f6KOFXG4gICAqIOaXouWtmOOCs+ODvOODieOBruacgOWwj+mZkOOBruWkieabtOOBp+aWsOOCt+OCueODhuODoOOCkuS9v+eUqOWPr+iDveOBq1xuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUxlZ2FjeUNvbXBhdGlibGVBUEkoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIFRhaW50TGV2ZWzlrprmlbDjga7kupLmj5vlrp/oo4VcbiAgICAgIFRhaW50TGV2ZWw6IHtcbiAgICAgICAgVU5UQUlOVEVEOiAnQFVudGFpbnRlZCcgYXMgY29uc3QsXG4gICAgICAgIFBPU1NJQkxZX1RBSU5URUQ6ICdAVGFpbnRlZCcgYXMgY29uc3QsXG4gICAgICAgIExJS0VMWV9UQUlOVEVEOiAnQFRhaW50ZWQnIGFzIGNvbnN0LFxuICAgICAgICBERUZJTklURUxZX1RBSU5URUQ6ICdAVGFpbnRlZCcgYXMgY29uc3QsXG4gICAgICAgIEhJR0hMWV9UQUlOVEVEOiAnQFRhaW50ZWQnIGFzIGNvbnN0XG4gICAgICB9LFxuICAgICAgXG4gICAgICAvLyDmoLzlrZDmvJTnrpfjga7kupLmj5vlrp/oo4VcbiAgICAgIFRhaW50TGF0dGljZToge1xuICAgICAgICBqb2luOiBUYWludExldmVsQWRhcHRlci5qb2luLFxuICAgICAgICBtZWV0OiBUYWludExldmVsQWRhcHRlci5tZWV0LFxuICAgICAgICBsZXNzVGhhbk9yRXF1YWw6IDxUPihhOiBRdWFsaWZpZWRUeXBlPFQ+LCBiOiBRdWFsaWZpZWRUeXBlPFQ+KSA9PiBcbiAgICAgICAgICAhVGFpbnRMZXZlbEFkYXB0ZXIuaXNNb3JlVGFpbnRlZFRoYW4oYSwgYilcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOautemajueahOenu+ihjOOBruOBn+OCgeOBruODh+OCs+ODrOODvOOCv1xuICAgKiDml6LlrZjjg6Hjgr3jg4Pjg4njgpLmlrDlnovjgrfjgrnjg4bjg6Djgafoh6rli5XnmoTjgavjg6njg4Pjg5dcbiAgICovXG4gIHN0YXRpYyB3cmFwTGVnYWN5TWV0aG9kPFQgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IFRhaW50TGV2ZWw+KFxuICAgIG1ldGhvZDogVFxuICApOiAoLi4uYXJnczogUGFyYW1ldGVyczxUPikgPT4gVGFpbnRRdWFsaWZpZXIge1xuICAgIHJldHVybiAoLi4uYXJnczogUGFyYW1ldGVyczxUPikgPT4ge1xuICAgICAgY29uc3QgbGVnYWN5UmVzdWx0ID0gbWV0aG9kKC4uLmFyZ3MpO1xuICAgICAgcmV0dXJuIFRhaW50TGV2ZWxBZGFwdGVyLnRvVGFpbnRRdWFsaWZpZXIobGVnYWN5UmVzdWx0KTtcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICog56e76KGM54q25rOB44Gu6L+96LehXG4gKi9cbmV4cG9ydCBjbGFzcyBNaWdyYXRpb25UcmFja2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgbWlncmF0aW9uU3RhdHMgPSBuZXcgTWFwPHN0cmluZywge1xuICAgIHRvdGFsOiBudW1iZXI7XG4gICAgbWlncmF0ZWQ6IG51bWJlcjtcbiAgICBsYXN0VXBkYXRlZDogRGF0ZTtcbiAgfT4oKTtcblxuICBzdGF0aWMgcmVjb3JkTWlncmF0aW9uKGZpbGVOYW1lOiBzdHJpbmcsIHRvdGFsOiBudW1iZXIsIG1pZ3JhdGVkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1pZ3JhdGlvblN0YXRzLnNldChmaWxlTmFtZSwge1xuICAgICAgdG90YWwsXG4gICAgICBtaWdyYXRlZCxcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpXG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0TWlncmF0aW9uUHJvZ3Jlc3MoKToge1xuICAgIG92ZXJhbGxQcm9ncmVzczogbnVtYmVyO1xuICAgIGZpbGVTdGF0czogQXJyYXk8eyBmaWxlOiBzdHJpbmc7IHByb2dyZXNzOiBudW1iZXIgfT47XG4gIH0ge1xuICAgIGxldCB0b3RhbEl0ZW1zID0gMDtcbiAgICBsZXQgbWlncmF0ZWRJdGVtcyA9IDA7XG4gICAgY29uc3QgZmlsZVN0YXRzOiBBcnJheTx7IGZpbGU6IHN0cmluZzsgcHJvZ3Jlc3M6IG51bWJlciB9PiA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBbZmlsZSwgc3RhdHNdIG9mIHRoaXMubWlncmF0aW9uU3RhdHMpIHtcbiAgICAgIHRvdGFsSXRlbXMgKz0gc3RhdHMudG90YWw7XG4gICAgICBtaWdyYXRlZEl0ZW1zICs9IHN0YXRzLm1pZ3JhdGVkO1xuICAgICAgZmlsZVN0YXRzLnB1c2goe1xuICAgICAgICBmaWxlLFxuICAgICAgICBwcm9ncmVzczogc3RhdHMudG90YWwgPiAwID8gKHN0YXRzLm1pZ3JhdGVkIC8gc3RhdHMudG90YWwpICogMTAwIDogMFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG92ZXJhbGxQcm9ncmVzczogdG90YWxJdGVtcyA+IDAgPyAobWlncmF0ZWRJdGVtcyAvIHRvdGFsSXRlbXMpICogMTAwIDogMCxcbiAgICAgIGZpbGVTdGF0c1xuICAgIH07XG4gIH1cbn0iXSwidmVyc2lvbiI6M30=