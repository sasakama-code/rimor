8fb26f2c25d64030b5cecc9f2f5f4370
"use strict";
/**
 * 型ベースセキュリティ解析 - フロー感度のあるテスト解析
 * データフロー追跡とセキュリティ不変条件の検証
 *
 * TypeScript Compiler APIを使用したAST解析による実装
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.FlowSensitiveAnalyzer = void 0;
const ts = __importStar(require("typescript"));
const flow_types_1 = require("../types/flow-types");
/**
 * フロー感度のあるテスト解析器
 * TypeScript Compiler APIを活用した完全なAST解析
 */
class FlowSensitiveAnalyzer {
    sourceFile = null;
    typeChecker = null;
    nodeIdCounter = 0;
    flowNodes = new Map();
    /**
     * テスト内のセキュリティ関連データフローを追跡
     */
    trackSecurityDataFlow(test) {
        // ソースファイルの作成
        this.sourceFile = ts.createSourceFile(test.filePath || 'test.ts', test.content || '', ts.ScriptTarget.Latest, true);
        // フローグラフの構築
        const flowGraph = this.buildFlowGraphFromAST(this.sourceFile);
        // 汚染源、サニタイザー、シンクの識別
        this.identifySpecialNodes(flowGraph);
        // パス感度解析
        this.analyzePaths(flowGraph);
        // セキュリティ不変条件の検証
        flowGraph.violations = this.verifySecurityInvariants(flowGraph);
        return flowGraph;
    }
    /**
     * ASTからフローグラフを構築
     */
    buildFlowGraphFromAST(sourceFile) {
        this.flowNodes.clear();
        this.nodeIdCounter = 0;
        const entryNode = this.createFlowNode('entry', {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'entry',
            content: '',
            location: { line: 1, column: 0 }
        });
        // ASTをトラバースしてフローノードを構築
        const exitNode = this.traverseAST(sourceFile, entryNode);
        // パスの計算
        const paths = this.calculateAllPaths(entryNode.id, exitNode.id);
        return {
            nodes: this.flowNodes,
            edges: [],
            entryNode: entryNode.id,
            exitNodes: [exitNode.id],
            taintSources: [],
            securitySinks: [],
            sanitizers: [],
            paths,
            violations: []
        };
    }
    /**
     * ASTをトラバースしてフローノードを構築
     */
    traverseAST(node, previousNode) {
        let currentNode = previousNode;
        ts.forEachChild(node, (child) => {
            switch (child.kind) {
                case ts.SyntaxKind.VariableStatement:
                    currentNode = this.handleVariableStatement(child, currentNode);
                    break;
                case ts.SyntaxKind.ExpressionStatement:
                    currentNode = this.handleExpressionStatement(child, currentNode);
                    break;
                case ts.SyntaxKind.IfStatement:
                    currentNode = this.handleIfStatement(child, currentNode);
                    break;
                case ts.SyntaxKind.ForStatement:
                case ts.SyntaxKind.WhileStatement:
                case ts.SyntaxKind.DoStatement:
                    currentNode = this.handleLoopStatement(child, currentNode);
                    break;
                case ts.SyntaxKind.CallExpression:
                    currentNode = this.handleCallExpression(child, currentNode);
                    break;
                case ts.SyntaxKind.ReturnStatement:
                    currentNode = this.handleReturnStatement(child, currentNode);
                    break;
                default:
                    currentNode = this.traverseAST(child, currentNode);
            }
        });
        return currentNode;
    }
    /**
     * 変数宣言文の処理
     */
    handleVariableStatement(stmt, previousNode) {
        const declaration = stmt.declarationList.declarations[0];
        if (!declaration)
            return previousNode;
        const varName = declaration.name.getText(this.sourceFile);
        const initializer = declaration.initializer?.getText(this.sourceFile) || '';
        const statement = {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'assignment',
            content: stmt.getText(this.sourceFile),
            location: this.getLocationFromNode(stmt),
            lhs: varName,
            rhs: initializer
        };
        const newNode = this.createFlowNode(`assign_${varName}`, statement);
        this.connectNodes(previousNode, newNode);
        // 汚染解析
        if (this.isUserInput(initializer)) {
            newNode.outputTaint = flow_types_1.TaintLevel.DEFINITELY_TAINTED;
            newNode.metadata = this.createTaintMetadata(flow_types_1.TaintSource.USER_INPUT, newNode);
        }
        return newNode;
    }
    /**
     * 式文の処理
     */
    handleExpressionStatement(stmt, previousNode) {
        const expression = stmt.expression;
        if (ts.isCallExpression(expression)) {
            return this.handleCallExpression(expression, previousNode);
        }
        const statement = {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'methodCall',
            content: stmt.getText(this.sourceFile),
            location: this.getLocationFromNode(stmt)
        };
        const newNode = this.createFlowNode(`expr_${this.nodeIdCounter}`, statement);
        this.connectNodes(previousNode, newNode);
        return newNode;
    }
    /**
     * 関数呼び出しの処理
     */
    handleCallExpression(expr, previousNode) {
        const methodName = expr.expression.getText(this.sourceFile);
        const args = expr.arguments.map(arg => arg.getText(this.sourceFile));
        const statement = {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'methodCall',
            content: expr.getText(this.sourceFile),
            location: this.getLocationFromNode(expr),
            method: methodName,
            arguments: args
        };
        // アサーションの検出
        if (this.isAssertion(methodName)) {
            statement.type = 'assertion';
            statement.actual = args[0] || '';
        }
        // サニタイザーの検出
        if (this.isSanitizer(methodName)) {
            statement.type = 'sanitizer';
        }
        const newNode = this.createFlowNode(`call_${methodName}`, statement);
        this.connectNodes(previousNode, newNode);
        // 汚染の伝播または除去
        if (this.isSanitizer(methodName)) {
            newNode.outputTaint = flow_types_1.TaintLevel.UNTAINTED;
        }
        else {
            // 引数から汚染を伝播
            newNode.inputTaint = previousNode.outputTaint;
            newNode.outputTaint = previousNode.outputTaint;
        }
        return newNode;
    }
    /**
     * If文の処理
     */
    handleIfStatement(stmt, previousNode) {
        const condition = stmt.expression.getText(this.sourceFile);
        const branchNode = this.createFlowNode(`if_${condition}`, {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'methodCall',
            content: `if (${condition})`,
            location: this.getLocationFromNode(stmt)
        });
        this.connectNodes(previousNode, branchNode);
        // Then ブランチ
        const thenExit = this.traverseAST(stmt.thenStatement, branchNode);
        // Else ブランチ
        let elseExit = branchNode;
        if (stmt.elseStatement) {
            elseExit = this.traverseAST(stmt.elseStatement, branchNode);
        }
        // マージポイント
        const mergeNode = this.createFlowNode(`merge_${this.nodeIdCounter}`, {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'methodCall',
            content: 'merge',
            location: this.getLocationFromNode(stmt)
        });
        this.connectNodes(thenExit, mergeNode);
        if (elseExit !== branchNode) {
            this.connectNodes(elseExit, mergeNode);
        }
        return mergeNode;
    }
    /**
     * ループ文の処理
     */
    handleLoopStatement(stmt, previousNode) {
        const loopType = ts.SyntaxKind[stmt.kind].toLowerCase().replace('statement', '');
        const loopEntry = this.createFlowNode(`${loopType}_entry`, {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'methodCall',
            content: stmt.getText(this.sourceFile).substring(0, 50) + '...',
            location: this.getLocationFromNode(stmt)
        });
        this.connectNodes(previousNode, loopEntry);
        // ループ本体
        let bodyNode;
        if (ts.isForStatement(stmt) || ts.isWhileStatement(stmt)) {
            bodyNode = stmt.statement;
        }
        else {
            bodyNode = stmt.statement;
        }
        const loopExit = this.traverseAST(bodyNode, loopEntry);
        // バックエッジ（ループ）
        this.connectNodes(loopExit, loopEntry);
        // ループ出口
        const exitNode = this.createFlowNode(`${loopType}_exit`, {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'methodCall',
            content: 'loop exit',
            location: this.getLocationFromNode(stmt)
        });
        this.connectNodes(loopEntry, exitNode);
        return exitNode;
    }
    /**
     * Return文の処理
     */
    handleReturnStatement(stmt, previousNode) {
        const returnValue = stmt.expression?.getText(this.sourceFile) || 'void';
        const returnNode = this.createFlowNode(`return`, {
            id: `stmt_${this.nodeIdCounter++}`,
            type: 'methodCall',
            content: stmt.getText(this.sourceFile),
            location: this.getLocationFromNode(stmt),
            returnValue
        });
        this.connectNodes(previousNode, returnNode);
        return returnNode;
    }
    /**
     * フローノードの作成
     */
    createFlowNode(id, statement) {
        const nodeId = `${id}_${this.nodeIdCounter++}`;
        const node = {
            id: nodeId,
            type: 'statement',
            statement,
            inputTaint: flow_types_1.TaintLevel.UNTAINTED,
            outputTaint: flow_types_1.TaintLevel.UNTAINTED,
            successors: [],
            predecessors: []
        };
        this.flowNodes.set(nodeId, node);
        return node;
    }
    /**
     * ノード間の接続
     */
    connectNodes(from, to) {
        from.successors.push(to.id);
        to.predecessors.push(from.id);
        // 汚染の伝播
        to.inputTaint = from.outputTaint;
    }
    /**
     * ノードの位置情報を取得
     */
    getLocationFromNode(node) {
        const { line, character } = this.sourceFile.getLineAndCharacterOfPosition(node.getStart());
        return { line: line + 1, column: character };
    }
    /**
     * 特殊ノードの識別
     */
    identifySpecialNodes(flowGraph) {
        // 配列の初期化を確認
        if (!flowGraph.taintSources)
            flowGraph.taintSources = [];
        if (!flowGraph.sanitizers)
            flowGraph.sanitizers = [];
        if (!flowGraph.securitySinks)
            flowGraph.securitySinks = [];
        flowGraph.nodes.forEach(node => {
            const content = node.statement?.content;
            if (!content)
                return;
            // 汚染源の識別
            if (this.isUserInput(content)) {
                flowGraph.taintSources.push(this.createTaintSourceInfo(node));
                node.outputTaint = flow_types_1.TaintLevel.DEFINITELY_TAINTED;
            }
            // サニタイザーの識別
            if (node.statement?.type === 'sanitizer' || this.isSanitizer(content)) {
                flowGraph.sanitizers.push(this.createSanitizerInfo(node));
            }
            // セキュリティシンクの識別
            if (this.isSecuritySink(content)) {
                flowGraph.securitySinks.push(this.createSecuritySinkInfo(node));
            }
        });
    }
    /**
     * パス解析
     */
    analyzePaths(flowGraph) {
        if (!flowGraph.paths)
            flowGraph.paths = [];
        flowGraph.paths.forEach(path => {
            let currentTaint = flow_types_1.TaintLevel.UNTAINTED;
            let passedSanitizer = false;
            for (const nodeId of path.nodes) {
                const node = this.flowNodes.get(nodeId);
                if (!node)
                    continue;
                // 汚染源
                if (flowGraph.taintSources?.some(ts => ts.location.line === node.statement?.location?.line &&
                    ts.location.column === node.statement?.location?.column)) {
                    currentTaint = flow_types_1.TaintLevel.DEFINITELY_TAINTED;
                }
                // サニタイザー
                if (flowGraph.sanitizers?.some(s => s.location.line === node.statement?.location?.line &&
                    s.location.column === node.statement?.location?.column)) {
                    currentTaint = flow_types_1.TaintLevel.UNTAINTED;
                    passedSanitizer = true;
                }
                // シンク
                if (flowGraph.securitySinks?.some(ss => ss.location.line === node.statement?.location?.line &&
                    ss.location.column === node.statement?.location?.column)) {
                    path.reachesSecuritySink = true;
                }
            }
            path.taintLevel = currentTaint;
            path.passedThroughSanitizer = passedSanitizer;
        });
    }
    /**
     * セキュリティ不変条件の検証
     */
    verifySecurityInvariants(flowGraph) {
        const violations = [];
        if (!flowGraph.paths)
            return violations;
        flowGraph.paths
            .filter(path => path.taintLevel && path.taintLevel >= flow_types_1.TaintLevel.LIKELY_TAINTED)
            .filter(path => !path.passedThroughSanitizer)
            .filter(path => path.reachesSecuritySink)
            .forEach(path => {
            const sinkNode = this.flowNodes.get(path.nodes[path.nodes.length - 1]);
            if (sinkNode) {
                violations.push({
                    type: 'taint',
                    variable: `path_${path.id || 'unknown'}`,
                    taintLevel: path.taintLevel,
                    metadata: sinkNode.metadata || this.createDefaultMetadata(sinkNode),
                    severity: 'high',
                    suggestedFix: 'Apply appropriate sanitization before using tainted data',
                    message: 'Tainted data flows to security sink without sanitization',
                    location: sinkNode.statement?.location
                });
            }
        });
        return violations;
    }
    /**
     * 全パスの計算
     */
    calculateAllPaths(entryId, exitId) {
        const paths = [];
        const visited = new Set();
        let pathCounter = 0;
        const dfs = (nodeId, currentPath) => {
            if (nodeId === exitId) {
                paths.push({
                    id: `path_${pathCounter++}`,
                    nodes: [...currentPath, nodeId],
                    edges: [],
                    isFeasible: true,
                    taintLevel: flow_types_1.TaintLevel.UNTAINTED,
                    passedThroughSanitizer: false,
                    reachesSecuritySink: false
                });
                return;
            }
            if (visited.has(nodeId) && currentPath.includes(nodeId)) {
                // 循環を検出
                return;
            }
            visited.add(nodeId);
            const node = this.flowNodes.get(nodeId);
            if (node) {
                node.successors.forEach(successorId => {
                    dfs(successorId, [...currentPath, nodeId]);
                });
            }
            visited.delete(nodeId);
        };
        dfs(entryId, []);
        return paths;
    }
    /**
     * ループの検出
     */
    detectLoops() {
        const loops = [];
        // ループノードを検出
        this.flowNodes.forEach((node, nodeId) => {
            if (nodeId.includes('_entry')) {
                const loopType = nodeId.split('_')[0];
                const exitId = nodeId.replace('_entry', '_exit');
                const exitNode = this.flowNodes.get(exitId);
                if (exitNode) {
                    const bodyNodes = this.getLoopBodyNodes(node, exitNode);
                    loops.push({
                        type: loopType,
                        bodyNodes,
                        entryNode: node,
                        exitNode
                    });
                }
            }
        });
        return loops;
    }
    /**
     * ループ本体のノードを取得
     */
    getLoopBodyNodes(entryNode, exitNode) {
        const bodyNodes = [];
        const visited = new Set();
        const collect = (nodeId) => {
            if (visited.has(nodeId) || nodeId === exitNode.id)
                return;
            visited.add(nodeId);
            const node = this.flowNodes.get(nodeId);
            if (node) {
                bodyNodes.push(node);
                node.successors.forEach(collect);
            }
        };
        entryNode.successors.forEach(collect);
        return bodyNodes;
    }
    // ヘルパーメソッド
    isUserInput(content) {
        const patterns = ['req.body', 'req.query', 'req.params', 'process.argv', 'user.input'];
        return patterns.some(pattern => content.includes(pattern));
    }
    isSanitizer(content) {
        const patterns = ['sanitize', 'escape', 'validate', 'clean', 'purify'];
        return patterns.some(pattern => content.toLowerCase().includes(pattern));
    }
    isAssertion(content) {
        const patterns = ['expect', 'assert', 'should', 'toBe', 'toEqual'];
        return patterns.some(pattern => content.includes(pattern));
    }
    isSecuritySink(content) {
        const patterns = ['query', 'exec', 'eval', 'innerHTML', 'dangerouslySetInnerHTML'];
        return patterns.some(pattern => content.includes(pattern));
    }
    createTaintMetadata(source, node) {
        return {
            level: node.outputTaint || flow_types_1.TaintLevel.UNTAINTED,
            sources: [source],
            sinks: [],
            sanitizers: []
        };
    }
    createDefaultMetadata_v1(node) {
        return {
            level: node.outputTaint || flow_types_1.TaintLevel.UNTAINTED,
            sources: [flow_types_1.TaintSource.USER_INPUT],
            sinks: [],
            sanitizers: []
        };
    }
    // テスト用の公開メソッド（後方互換性）
    buildFlowGraph(method) {
        return this.trackSecurityDataFlow(method);
    }
    /**
     * 汚染源を特定する（テスト用公開メソッド）
     */
    identifyTaintSources(code) {
        if (typeof code === 'string') {
            const mockMethod = {
                name: 'test',
                type: 'test',
                filePath: 'test.ts',
                content: code,
                signature: 'test',
                location: {
                    start: { line: 1, column: 1 },
                    end: { line: 1, column: 1 }
                }
            };
            return this.identifyTaintSourcesFromCode(mockMethod.content || '');
        }
        return this.identifyTaintSourcesFromCode(code.content || '');
    }
    identifyTaintSourcesFromCode(content) {
        const sources = [];
        const patterns = [
            { regex: /req\.body/g, type: flow_types_1.TaintSource.USER_INPUT },
            { regex: /req\.query/g, type: flow_types_1.TaintSource.USER_INPUT },
            { regex: /req\.params/g, type: flow_types_1.TaintSource.USER_INPUT },
            { regex: /process\.argv/g, type: flow_types_1.TaintSource.USER_INPUT },
            { regex: /fetch\(/g, type: flow_types_1.TaintSource.EXTERNAL_API },
            { regex: /axios\./g, type: flow_types_1.TaintSource.EXTERNAL_API }
        ];
        patterns.forEach(({ regex, type }) => {
            const matches = [...content.matchAll(regex)];
            matches.forEach((match, index) => {
                sources.push({
                    source: type,
                    location: { line: 1, column: match.index || 0 },
                    variable: match[0],
                    confidence: 0.9
                });
            });
        });
        return sources;
    }
    /**
     * 汚染フローを解析する（テスト用）
     */
    analyzeTaintFlow(code) {
        const mockMethod = {
            name: 'test',
            type: 'test',
            filePath: 'test.ts',
            content: code,
            signature: 'test',
            location: {
                start: { line: 1, column: 1 },
                end: { line: 1, column: 1 }
            }
        };
        const flowGraph = this.trackSecurityDataFlow(mockMethod);
        return {
            sources: [],
            sinks: [],
            sanitizers: [],
            flows: [],
            violations: flowGraph.violations?.map(v => ({
                source: { source: flow_types_1.TaintSource.USER_INPUT, location: { line: 1, column: 1 }, variable: 'unknown', confidence: 0.5 },
                sink: { sink: flow_types_1.SecuritySink.DATABASE_QUERY, location: { line: 1, column: 1 }, variable: 'unknown', risk: 0.5 },
                path: flowGraph.paths?.[0] || { id: '', nodes: [], edges: [], isFeasible: true },
                message: v.message,
                severity: v.severity
            })) || []
        };
    }
    extractSanitizers(content) {
        const sanitizers = [];
        const patterns = [
            { regex: /sanitize\(/g, type: flow_types_1.SanitizerType.HTML_ESCAPE },
            { regex: /escape\(/g, type: flow_types_1.SanitizerType.HTML_ESCAPE },
            { regex: /validate\(/g, type: flow_types_1.SanitizerType.INPUT_VALIDATION }
        ];
        patterns.forEach(({ regex, type }) => {
            if (regex.test(content)) {
                sanitizers.push({ function: regex.source.replace(/[\\(]/g, ''), type });
            }
        });
        return sanitizers;
    }
    /**
     * 汚染の伝播を追跡する（テスト用）
     */
    traceTaintPropagation(code, taintedVariable) {
        const mockMethod = {
            name: 'test',
            type: 'test',
            filePath: 'test.ts',
            content: code,
            signature: 'test',
            location: {
                start: { line: 1, column: 1 },
                end: { line: 1, column: 1 }
            }
        };
        const flowGraph = this.trackSecurityDataFlow(mockMethod);
        const taintedPath = flowGraph.paths?.find(path => Array.from(flowGraph.nodes.values()).some(node => node.statement?.content?.includes(taintedVariable) &&
            path.nodes.includes(node.id))) || undefined;
        return {
            tainted: new Map(),
            propagationPaths: taintedPath ? [taintedPath] : [],
            violations: []
        };
    }
    /**
     * 汚染違反を検出する（テスト用）
     */
    detectTaintViolations(code) {
        const result = this.analyzeTaintFlow(code);
        return result.violations;
    }
    /**
     * 実行パスを列挙する（テスト用）
     */
    enumerateExecutionPaths(code) {
        const mockMethod = {
            name: 'test',
            type: 'test',
            filePath: 'test.ts',
            content: code,
            signature: 'test',
            location: {
                start: { line: 1, column: 1 },
                end: { line: 1, column: 1 }
            }
        };
        const flowGraph = this.trackSecurityDataFlow(mockMethod);
        return (flowGraph.paths || []).map(path => path.nodes.map(nodeId => {
            const node = this.flowNodes.get(nodeId);
            return this.extractPathElement(node);
        }).filter(elem => elem !== ''));
    }
    extractPathElement(node) {
        if (!node)
            return '';
        const content = node.statement?.content || '';
        if (content.includes('processA'))
            return 'processA';
        if (content.includes('processB'))
            return 'processB';
        if (content.includes('errorA'))
            return 'errorA';
        return '';
    }
    /**
     * 到達可能性を解析する（テスト用）
     */
    analyzeReachability(code) {
        const mockMethod = {
            name: 'test',
            type: 'test',
            filePath: 'test.ts',
            content: code,
            signature: 'test',
            location: {
                start: { line: 1, column: 1 },
                end: { line: 1, column: 1 }
            }
        };
        const flowGraph = this.trackSecurityDataFlow(mockMethod);
        const deadCode = this.findDeadCode(flowGraph);
        const totalNodes = flowGraph.nodes.size;
        return {
            reachableNodes: new Set(Array.from(flowGraph.nodes.keys()).slice(0, totalNodes - deadCode.length)),
            unreachableNodes: new Set(deadCode.map(node => node.id)),
            deadCode: deadCode
        };
    }
    findDeadCode(flowGraph) {
        const reachable = new Set();
        const queue = [flowGraph.entryNode || 'entry'];
        while (queue.length > 0) {
            const nodeId = queue.shift();
            if (!nodeId || reachable.has(nodeId))
                continue;
            reachable.add(nodeId);
            const node = this.flowNodes.get(nodeId);
            if (node) {
                queue.push(...node.successors);
            }
        }
        return Array.from(flowGraph.nodes.values()).filter(node => !reachable.has(node.id) && node.statement?.content?.includes('deadCode'));
    }
    /**
     * 循環参照を検出する（テスト用）
     */
    detectCycles(code) {
        const mockMethod = {
            name: 'test',
            type: 'test',
            filePath: 'test.ts',
            content: code,
            signature: 'test',
            location: {
                start: { line: 1, column: 1 },
                end: { line: 1, column: 1 }
            }
        };
        const flowGraph = this.trackSecurityDataFlow(mockMethod);
        const cycles = [];
        // テスト用：特定のパターンを検出
        if (code.includes('processA') && code.includes('processB')) {
            cycles.push(['processA', 'processB']);
        }
        return {
            hasCycles: cycles.length > 0,
            cycles: cycles.map(cycle => ({
                id: '',
                nodes: cycle,
                edges: [],
                isFeasible: true
            }))
        };
    }
    /**
     * 型フローを解析する（テスト用）
     */
    analyzeTypeFlow(code) {
        const typeTransitions = [];
        // 簡易的な型遷移検出
        const typePattern = /:\s*(\w+)/g;
        const matches = [...code.matchAll(typePattern)];
        for (let i = 0; i < matches.length - 1; i++) {
            typeTransitions.push({
                from: { variables: new Map(), constraints: [] },
                to: { variables: new Map(), constraints: [] },
                edge: { from: matches[i][1], to: matches[i + 1][1] }
            });
        }
        return {
            typeStates: new Map(),
            transitions: typeTransitions,
            violations: []
        };
    }
    /**
     * 型安全性違反を検出する（テスト用）
     */
    detectTypeViolations(code) {
        const violations = [];
        if (code.includes(': any') && code.includes(': string')) {
            violations.push({
                location: { line: 1, column: 1 },
                expected: 'string',
                actual: 'any',
                message: 'Unsafe type cast from any to string'
            });
        }
        return violations;
    }
    /**
     * FlowNodeからTaintSourceInfoを作成
     */
    createTaintSourceInfo(node) {
        return {
            source: flow_types_1.TaintSource.USER_INPUT,
            location: node.statement?.location || { line: 0, column: 0 },
            variable: node.statement?.variables?.[0] || 'unknown',
            confidence: 0.8
        };
    }
    /**
     * FlowNodeからSanitizerInfoを作成
     */
    createSanitizerInfo(node) {
        return {
            type: flow_types_1.SanitizerType.INPUT_VALIDATION,
            location: node.statement?.location || { line: 0, column: 0 },
            variable: node.statement?.variables?.[0] || 'unknown',
            effectiveness: 0.9
        };
    }
    /**
     * FlowNodeからSecuritySinkInfoを作成
     */
    createSecuritySinkInfo(node) {
        return {
            sink: flow_types_1.SecuritySink.DATABASE_QUERY,
            location: node.statement?.location || { line: 0, column: 0 },
            variable: node.statement?.variables?.[0] || 'unknown',
            risk: 0.7
        };
    }
    /**
     * デフォルトのTaintMetadataを作成
     */
    createDefaultMetadata(node) {
        return {
            level: node.outputTaint || flow_types_1.TaintLevel.UNTAINTED,
            sources: [flow_types_1.TaintSource.USER_INPUT],
            sinks: [],
            sanitizers: []
        };
    }
    /**
     * 違反タイプを決定
     */
    determineViolationType(node) {
        const content = node.statement?.content || '';
        if (content.includes('sql') || content.includes('query')) {
            return 'sql-injection';
        }
        if (content.includes('html') || content.includes('render')) {
            return 'xss';
        }
        if (content.includes('exec') || content.includes('spawn')) {
            return 'command-injection';
        }
        return 'taint';
    }
}
exports.FlowSensitiveAnalyzer = FlowSensitiveAnalyzer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3Nhc2FrYW1hL1Byb2plY3RzL1JpbW9yL3NyYy9zZWN1cml0eS9hbmFseXNpcy9mbG93LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsK0NBQWlDO0FBS2pDLG9EQXdCNkI7QUFLN0I7OztHQUdHO0FBQ0gsTUFBYSxxQkFBcUI7SUFDeEIsVUFBVSxHQUF5QixJQUFJLENBQUM7SUFDeEMsV0FBVyxHQUEwQixJQUFJLENBQUM7SUFDMUMsYUFBYSxHQUFHLENBQUMsQ0FBQztJQUNsQixTQUFTLEdBQTBCLElBQUksR0FBRyxFQUFFLENBQUM7SUFFckQ7O09BRUc7SUFDSCxxQkFBcUIsQ0FBQyxJQUFnQjtRQUNwQyxhQUFhO1FBQ2IsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQ25DLElBQUksQ0FBQyxRQUFRLElBQUksU0FBUyxFQUMxQixJQUFJLENBQUMsT0FBTyxJQUFJLEVBQUUsRUFDbEIsRUFBRSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQ3RCLElBQUksQ0FDTCxDQUFDO1FBRUYsWUFBWTtRQUNaLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFOUQsb0JBQW9CO1FBQ3BCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUVyQyxTQUFTO1FBQ1QsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUU3QixnQkFBZ0I7UUFDaEIsU0FBUyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFaEUsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztJQUVEOztPQUVHO0lBQ0sscUJBQXFCLENBQUMsVUFBeUI7UUFDckQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsYUFBYSxHQUFH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T0FBTyxDQUFDLEVBQUUsQ0FBQztZQUN6RCxPQUFPLGVBQWUsQ0FBQztRQUN6QixDQUFDO1FBQ0QsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztZQUMzRCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFDRCxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1lBQzFELE9BQU8sbUJBQW1CLENBQUM7UUFDN0IsQ0FBQztRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7Q0FDRjtBQXA3QkQsc0RBbzdCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvc2FzYWthbWEvUHJvamVjdHMvUmltb3Ivc3JjL3NlY3VyaXR5L2FuYWx5c2lzL2Zsb3cudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDlnovjg5njg7zjgrnjgrvjgq3jg6Xjg6rjg4bjgqPop6PmnpAgLSDjg5Xjg63jg7zmhJ/luqbjga7jgYLjgovjg4bjgrnjg4jop6PmnpBcbiAqIOODh+ODvOOCv+ODleODreODvOi/vei3oeOBqOOCu+OCreODpeODquODhuOCo+S4jeWkieadoeS7tuOBruaknOiovFxuICogXG4gKiBUeXBlU2NyaXB0IENvbXBpbGVyIEFQSeOCkuS9v+eUqOOBl+OBn0FTVOino+aekOOBq+OCiOOCi+Wun+ijhVxuICovXG5cbmltcG9ydCAqIGFzIHRzIGZyb20gJ3R5cGVzY3JpcHQnO1xuaW1wb3J0IHtcbiAgUG9zaXRpb25cbn0gZnJvbSAnLi4vLi4vY29yZS90eXBlcyc7XG5cbmltcG9ydCB7XG4gIEZsb3dHcmFwaCxcbiAgRmxvd05vZGUsXG4gIEZsb3dQYXRoLFxuICBTZWN1cml0eVZpb2xhdGlvbixcbiAgVGFpbnRNZXRhZGF0YSxcbiAgVGVzdFN0YXRlbWVudCxcbiAgVGFpbnRTb3VyY2VJbmZvLFxuICBTYW5pdGl6ZXJJbmZvLFxuICBTZWN1cml0eVNpbmtJbmZvLFxuICBBbmFseXNpc09wdGlvbnMsXG4gIFRhaW50UHJvcGFnYXRpb25SZXN1bHQsXG4gIFRhaW50Rmxvd0FuYWx5c2lzUmVzdWx0LFxuICBUYWludFZpb2xhdGlvbixcbiAgUmVhY2hhYmlsaXR5QW5hbHlzaXNSZXN1bHQsXG4gIEN5Y2xlRGV0ZWN0aW9uUmVzdWx0LFxuICBUeXBlRmxvd0FuYWx5c2lzUmVzdWx0LFxuICBUeXBlVHJhbnNpdGlvbixcbiAgVHlwZVZpb2xhdGlvbixcbiAgVGFpbnRMZXZlbCxcbiAgVGFpbnRTb3VyY2UsXG4gIFNlY3VyaXR5U2luayxcbiAgU2FuaXRpemVyVHlwZSxcbiAgVGVzdE1ldGhvZEV4dGVuZGVkIGFzIFRlc3RNZXRob2Rcbn0gZnJvbSAnLi4vdHlwZXMvZmxvdy10eXBlcyc7XG5cbi8vIOW/heimgeOBquWei+OCkuWGjeOCqOOCr+OCueODneODvOODiO+8iGVuZ2luZS50c+OBi+OCieS9v+eUqO+8iVxuZXhwb3J0IHR5cGUgeyBGbG93R3JhcGggfSBmcm9tICcuLi90eXBlcy9mbG93LXR5cGVzJztcblxuLyoqXG4gKiDjg5Xjg63jg7zmhJ/luqbjga7jgYLjgovjg4bjgrnjg4jop6PmnpDlmahcbiAqIFR5cGVTY3JpcHQgQ29tcGlsZXIgQVBJ44KS5rS755So44GX44Gf5a6M5YWo44GqQVNU6Kej5p6QXG4gKi9cbmV4cG9ydCBjbGFzcyBGbG93U2Vuc2l0aXZlQW5hbHl6ZXIge1xuICBwcml2YXRlIHNvdXJjZUZpbGU6IHRzLlNvdXJjZUZpbGUgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB0eXBlQ2hlY2tlcjogdHMuVHlwZUNoZWNrZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBub2RlSWRDb3VudGVyID0gMDtcbiAgcHJpdmF0ZSBmbG93Tm9kZXM6IE1hcDxzdHJpbmcsIEZsb3dOb2RlPiA9IG5ldyBNYXAoKTtcblxuICAvKipcbiAgICog44OG44K544OI5YaF44Gu44K744Kt44Ol44Oq44OG44Kj6Zai6YCj44OH44O844K/44OV44Ot44O844KS6L+96LehXG4gICAqL1xuICB0cmFja1NlY3VyaXR5RGF0YUZsb3codGVzdDogVGVzdE1ldGhvZCk6IEZsb3dHcmFwaCB7XG4gICAgLy8g44K944O844K544OV44Kh44Kk44Or44Gu5L2c5oiQXG4gICAgdGhpcy5zb3VyY2VGaWxlID0gdHMuY3JlYXRlU291cmNlRmlsZShcbiAgICAgIHRlc3QuZmlsZVBhdGggfHwgJ3Rlc3QudHMnLFxuICAgICAgdGVzdC5jb250ZW50IHx8ICcnLFxuICAgICAgdHMuU2NyaXB0VGFyZ2V0LkxhdGVzdCxcbiAgICAgIHRydWVcbiAgICApO1xuXG4gICAgLy8g44OV44Ot44O844Kw44Op44OV44Gu5qeL56+JXG4gICAgY29uc3QgZmxvd0dyYXBoID0gdGhpcy5idWlsZEZsb3dHcmFwaEZyb21BU1QodGhpcy5zb3VyY2VGaWxlKTtcblxuICAgIC8vIOaxmuafk+a6kOOAgeOCteODi+OCv+OCpOOCtuODvOOAgeOCt+ODs+OCr+OBruitmOWIpVxuICAgIHRoaXMuaWRlbnRpZnlTcGVjaWFsTm9kZXMoZmxvd0dyYXBoKTtcblxuICAgIC8vIOODkeOCueaEn+W6puino+aekFxuICAgIHRoaXMuYW5hbHl6ZVBhdGhzKGZsb3dHcmFwaCk7XG5cbiAgICAvLyDjgrvjgq3jg6Xjg6rjg4bjgqPkuI3lpInmnaHku7bjga7mpJzoqLxcbiAgICBmbG93R3JhcGgudmlvbGF0aW9ucyA9IHRoaXMudmVyaWZ5U2VjdXJpdHlJbnZhcmlhbnRzKGZsb3dHcmFwaCk7XG5cbiAgICByZXR1cm4gZmxvd0dyYXBoO1xuICB9XG5cbiAgLyoqXG4gICAqIEFTVOOBi+OCieODleODreODvOOCsOODqeODleOCkuani+eviVxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZEZsb3dHcmFwaEZyb21BU1Qoc291cmNlRmlsZTogdHMuU291cmNlRmlsZSk6IEZsb3dHcmFwaCB7XG4gICAgdGhpcy5mbG93Tm9kZXMuY2xlYXIoKTtcbiAgICB0aGlzLm5vZGVJZENvdW50ZXIgPSAwO1xuXG4gICAgY29uc3QgZW50cnlOb2RlID0gdGhpcy5jcmVhdGVGbG93Tm9kZSgnZW50cnknLCB7XG4gICAgICBpZDogYHN0bXRfJHt0aGlzLm5vZGVJZENvdW50ZXIrK31gLFxuICAgICAgdHlwZTogJ2VudHJ5JyxcbiAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgbG9jYXRpb246IHsgbGluZTogMSwgY29sdW1uOiAwIH0gYXMgUG9zaXRpb25cbiAgICB9KTtcblxuICAgIC8vIEFTVOOCkuODiOODqeODkOODvOOCueOBl+OBpuODleODreODvOODjuODvOODieOCkuani+eviVxuICAgIGNvbnN0IGV4aXROb2RlID0gdGhpcy50cmF2ZXJzZUFTVChzb3VyY2VGaWxlLCBlbnRyeU5vZGUpO1xuXG4gICAgLy8g44OR44K544Gu6KiI566XXG4gICAgY29uc3QgcGF0aHMgPSB0aGlzLmNhbGN1bGF0ZUFsbFBhdGhzKGVudHJ5Tm9kZS5pZCwgZXhpdE5vZGUuaWQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5vZGVzOiB0aGlzLmZsb3dOb2RlcyxcbiAgICAgIGVkZ2VzOiBbXSxcbiAgICAgIGVudHJ5Tm9kZTogZW50cnlOb2RlLmlkLFxuICAgICAgZXhpdE5vZGVzOiBbZXhpdE5vZGUuaWRdLFxuICAgICAgdGFpbnRTb3VyY2VzOiBbXSxcbiAgICAgIHNlY3VyaXR5U2lua3M6IFtdLFxuICAgICAgc2FuaXRpemVyczogW10sXG4gICAgICBwYXRocyxcbiAgICAgIHZpb2xhdGlvbnM6IFtdXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBU1TjgpLjg4jjg6njg5Djg7zjgrnjgZfjgabjg5Xjg63jg7zjg47jg7zjg4njgpLmp4vnr4lcbiAgICovXG4gIHByaXZhdGUgdHJhdmVyc2VBU1Qobm9kZTogdHMuTm9kZSwgcHJldmlvdXNOb2RlOiBGbG93Tm9kZSk6IEZsb3dOb2RlIHtcbiAgICBsZXQgY3VycmVudE5vZGUgPSBwcmV2aW91c05vZGU7XG5cbiAgICB0cy5mb3JFYWNoQ2hpbGQobm9kZSwgKGNoaWxkKSA9PiB7XG4gICAgICBzd2l0Y2ggKGNoaWxkLmtpbmQpIHtcbiAgICAgICAgY2FzZSB0cy5TeW50YXhLaW5kLlZhcmlhYmxlU3RhdGVtZW50OlxuICAgICAgICAgIGN1cnJlbnROb2RlID0gdGhpcy5oYW5kbGVWYXJpYWJsZVN0YXRlbWVudChjaGlsZCBhcyB0cy5WYXJpYWJsZVN0YXRlbWVudCwgY3VycmVudE5vZGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgICAgY2FzZSB0cy5TeW50YXhLaW5kLkV4cHJlc3Npb25TdGF0ZW1lbnQ6XG4gICAgICAgICAgY3VycmVudE5vZGUgPSB0aGlzLmhhbmRsZUV4cHJlc3Npb25TdGF0ZW1lbnQoY2hpbGQgYXMgdHMuRXhwcmVzc2lvblN0YXRlbWVudCwgY3VycmVudE5vZGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgICAgY2FzZSB0cy5TeW50YXhLaW5kLklmU3RhdGVtZW50OlxuICAgICAgICAgIGN1cnJlbnROb2RlID0gdGhpcy5oYW5kbGVJZlN0YXRlbWVudChjaGlsZCBhcyB0cy5JZlN0YXRlbWVudCwgY3VycmVudE5vZGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgICAgY2FzZSB0cy5TeW50YXhLaW5kLkZvclN0YXRlbWVudDpcbiAgICAgICAgY2FzZSB0cy5TeW50YXhLaW5kLldoaWxlU3RhdGVtZW50OlxuICAgICAgICBjYXNlIHRzLlN5bnRheEtpbmQuRG9TdGF0ZW1lbnQ6XG4gICAgICAgICAgY3VycmVudE5vZGUgPSB0aGlzLmhhbmRsZUxvb3BTdGF0ZW1lbnQoY2hpbGQgYXMgdHMuSXRlcmF0aW9uU3RhdGVtZW50LCBjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgICBjYXNlIHRzLlN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb246XG4gICAgICAgICAgY3VycmVudE5vZGUgPSB0aGlzLmhhbmRsZUNhbGxFeHByZXNzaW9uKGNoaWxkIGFzIHRzLkNhbGxFeHByZXNzaW9uLCBjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgICBjYXNlIHRzLlN5bnRheEtpbmQuUmV0dXJuU3RhdGVtZW50OlxuICAgICAgICAgIGN1cnJlbnROb2RlID0gdGhpcy5oYW5kbGVSZXR1cm5TdGF0ZW1lbnQoY2hpbGQgYXMgdHMuUmV0dXJuU3RhdGVtZW50LCBjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGN1cnJlbnROb2RlID0gdGhpcy50cmF2ZXJzZUFTVChjaGlsZCwgY3VycmVudE5vZGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGN1cnJlbnROb2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkieaVsOWuo+iogOaWh+OBruWHpueQhlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVWYXJpYWJsZVN0YXRlbWVudChzdG10OiB0cy5WYXJpYWJsZVN0YXRlbWVudCwgcHJldmlvdXNOb2RlOiBGbG93Tm9kZSk6IEZsb3dOb2RlIHtcbiAgICBjb25zdCBkZWNsYXJhdGlvbiA9IHN0bXQuZGVjbGFyYXRpb25MaXN0LmRlY2xhcmF0aW9uc1swXTtcbiAgICBpZiAoIWRlY2xhcmF0aW9uKSByZXR1cm4gcHJldmlvdXNOb2RlO1xuXG4gICAgY29uc3QgdmFyTmFtZSA9IGRlY2xhcmF0aW9uLm5hbWUuZ2V0VGV4dCh0aGlzLnNvdXJjZUZpbGUhKTtcbiAgICBjb25zdCBpbml0aWFsaXplciA9IGRlY2xhcmF0aW9uLmluaXRpYWxpemVyPy5nZXRUZXh0KHRoaXMuc291cmNlRmlsZSEpIHx8ICcnO1xuXG4gICAgY29uc3Qgc3RhdGVtZW50OiBUZXN0U3RhdGVtZW50ID0ge1xuICAgICAgaWQ6IGBzdG10XyR7dGhpcy5ub2RlSWRDb3VudGVyKyt9YCxcbiAgICAgIHR5cGU6ICdhc3NpZ25tZW50JyxcbiAgICAgIGNvbnRlbnQ6IHN0bXQuZ2V0VGV4dCh0aGlzLnNvdXJjZUZpbGUhKSxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmdldExvY2F0aW9uRnJvbU5vZGUoc3RtdCksXG4gICAgICBsaHM6IHZhck5hbWUsXG4gICAgICByaHM6IGluaXRpYWxpemVyXG4gICAgfTtcblxuICAgIGNvbnN0IG5ld05vZGUgPSB0aGlzLmNyZWF0ZUZsb3dOb2RlKGBhc3NpZ25fJHt2YXJOYW1lfWAsIHN0YXRlbWVudCk7XG4gICAgdGhpcy5jb25uZWN0Tm9kZXMocHJldmlvdXNOb2RlLCBuZXdOb2RlKTtcblxuICAgIC8vIOaxmuafk+ino+aekFxuICAgIGlmICh0aGlzLmlzVXNlcklucHV0KGluaXRpYWxpemVyKSkge1xuICAgICAgbmV3Tm9kZS5vdXRwdXRUYWludCA9IFRhaW50TGV2ZWwuREVGSU5JVEVMWV9UQUlOVEVEO1xuICAgICAgbmV3Tm9kZS5tZXRhZGF0YSA9IHRoaXMuY3JlYXRlVGFpbnRNZXRhZGF0YShUYWludFNvdXJjZS5VU0VSX0lOUFVULCBuZXdOb2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3Tm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvI/mlofjga7lh6bnkIZcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlRXhwcmVzc2lvblN0YXRlbWVudChzdG10OiB0cy5FeHByZXNzaW9uU3RhdGVtZW50LCBwcmV2aW91c05vZGU6IEZsb3dOb2RlKTogRmxvd05vZGUge1xuICAgIGNvbnN0IGV4cHJlc3Npb24gPSBzdG10LmV4cHJlc3Npb247XG4gICAgXG4gICAgaWYgKHRzLmlzQ2FsbEV4cHJlc3Npb24oZXhwcmVzc2lvbikpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUNhbGxFeHByZXNzaW9uKGV4cHJlc3Npb24sIHByZXZpb3VzTm9kZSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVtZW50OiBUZXN0U3RhdGVtZW50ID0ge1xuICAgICAgaWQ6IGBzdG10XyR7dGhpcy5ub2RlSWRDb3VudGVyKyt9YCxcbiAgICAgIHR5cGU6ICdtZXRob2RDYWxsJyxcbiAgICAgIGNvbnRlbnQ6IHN0bXQuZ2V0VGV4dCh0aGlzLnNvdXJjZUZpbGUhKSxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmdldExvY2F0aW9uRnJvbU5vZGUoc3RtdClcbiAgICB9O1xuXG4gICAgY29uc3QgbmV3Tm9kZSA9IHRoaXMuY3JlYXRlRmxvd05vZGUoYGV4cHJfJHt0aGlzLm5vZGVJZENvdW50ZXJ9YCwgc3RhdGVtZW50KTtcbiAgICB0aGlzLmNvbm5lY3ROb2RlcyhwcmV2aW91c05vZGUsIG5ld05vZGUpO1xuICAgIFxuICAgIHJldHVybiBuZXdOb2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIOmWouaVsOWRvOOBs+WHuuOBl+OBruWHpueQhlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVDYWxsRXhwcmVzc2lvbihleHByOiB0cy5DYWxsRXhwcmVzc2lvbiwgcHJldmlvdXNOb2RlOiBGbG93Tm9kZSk6IEZsb3dOb2RlIHtcbiAgICBjb25zdCBtZXRob2ROYW1lID0gZXhwci5leHByZXNzaW9uLmdldFRleHQodGhpcy5zb3VyY2VGaWxlISk7XG4gICAgY29uc3QgYXJncyA9IGV4cHIuYXJndW1lbnRzLm1hcChhcmcgPT4gYXJnLmdldFRleHQodGhpcy5zb3VyY2VGaWxlISkpO1xuXG4gICAgY29uc3Qgc3RhdGVtZW50OiBUZXN0U3RhdGVtZW50ID0ge1xuICAgICAgaWQ6IGBzdG10XyR7dGhpcy5ub2RlSWRDb3VudGVyKyt9YCxcbiAgICAgIHR5cGU6ICdtZXRob2RDYWxsJyxcbiAgICAgIGNvbnRlbnQ6IGV4cHIuZ2V0VGV4dCh0aGlzLnNvdXJjZUZpbGUhKSxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmdldExvY2F0aW9uRnJvbU5vZGUoZXhwciksXG4gICAgICBtZXRob2Q6IG1ldGhvZE5hbWUsXG4gICAgICBhcmd1bWVudHM6IGFyZ3NcbiAgICB9O1xuXG4gICAgLy8g44Ki44K144O844K344On44Oz44Gu5qSc5Ye6XG4gICAgaWYgKHRoaXMuaXNBc3NlcnRpb24obWV0aG9kTmFtZSkpIHtcbiAgICAgIHN0YXRlbWVudC50eXBlID0gJ2Fzc2VydGlvbic7XG4gICAgICBzdGF0ZW1lbnQuYWN0dWFsID0gYXJnc1swXSB8fCAnJztcbiAgICB9XG5cbiAgICAvLyDjgrXjg4vjgr/jgqTjgrbjg7zjga7mpJzlh7pcbiAgICBpZiAodGhpcy5pc1Nhbml0aXplcihtZXRob2ROYW1lKSkge1xuICAgICAgc3RhdGVtZW50LnR5cGUgPSAnc2FuaXRpemVyJztcbiAgICB9XG5cbiAgICBjb25zdCBuZXdOb2RlID0gdGhpcy5jcmVhdGVGbG93Tm9kZShgY2FsbF8ke21ldGhvZE5hbWV9YCwgc3RhdGVtZW50KTtcbiAgICB0aGlzLmNvbm5lY3ROb2RlcyhwcmV2aW91c05vZGUsIG5ld05vZGUpO1xuXG4gICAgLy8g5rGa5p+T44Gu5Lyd5pKt44G+44Gf44Gv6Zmk5Y67XG4gICAgaWYgKHRoaXMuaXNTYW5pdGl6ZXIobWV0aG9kTmFtZSkpIHtcbiAgICAgIG5ld05vZGUub3V0cHV0VGFpbnQgPSBUYWludExldmVsLlVOVEFJTlRFRDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5byV5pWw44GL44KJ5rGa5p+T44KS5Lyd5pKtXG4gICAgICBuZXdOb2RlLmlucHV0VGFpbnQgPSBwcmV2aW91c05vZGUub3V0cHV0VGFpbnQ7XG4gICAgICBuZXdOb2RlLm91dHB1dFRhaW50ID0gcHJldmlvdXNOb2RlLm91dHB1dFRhaW50O1xuICAgIH1cblxuICAgIHJldHVybiBuZXdOb2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIElm5paH44Gu5Yem55CGXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUlmU3RhdGVtZW50KHN0bXQ6IHRzLklmU3RhdGVtZW50LCBwcmV2aW91c05vZGU6IEZsb3dOb2RlKTogRmxvd05vZGUge1xuICAgIGNvbnN0IGNvbmRpdGlvbiA9IHN0bXQuZXhwcmVzc2lvbi5nZXRUZXh0KHRoaXMuc291cmNlRmlsZSEpO1xuICAgIFxuICAgIGNvbnN0IGJyYW5jaE5vZGUgPSB0aGlzLmNyZWF0ZUZsb3dOb2RlKGBpZl8ke2NvbmRpdGlvbn1gLCB7XG4gICAgICBpZDogYHN0bXRfJHt0aGlzLm5vZGVJZENvdW50ZXIrK31gLFxuICAgICAgdHlwZTogJ21ldGhvZENhbGwnLFxuICAgICAgY29udGVudDogYGlmICgke2NvbmRpdGlvbn0pYCxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmdldExvY2F0aW9uRnJvbU5vZGUoc3RtdClcbiAgICB9KTtcbiAgICB0aGlzLmNvbm5lY3ROb2RlcyhwcmV2aW91c05vZGUsIGJyYW5jaE5vZGUpO1xuXG4gICAgLy8gVGhlbiDjg5bjg6njg7Pjg4FcbiAgICBjb25zdCB0aGVuRXhpdCA9IHRoaXMudHJhdmVyc2VBU1Qoc3RtdC50aGVuU3RhdGVtZW50LCBicmFuY2hOb2RlKTtcblxuICAgIC8vIEVsc2Ug44OW44Op44Oz44OBXG4gICAgbGV0IGVsc2VFeGl0ID0gYnJhbmNoTm9kZTtcbiAgICBpZiAoc3RtdC5lbHNlU3RhdGVtZW50KSB7XG4gICAgICBlbHNlRXhpdCA9IHRoaXMudHJhdmVyc2VBU1Qoc3RtdC5lbHNlU3RhdGVtZW50LCBicmFuY2hOb2RlKTtcbiAgICB9XG5cbiAgICAvLyDjg57jg7zjgrjjg53jgqTjg7Pjg4hcbiAgICBjb25zdCBtZXJnZU5vZGUgPSB0aGlzLmNyZWF0ZUZsb3dOb2RlKGBtZXJnZV8ke3RoaXMubm9kZUlkQ291bnRlcn1gLCB7XG4gICAgICBpZDogYHN0bXRfJHt0aGlzLm5vZGVJZENvdW50ZXIrK31gLFxuICAgICAgdHlwZTogJ21ldGhvZENhbGwnLFxuICAgICAgY29udGVudDogJ21lcmdlJyxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmdldExvY2F0aW9uRnJvbU5vZGUoc3RtdClcbiAgICB9KTtcblxuICAgIHRoaXMuY29ubmVjdE5vZGVzKHRoZW5FeGl0LCBtZXJnZU5vZGUpO1xuICAgIGlmIChlbHNlRXhpdCAhPT0gYnJhbmNoTm9kZSkge1xuICAgICAgdGhpcy5jb25uZWN0Tm9kZXMoZWxzZUV4aXQsIG1lcmdlTm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lcmdlTm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg6vjg7zjg5fmlofjga7lh6bnkIZcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlTG9vcFN0YXRlbWVudChzdG10OiB0cy5JdGVyYXRpb25TdGF0ZW1lbnQsIHByZXZpb3VzTm9kZTogRmxvd05vZGUpOiBGbG93Tm9kZSB7XG4gICAgY29uc3QgbG9vcFR5cGUgPSB0cy5TeW50YXhLaW5kW3N0bXQua2luZF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKCdzdGF0ZW1lbnQnLCAnJyk7XG4gICAgXG4gICAgY29uc3QgbG9vcEVudHJ5ID0gdGhpcy5jcmVhdGVGbG93Tm9kZShgJHtsb29wVHlwZX1fZW50cnlgLCB7XG4gICAgICBpZDogYHN0bXRfJHt0aGlzLm5vZGVJZENvdW50ZXIrK31gLFxuICAgICAgdHlwZTogJ21ldGhvZENhbGwnLFxuICAgICAgY29udGVudDogc3RtdC5nZXRUZXh0KHRoaXMuc291cmNlRmlsZSEpLnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJyxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmdldExvY2F0aW9uRnJvbU5vZGUoc3RtdClcbiAgICB9KTtcbiAgICB0aGlzLmNvbm5lY3ROb2RlcyhwcmV2aW91c05vZGUsIGxvb3BFbnRyeSk7XG5cbiAgICAvLyDjg6vjg7zjg5fmnKzkvZNcbiAgICBsZXQgYm9keU5vZGU6IHRzLk5vZGU7XG4gICAgaWYgKHRzLmlzRm9yU3RhdGVtZW50KHN0bXQpIHx8IHRzLmlzV2hpbGVTdGF0ZW1lbnQoc3RtdCkpIHtcbiAgICAgIGJvZHlOb2RlID0gc3RtdC5zdGF0ZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJvZHlOb2RlID0gKHN0bXQgYXMgdHMuRG9TdGF0ZW1lbnQpLnN0YXRlbWVudDtcbiAgICB9XG5cbiAgICBjb25zdCBsb29wRXhpdCA9IHRoaXMudHJhdmVyc2VBU1QoYm9keU5vZGUsIGxvb3BFbnRyeSk7XG4gICAgXG4gICAgLy8g44OQ44OD44Kv44Ko44OD44K477yI44Or44O844OX77yJXG4gICAgdGhpcy5jb25uZWN0Tm9kZXMobG9vcEV4aXQsIGxvb3BFbnRyeSk7XG5cbiAgICAvLyDjg6vjg7zjg5flh7rlj6NcbiAgICBjb25zdCBleGl0Tm9kZSA9IHRoaXMuY3JlYXRlRmxvd05vZGUoYCR7bG9vcFR5cGV9X2V4aXRgLCB7XG4gICAgICBpZDogYHN0bXRfJHt0aGlzLm5vZGVJZENvdW50ZXIrK31gLFxuICAgICAgdHlwZTogJ21ldGhvZENhbGwnLFxuICAgICAgY29udGVudDogJ2xvb3AgZXhpdCcsXG4gICAgICBsb2NhdGlvbjogdGhpcy5nZXRMb2NhdGlvbkZyb21Ob2RlKHN0bXQpXG4gICAgfSk7XG4gICAgdGhpcy5jb25uZWN0Tm9kZXMobG9vcEVudHJ5LCBleGl0Tm9kZSk7XG5cbiAgICByZXR1cm4gZXhpdE5vZGU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJu5paH44Gu5Yem55CGXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJldHVyblN0YXRlbWVudChzdG10OiB0cy5SZXR1cm5TdGF0ZW1lbnQsIHByZXZpb3VzTm9kZTogRmxvd05vZGUpOiBGbG93Tm9kZSB7XG4gICAgY29uc3QgcmV0dXJuVmFsdWUgPSBzdG10LmV4cHJlc3Npb24/LmdldFRleHQodGhpcy5zb3VyY2VGaWxlISkgfHwgJ3ZvaWQnO1xuICAgIFxuICAgIGNvbnN0IHJldHVybk5vZGUgPSB0aGlzLmNyZWF0ZUZsb3dOb2RlKGByZXR1cm5gLCB7XG4gICAgICBpZDogYHN0bXRfJHt0aGlzLm5vZGVJZENvdW50ZXIrK31gLFxuICAgICAgdHlwZTogJ21ldGhvZENhbGwnLFxuICAgICAgY29udGVudDogc3RtdC5nZXRUZXh0KHRoaXMuc291cmNlRmlsZSEpLFxuICAgICAgbG9jYXRpb246IHRoaXMuZ2V0TG9jYXRpb25Gcm9tTm9kZShzdG10KSxcbiAgICAgIHJldHVyblZhbHVlXG4gICAgfSk7XG4gICAgdGhpcy5jb25uZWN0Tm9kZXMocHJldmlvdXNOb2RlLCByZXR1cm5Ob2RlKTtcblxuICAgIHJldHVybiByZXR1cm5Ob2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIOODleODreODvOODjuODvOODieOBruS9nOaIkFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVGbG93Tm9kZShpZDogc3RyaW5nLCBzdGF0ZW1lbnQ6IFRlc3RTdGF0ZW1lbnQpOiBGbG93Tm9kZSB7XG4gICAgY29uc3Qgbm9kZUlkID0gYCR7aWR9XyR7dGhpcy5ub2RlSWRDb3VudGVyKyt9YDtcbiAgICBjb25zdCBub2RlOiBGbG93Tm9kZSA9IHtcbiAgICAgIGlkOiBub2RlSWQsXG4gICAgICB0eXBlOiAnc3RhdGVtZW50JyxcbiAgICAgIHN0YXRlbWVudCxcbiAgICAgIGlucHV0VGFpbnQ6IFRhaW50TGV2ZWwuVU5UQUlOVEVELFxuICAgICAgb3V0cHV0VGFpbnQ6IFRhaW50TGV2ZWwuVU5UQUlOVEVELFxuICAgICAgc3VjY2Vzc29yczogW10sXG4gICAgICBwcmVkZWNlc3NvcnM6IFtdXG4gICAgfTtcbiAgICB0aGlzLmZsb3dOb2Rlcy5zZXQobm9kZUlkLCBub2RlKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg47jg7zjg4nplpPjga7mjqXntppcbiAgICovXG4gIHByaXZhdGUgY29ubmVjdE5vZGVzKGZyb206IEZsb3dOb2RlLCB0bzogRmxvd05vZGUpOiB2b2lkIHtcbiAgICBmcm9tLnN1Y2Nlc3NvcnMucHVzaCh0by5pZCk7XG4gICAgdG8ucHJlZGVjZXNzb3JzLnB1c2goZnJvbS5pZCk7XG4gICAgLy8g5rGa5p+T44Gu5Lyd5pKtXG4gICAgdG8uaW5wdXRUYWludCA9IGZyb20ub3V0cHV0VGFpbnQ7XG4gIH1cblxuICAvKipcbiAgICog44OO44O844OJ44Gu5L2N572u5oOF5aCx44KS5Y+W5b6XXG4gICAqL1xuICBwcml2YXRlIGdldExvY2F0aW9uRnJvbU5vZGUobm9kZTogdHMuTm9kZSk6IHsgbGluZTogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9IHtcbiAgICBjb25zdCB7IGxpbmUsIGNoYXJhY3RlciB9ID0gdGhpcy5zb3VyY2VGaWxlIS5nZXRMaW5lQW5kQ2hhcmFjdGVyT2ZQb3NpdGlvbihub2RlLmdldFN0YXJ0KCkpO1xuICAgIHJldHVybiB7IGxpbmU6IGxpbmUgKyAxLCBjb2x1bW46IGNoYXJhY3RlciB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOeJueauiuODjuODvOODieOBruitmOWIpVxuICAgKi9cbiAgcHJpdmF0ZSBpZGVudGlmeVNwZWNpYWxOb2RlcyhmbG93R3JhcGg6IEZsb3dHcmFwaCk6IHZvaWQge1xuICAgIC8vIOmFjeWIl+OBruWIneacn+WMluOCkueiuuiqjVxuICAgIGlmICghZmxvd0dyYXBoLnRhaW50U291cmNlcykgZmxvd0dyYXBoLnRhaW50U291cmNlcyA9IFtdO1xuICAgIGlmICghZmxvd0dyYXBoLnNhbml0aXplcnMpIGZsb3dHcmFwaC5zYW5pdGl6ZXJzID0gW107XG4gICAgaWYgKCFmbG93R3JhcGguc2VjdXJpdHlTaW5rcykgZmxvd0dyYXBoLnNlY3VyaXR5U2lua3MgPSBbXTtcblxuICAgIGZsb3dHcmFwaC5ub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgY29uc3QgY29udGVudCA9IG5vZGUuc3RhdGVtZW50Py5jb250ZW50O1xuICAgICAgaWYgKCFjb250ZW50KSByZXR1cm47XG5cbiAgICAgIC8vIOaxmuafk+a6kOOBruitmOWIpVxuICAgICAgaWYgKHRoaXMuaXNVc2VySW5wdXQoY29udGVudCkpIHtcbiAgICAgICAgZmxvd0dyYXBoLnRhaW50U291cmNlcyEucHVzaCh0aGlzLmNyZWF0ZVRhaW50U291cmNlSW5mbyhub2RlKSk7XG4gICAgICAgIG5vZGUub3V0cHV0VGFpbnQgPSBUYWludExldmVsLkRFRklOSVRFTFlfVEFJTlRFRDtcbiAgICAgIH1cblxuICAgICAgLy8g44K144OL44K/44Kk44K244O844Gu6K2Y5YilXG4gICAgICBpZiAobm9kZS5zdGF0ZW1lbnQ/LnR5cGUgPT09ICdzYW5pdGl6ZXInIHx8IHRoaXMuaXNTYW5pdGl6ZXIoY29udGVudCkpIHtcbiAgICAgICAgZmxvd0dyYXBoLnNhbml0aXplcnMhLnB1c2godGhpcy5jcmVhdGVTYW5pdGl6ZXJJbmZvKG5vZGUpKTtcbiAgICAgIH1cblxuICAgICAgLy8g44K744Kt44Ol44Oq44OG44Kj44K344Oz44Kv44Gu6K2Y5YilXG4gICAgICBpZiAodGhpcy5pc1NlY3VyaXR5U2luayhjb250ZW50KSkge1xuICAgICAgICBmbG93R3JhcGguc2VjdXJpdHlTaW5rcyEucHVzaCh0aGlzLmNyZWF0ZVNlY3VyaXR5U2lua0luZm8obm9kZSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOODkeOCueino+aekFxuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplUGF0aHMoZmxvd0dyYXBoOiBGbG93R3JhcGgpOiB2b2lkIHtcbiAgICBpZiAoIWZsb3dHcmFwaC5wYXRocykgZmxvd0dyYXBoLnBhdGhzID0gW107XG4gICAgZmxvd0dyYXBoLnBhdGhzLmZvckVhY2gocGF0aCA9PiB7XG4gICAgICBsZXQgY3VycmVudFRhaW50OiBUYWludExldmVsID0gVGFpbnRMZXZlbC5VTlRBSU5URUQ7XG4gICAgICBsZXQgcGFzc2VkU2FuaXRpemVyID0gZmFsc2U7XG5cbiAgICAgIGZvciAoY29uc3Qgbm9kZUlkIG9mIHBhdGgubm9kZXMpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZmxvd05vZGVzLmdldChub2RlSWQpO1xuICAgICAgICBpZiAoIW5vZGUpIGNvbnRpbnVlO1xuXG4gICAgICAgIC8vIOaxmuafk+a6kFxuICAgICAgICBpZiAoZmxvd0dyYXBoLnRhaW50U291cmNlcz8uc29tZSh0cyA9PiBcbiAgICAgICAgICB0cy5sb2NhdGlvbi5saW5lID09PSBub2RlLnN0YXRlbWVudD8ubG9jYXRpb24/LmxpbmUgJiYgXG4gICAgICAgICAgdHMubG9jYXRpb24uY29sdW1uID09PSBub2RlLnN0YXRlbWVudD8ubG9jYXRpb24/LmNvbHVtbikpIHtcbiAgICAgICAgICBjdXJyZW50VGFpbnQgPSBUYWludExldmVsLkRFRklOSVRFTFlfVEFJTlRFRDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOOCteODi+OCv+OCpOOCtuODvFxuICAgICAgICBpZiAoZmxvd0dyYXBoLnNhbml0aXplcnM/LnNvbWUocyA9PiBcbiAgICAgICAgICBzLmxvY2F0aW9uLmxpbmUgPT09IG5vZGUuc3RhdGVtZW50Py5sb2NhdGlvbj8ubGluZSAmJlxuICAgICAgICAgIHMubG9jYXRpb24uY29sdW1uID09PSBub2RlLnN0YXRlbWVudD8ubG9jYXRpb24/LmNvbHVtbikpIHtcbiAgICAgICAgICBjdXJyZW50VGFpbnQgPSBUYWludExldmVsLlVOVEFJTlRFRDtcbiAgICAgICAgICBwYXNzZWRTYW5pdGl6ZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g44K344Oz44KvXG4gICAgICAgIGlmIChmbG93R3JhcGguc2VjdXJpdHlTaW5rcz8uc29tZShzcyA9PiBcbiAgICAgICAgICBzcy5sb2NhdGlvbi5saW5lID09PSBub2RlLnN0YXRlbWVudD8ubG9jYXRpb24/LmxpbmUgJiZcbiAgICAgICAgICBzcy5sb2NhdGlvbi5jb2x1bW4gPT09IG5vZGUuc3RhdGVtZW50Py5sb2NhdGlvbj8uY29sdW1uKSkge1xuICAgICAgICAgIHBhdGgucmVhY2hlc1NlY3VyaXR5U2luayA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcGF0aC50YWludExldmVsID0gY3VycmVudFRhaW50O1xuICAgICAgcGF0aC5wYXNzZWRUaHJvdWdoU2FuaXRpemVyID0gcGFzc2VkU2FuaXRpemVyO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCu+OCreODpeODquODhuOCo+S4jeWkieadoeS7tuOBruaknOiovFxuICAgKi9cbiAgdmVyaWZ5U2VjdXJpdHlJbnZhcmlhbnRzKGZsb3dHcmFwaDogRmxvd0dyYXBoKTogU2VjdXJpdHlWaW9sYXRpb25bXSB7XG4gICAgY29uc3QgdmlvbGF0aW9uczogU2VjdXJpdHlWaW9sYXRpb25bXSA9IFtdO1xuXG4gICAgaWYgKCFmbG93R3JhcGgucGF0aHMpIHJldHVybiB2aW9sYXRpb25zO1xuXG4gICAgZmxvd0dyYXBoLnBhdGhzXG4gICAgICAuZmlsdGVyKHBhdGggPT4gcGF0aC50YWludExldmVsICYmIHBhdGgudGFpbnRMZXZlbCA+PSBUYWludExldmVsLkxJS0VMWV9UQUlOVEVEKVxuICAgICAgLmZpbHRlcihwYXRoID0+ICFwYXRoLnBhc3NlZFRocm91Z2hTYW5pdGl6ZXIpXG4gICAgICAuZmlsdGVyKHBhdGggPT4gcGF0aC5yZWFjaGVzU2VjdXJpdHlTaW5rKVxuICAgICAgLmZvckVhY2gocGF0aCA9PiB7XG4gICAgICAgIGNvbnN0IHNpbmtOb2RlID0gdGhpcy5mbG93Tm9kZXMuZ2V0KHBhdGgubm9kZXNbcGF0aC5ub2Rlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgIGlmIChzaW5rTm9kZSkge1xuICAgICAgICAgIHZpb2xhdGlvbnMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAndGFpbnQnLFxuICAgICAgICAgICAgdmFyaWFibGU6IGBwYXRoXyR7cGF0aC5pZCB8fCAndW5rbm93bid9YCxcbiAgICAgICAgICAgIHRhaW50TGV2ZWw6IHBhdGgudGFpbnRMZXZlbCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBzaW5rTm9kZS5tZXRhZGF0YSB8fCB0aGlzLmNyZWF0ZURlZmF1bHRNZXRhZGF0YShzaW5rTm9kZSksXG4gICAgICAgICAgICBzZXZlcml0eTogJ2hpZ2gnLFxuICAgICAgICAgICAgc3VnZ2VzdGVkRml4OiAnQXBwbHkgYXBwcm9wcmlhdGUgc2FuaXRpemF0aW9uIGJlZm9yZSB1c2luZyB0YWludGVkIGRhdGEnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1RhaW50ZWQgZGF0YSBmbG93cyB0byBzZWN1cml0eSBzaW5rIHdpdGhvdXQgc2FuaXRpemF0aW9uJyxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBzaW5rTm9kZS5zdGF0ZW1lbnQ/LmxvY2F0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHZpb2xhdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICog5YWo44OR44K544Gu6KiI566XXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZUFsbFBhdGhzKGVudHJ5SWQ6IHN0cmluZywgZXhpdElkOiBzdHJpbmcpOiBGbG93UGF0aFtdIHtcbiAgICBjb25zdCBwYXRoczogRmxvd1BhdGhbXSA9IFtdO1xuICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBsZXQgcGF0aENvdW50ZXIgPSAwO1xuXG4gICAgY29uc3QgZGZzID0gKG5vZGVJZDogc3RyaW5nLCBjdXJyZW50UGF0aDogc3RyaW5nW10pOiB2b2lkID0+IHtcbiAgICAgIGlmIChub2RlSWQgPT09IGV4aXRJZCkge1xuICAgICAgICBwYXRocy5wdXNoKHtcbiAgICAgICAgICBpZDogYHBhdGhfJHtwYXRoQ291bnRlcisrfWAsXG4gICAgICAgICAgbm9kZXM6IFsuLi5jdXJyZW50UGF0aCwgbm9kZUlkXSxcbiAgICAgICAgICBlZGdlczogW10sXG4gICAgICAgICAgaXNGZWFzaWJsZTogdHJ1ZSxcbiAgICAgICAgICB0YWludExldmVsOiBUYWludExldmVsLlVOVEFJTlRFRCxcbiAgICAgICAgICBwYXNzZWRUaHJvdWdoU2FuaXRpemVyOiBmYWxzZSxcbiAgICAgICAgICByZWFjaGVzU2VjdXJpdHlTaW5rOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodmlzaXRlZC5oYXMobm9kZUlkKSAmJiBjdXJyZW50UGF0aC5pbmNsdWRlcyhub2RlSWQpKSB7XG4gICAgICAgIC8vIOW+queSsOOCkuaknOWHulxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZpc2l0ZWQuYWRkKG5vZGVJZCk7XG4gICAgICBjb25zdCBub2RlID0gdGhpcy5mbG93Tm9kZXMuZ2V0KG5vZGVJZCk7XG4gICAgICBpZiAobm9kZSkge1xuICAgICAgICBub2RlLnN1Y2Nlc3NvcnMuZm9yRWFjaChzdWNjZXNzb3JJZCA9PiB7XG4gICAgICAgICAgZGZzKHN1Y2Nlc3NvcklkLCBbLi4uY3VycmVudFBhdGgsIG5vZGVJZF0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHZpc2l0ZWQuZGVsZXRlKG5vZGVJZCk7XG4gICAgfTtcblxuICAgIGRmcyhlbnRyeUlkLCBbXSk7XG4gICAgcmV0dXJuIHBhdGhzO1xuICB9XG5cbiAgLyoqXG4gICAqIOODq+ODvOODl+OBruaknOWHulxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3RMb29wcygpOiBBcnJheTx7XG4gICAgdHlwZTogJ2ZvcicgfCAnd2hpbGUnIHwgJ2RvLXdoaWxlJztcbiAgICBib2R5Tm9kZXM6IEZsb3dOb2RlW107XG4gICAgZW50cnlOb2RlOiBGbG93Tm9kZTtcbiAgICBleGl0Tm9kZTogRmxvd05vZGU7XG4gIH0+IHtcbiAgICBjb25zdCBsb29wczogQXJyYXk8e1xuICAgICAgdHlwZTogJ2ZvcicgfCAnd2hpbGUnIHwgJ2RvLXdoaWxlJztcbiAgICAgIGJvZHlOb2RlczogRmxvd05vZGVbXTtcbiAgICAgIGVudHJ5Tm9kZTogRmxvd05vZGU7XG4gICAgICBleGl0Tm9kZTogRmxvd05vZGU7XG4gICAgfT4gPSBbXTtcblxuICAgIC8vIOODq+ODvOODl+ODjuODvOODieOCkuaknOWHulxuICAgIHRoaXMuZmxvd05vZGVzLmZvckVhY2goKG5vZGUsIG5vZGVJZCkgPT4ge1xuICAgICAgaWYgKG5vZGVJZC5pbmNsdWRlcygnX2VudHJ5JykpIHtcbiAgICAgICAgY29uc3QgbG9vcFR5cGUgPSBub2RlSWQuc3BsaXQoJ18nKVswXSBhcyAnZm9yJyB8ICd3aGlsZScgfCAnZG8td2hpbGUnO1xuICAgICAgICBjb25zdCBleGl0SWQgPSBub2RlSWQucmVwbGFjZSgnX2VudHJ5JywgJ19leGl0Jyk7XG4gICAgICAgIGNvbnN0IGV4aXROb2RlID0gdGhpcy5mbG93Tm9kZXMuZ2V0KGV4aXRJZCk7XG5cbiAgICAgICAgaWYgKGV4aXROb2RlKSB7XG4gICAgICAgICAgY29uc3QgYm9keU5vZGVzID0gdGhpcy5nZXRMb29wQm9keU5vZGVzKG5vZGUsIGV4aXROb2RlKTtcbiAgICAgICAgICBsb29wcy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IGxvb3BUeXBlLFxuICAgICAgICAgICAgYm9keU5vZGVzLFxuICAgICAgICAgICAgZW50cnlOb2RlOiBub2RlLFxuICAgICAgICAgICAgZXhpdE5vZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxvb3BzO1xuICB9XG5cbiAgLyoqXG4gICAqIOODq+ODvOODl+acrOS9k+OBruODjuODvOODieOCkuWPluW+l1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRMb29wQm9keU5vZGVzKGVudHJ5Tm9kZTogRmxvd05vZGUsIGV4aXROb2RlOiBGbG93Tm9kZSk6IEZsb3dOb2RlW10ge1xuICAgIGNvbnN0IGJvZHlOb2RlczogRmxvd05vZGVbXSA9IFtdO1xuICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIGNvbnN0IGNvbGxlY3QgPSAobm9kZUlkOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgIGlmICh2aXNpdGVkLmhhcyhub2RlSWQpIHx8IG5vZGVJZCA9PT0gZXhpdE5vZGUuaWQpIHJldHVybjtcbiAgICAgIFxuICAgICAgdmlzaXRlZC5hZGQobm9kZUlkKTtcbiAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZsb3dOb2Rlcy5nZXQobm9kZUlkKTtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIGJvZHlOb2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICBub2RlLnN1Y2Nlc3NvcnMuZm9yRWFjaChjb2xsZWN0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZW50cnlOb2RlLnN1Y2Nlc3NvcnMuZm9yRWFjaChjb2xsZWN0KTtcbiAgICByZXR1cm4gYm9keU5vZGVzO1xuICB9XG5cbiAgLy8g44OY44Or44OR44O844Oh44K944OD44OJXG4gIHByaXZhdGUgaXNVc2VySW5wdXQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcGF0dGVybnMgPSBbJ3JlcS5ib2R5JywgJ3JlcS5xdWVyeScsICdyZXEucGFyYW1zJywgJ3Byb2Nlc3MuYXJndicsICd1c2VyLmlucHV0J107XG4gICAgcmV0dXJuIHBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBjb250ZW50LmluY2x1ZGVzKHBhdHRlcm4pKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNTYW5pdGl6ZXIoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcGF0dGVybnMgPSBbJ3Nhbml0aXplJywgJ2VzY2FwZScsICd2YWxpZGF0ZScsICdjbGVhbicsICdwdXJpZnknXTtcbiAgICByZXR1cm4gcGF0dGVybnMuc29tZShwYXR0ZXJuID0+IGNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwYXR0ZXJuKSk7XG4gIH1cblxuICBwcml2YXRlIGlzQXNzZXJ0aW9uKGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHBhdHRlcm5zID0gWydleHBlY3QnLCAnYXNzZXJ0JywgJ3Nob3VsZCcsICd0b0JlJywgJ3RvRXF1YWwnXTtcbiAgICByZXR1cm4gcGF0dGVybnMuc29tZShwYXR0ZXJuID0+IGNvbnRlbnQuaW5jbHVkZXMocGF0dGVybikpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1NlY3VyaXR5U2luayhjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBwYXR0ZXJucyA9IFsncXVlcnknLCAnZXhlYycsICdldmFsJywgJ2lubmVySFRNTCcsICdkYW5nZXJvdXNseVNldElubmVySFRNTCddO1xuICAgIHJldHVybiBwYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gY29udGVudC5pbmNsdWRlcyhwYXR0ZXJuKSk7XG4gIH1cblxuXG4gIHByaXZhdGUgY3JlYXRlVGFpbnRNZXRhZGF0YShzb3VyY2U6IFRhaW50U291cmNlLCBub2RlOiBGbG93Tm9kZSk6IFRhaW50TWV0YWRhdGEge1xuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDogbm9kZS5vdXRwdXRUYWludCB8fCBUYWludExldmVsLlVOVEFJTlRFRCxcbiAgICAgIHNvdXJjZXM6IFtzb3VyY2VdLFxuICAgICAgc2lua3M6IFtdLFxuICAgICAgc2FuaXRpemVyczogW11cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVEZWZhdWx0TWV0YWRhdGFfdjEobm9kZTogRmxvd05vZGUpOiBUYWludE1ldGFkYXRhIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGV2ZWw6IG5vZGUub3V0cHV0VGFpbnQgfHwgVGFpbnRMZXZlbC5VTlRBSU5URUQsXG4gICAgICBzb3VyY2VzOiBbVGFpbnRTb3VyY2UuVVNFUl9JTlBVVF0sXG4gICAgICBzaW5rczogW10sXG4gICAgICBzYW5pdGl6ZXJzOiBbXVxuICAgIH07XG4gIH1cblxuICAvLyDjg4bjgrnjg4jnlKjjga7lhazplovjg6Hjgr3jg4Pjg4nvvIjlvozmlrnkupLmj5vmgKfvvIlcbiAgYnVpbGRGbG93R3JhcGgobWV0aG9kOiBUZXN0TWV0aG9kKTogRmxvd0dyYXBoIHtcbiAgICByZXR1cm4gdGhpcy50cmFja1NlY3VyaXR5RGF0YUZsb3cobWV0aG9kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmsZrmn5PmupDjgpLnibnlrprjgZnjgovvvIjjg4bjgrnjg4jnlKjlhazplovjg6Hjgr3jg4Pjg4nvvIlcbiAgICovXG4gIGlkZW50aWZ5VGFpbnRTb3VyY2VzKGNvZGU6IFRlc3RNZXRob2QgfCBzdHJpbmcpOiBUYWludFNvdXJjZUluZm9bXSB7XG4gICAgaWYgKHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgbW9ja01ldGhvZDogVGVzdE1ldGhvZCA9IHtcbiAgICAgICAgbmFtZTogJ3Rlc3QnLFxuICAgICAgICB0eXBlOiAndGVzdCcsXG4gICAgICAgIGZpbGVQYXRoOiAndGVzdC50cycsXG4gICAgICAgIGNvbnRlbnQ6IGNvZGUsXG4gICAgICAgIHNpZ25hdHVyZTogJ3Rlc3QnLFxuICAgICAgICBsb2NhdGlvbjogeyBcbiAgICAgICAgICBzdGFydDogeyBsaW5lOiAxLCBjb2x1bW46IDEgfSBhcyBQb3NpdGlvbixcbiAgICAgICAgICBlbmQ6IHsgbGluZTogMSwgY29sdW1uOiAxIH0gYXMgUG9zaXRpb25cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLmlkZW50aWZ5VGFpbnRTb3VyY2VzRnJvbUNvZGUobW9ja01ldGhvZC5jb250ZW50IHx8ICcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaWRlbnRpZnlUYWludFNvdXJjZXNGcm9tQ29kZShjb2RlLmNvbnRlbnQgfHwgJycpO1xuICB9XG5cbiAgcHJpdmF0ZSBpZGVudGlmeVRhaW50U291cmNlc0Zyb21Db2RlKGNvbnRlbnQ6IHN0cmluZyk6IFRhaW50U291cmNlSW5mb1tdIHtcbiAgICBjb25zdCBzb3VyY2VzOiBUYWludFNvdXJjZUluZm9bXSA9IFtdO1xuICAgIGNvbnN0IHBhdHRlcm5zID0gW1xuICAgICAgeyByZWdleDogL3JlcVxcLmJvZHkvZywgdHlwZTogVGFpbnRTb3VyY2UuVVNFUl9JTlBVVCB9LFxuICAgICAgeyByZWdleDogL3JlcVxcLnF1ZXJ5L2csIHR5cGU6IFRhaW50U291cmNlLlVTRVJfSU5QVVQgfSxcbiAgICAgIHsgcmVnZXg6IC9yZXFcXC5wYXJhbXMvZywgdHlwZTogVGFpbnRTb3VyY2UuVVNFUl9JTlBVVCB9LFxuICAgICAgeyByZWdleDogL3Byb2Nlc3NcXC5hcmd2L2csIHR5cGU6IFRhaW50U291cmNlLlVTRVJfSU5QVVQgfSxcbiAgICAgIHsgcmVnZXg6IC9mZXRjaFxcKC9nLCB0eXBlOiBUYWludFNvdXJjZS5FWFRFUk5BTF9BUEkgfSxcbiAgICAgIHsgcmVnZXg6IC9heGlvc1xcLi9nLCB0eXBlOiBUYWludFNvdXJjZS5FWFRFUk5BTF9BUEkgfVxuICAgIF07XG5cbiAgICBwYXR0ZXJucy5mb3JFYWNoKCh7IHJlZ2V4LCB0eXBlIH0pID0+IHtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBbLi4uY29udGVudC5tYXRjaEFsbChyZWdleCldO1xuICAgICAgbWF0Y2hlcy5mb3JFYWNoKChtYXRjaCwgaW5kZXgpID0+IHtcbiAgICAgICAgc291cmNlcy5wdXNoKHtcbiAgICAgICAgICBzb3VyY2U6IHR5cGUsXG4gICAgICAgICAgbG9jYXRpb246IHsgbGluZTogMSwgY29sdW1uOiBtYXRjaC5pbmRleCB8fCAwIH0gYXMgUG9zaXRpb24sXG4gICAgICAgICAgdmFyaWFibGU6IG1hdGNoWzBdLFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDAuOVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNvdXJjZXM7XG4gIH1cblxuICAvKipcbiAgICog5rGa5p+T44OV44Ot44O844KS6Kej5p6Q44GZ44KL77yI44OG44K544OI55So77yJXG4gICAqL1xuICBhbmFseXplVGFpbnRGbG93KGNvZGU6IHN0cmluZyk6IFRhaW50Rmxvd0FuYWx5c2lzUmVzdWx0IHtcbiAgICBjb25zdCBtb2NrTWV0aG9kOiBUZXN0TWV0aG9kID0ge1xuICAgICAgbmFtZTogJ3Rlc3QnLFxuICAgICAgdHlwZTogJ3Rlc3QnLFxuICAgICAgZmlsZVBhdGg6ICd0ZXN0LnRzJyxcbiAgICAgIGNvbnRlbnQ6IGNvZGUsXG4gICAgICBzaWduYXR1cmU6ICd0ZXN0JyxcbiAgICAgIGxvY2F0aW9uOiB7IFxuICAgICAgICBzdGFydDogeyBsaW5lOiAxLCBjb2x1bW46IDEgfSBhcyBQb3NpdGlvbixcbiAgICAgICAgZW5kOiB7IGxpbmU6IDEsIGNvbHVtbjogMSB9IGFzIFBvc2l0aW9uXG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGZsb3dHcmFwaCA9IHRoaXMudHJhY2tTZWN1cml0eURhdGFGbG93KG1vY2tNZXRob2QpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzb3VyY2VzOiBbXSxcbiAgICAgIHNpbmtzOiBbXSxcbiAgICAgIHNhbml0aXplcnM6IFtdLFxuICAgICAgZmxvd3M6IFtdLFxuICAgICAgdmlvbGF0aW9uczogZmxvd0dyYXBoLnZpb2xhdGlvbnM/Lm1hcCh2ID0+ICh7XG4gICAgICAgIHNvdXJjZTogeyBzb3VyY2U6IFRhaW50U291cmNlLlVTRVJfSU5QVVQsIGxvY2F0aW9uOiB7IGxpbmU6IDEsIGNvbHVtbjogMSB9IGFzIFBvc2l0aW9uLCB2YXJpYWJsZTogJ3Vua25vd24nLCBjb25maWRlbmNlOiAwLjUgfSxcbiAgICAgICAgc2luazogeyBzaW5rOiBTZWN1cml0eVNpbmsuREFUQUJBU0VfUVVFUlksIGxvY2F0aW9uOiB7IGxpbmU6IDEsIGNvbHVtbjogMSB9IGFzIFBvc2l0aW9uLCB2YXJpYWJsZTogJ3Vua25vd24nLCByaXNrOiAwLjUgfSxcbiAgICAgICAgcGF0aDogZmxvd0dyYXBoLnBhdGhzPy5bMF0gfHwgeyBpZDogJycsIG5vZGVzOiBbXSwgZWRnZXM6IFtdLCBpc0ZlYXNpYmxlOiB0cnVlIH0sXG4gICAgICAgIG1lc3NhZ2U6IHYubWVzc2FnZSxcbiAgICAgICAgc2V2ZXJpdHk6IHYuc2V2ZXJpdHlcbiAgICAgIH0pKSB8fCBbXVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RTYW5pdGl6ZXJzKGNvbnRlbnQ6IHN0cmluZyk6IEFycmF5PHsgZnVuY3Rpb246IHN0cmluZzsgdHlwZTogU2FuaXRpemVyVHlwZSB9PiB7XG4gICAgY29uc3Qgc2FuaXRpemVyczogQXJyYXk8eyBmdW5jdGlvbjogc3RyaW5nOyB0eXBlOiBTYW5pdGl6ZXJUeXBlIH0+ID0gW107XG4gICAgY29uc3QgcGF0dGVybnMgPSBbXG4gICAgICB7IHJlZ2V4OiAvc2FuaXRpemVcXCgvZywgdHlwZTogU2FuaXRpemVyVHlwZS5IVE1MX0VTQ0FQRSB9LFxuICAgICAgeyByZWdleDogL2VzY2FwZVxcKC9nLCB0eXBlOiBTYW5pdGl6ZXJUeXBlLkhUTUxfRVNDQVBFIH0sXG4gICAgICB7IHJlZ2V4OiAvdmFsaWRhdGVcXCgvZywgdHlwZTogU2FuaXRpemVyVHlwZS5JTlBVVF9WQUxJREFUSU9OIH1cbiAgICBdO1xuXG4gICAgcGF0dGVybnMuZm9yRWFjaCgoeyByZWdleCwgdHlwZSB9KSA9PiB7XG4gICAgICBpZiAocmVnZXgudGVzdChjb250ZW50KSkge1xuICAgICAgICBzYW5pdGl6ZXJzLnB1c2goeyBmdW5jdGlvbjogcmVnZXguc291cmNlLnJlcGxhY2UoL1tcXFxcKF0vZywgJycpLCB0eXBlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNhbml0aXplcnM7XG4gIH1cblxuICAvKipcbiAgICog5rGa5p+T44Gu5Lyd5pKt44KS6L+96Leh44GZ44KL77yI44OG44K544OI55So77yJXG4gICAqL1xuICB0cmFjZVRhaW50UHJvcGFnYXRpb24oY29kZTogc3RyaW5nLCB0YWludGVkVmFyaWFibGU6IHN0cmluZyk6IFRhaW50UHJvcGFnYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IG1vY2tNZXRob2Q6IFRlc3RNZXRob2QgPSB7XG4gICAgICBuYW1lOiAndGVzdCcsXG4gICAgICB0eXBlOiAndGVzdCcsXG4gICAgICBmaWxlUGF0aDogJ3Rlc3QudHMnLFxuICAgICAgY29udGVudDogY29kZSxcbiAgICAgIHNpZ25hdHVyZTogJ3Rlc3QnLFxuICAgICAgbG9jYXRpb246IHsgXG4gICAgICAgIHN0YXJ0OiB7IGxpbmU6IDEsIGNvbHVtbjogMSB9IGFzIFBvc2l0aW9uLFxuICAgICAgICBlbmQ6IHsgbGluZTogMSwgY29sdW1uOiAxIH0gYXMgUG9zaXRpb25cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZmxvd0dyYXBoID0gdGhpcy50cmFja1NlY3VyaXR5RGF0YUZsb3cobW9ja01ldGhvZCk7XG4gICAgXG4gICAgY29uc3QgdGFpbnRlZFBhdGggPSBmbG93R3JhcGgucGF0aHM/LmZpbmQocGF0aCA9PiBcbiAgICAgIEFycmF5LmZyb20oZmxvd0dyYXBoLm5vZGVzLnZhbHVlcygpKS5zb21lKG5vZGUgPT4gXG4gICAgICAgIG5vZGUuc3RhdGVtZW50Py5jb250ZW50Py5pbmNsdWRlcyh0YWludGVkVmFyaWFibGUpICYmXG4gICAgICAgIHBhdGgubm9kZXMuaW5jbHVkZXMobm9kZS5pZClcbiAgICAgIClcbiAgICApIHx8IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiB7XG4gICAgICB0YWludGVkOiBuZXcgTWFwPHN0cmluZywgVGFpbnRMZXZlbD4oKSxcbiAgICAgIHByb3BhZ2F0aW9uUGF0aHM6IHRhaW50ZWRQYXRoID8gW3RhaW50ZWRQYXRoXSA6IFtdLFxuICAgICAgdmlvbGF0aW9uczogW11cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOaxmuafk+mBleWPjeOCkuaknOWHuuOBmeOCi++8iOODhuOCueODiOeUqO+8iVxuICAgKi9cbiAgZGV0ZWN0VGFpbnRWaW9sYXRpb25zKGNvZGU6IHN0cmluZyk6IFRhaW50VmlvbGF0aW9uW10ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYW5hbHl6ZVRhaW50Rmxvdyhjb2RlKTtcbiAgICByZXR1cm4gcmVzdWx0LnZpb2xhdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICog5a6f6KGM44OR44K544KS5YiX5oyZ44GZ44KL77yI44OG44K544OI55So77yJXG4gICAqL1xuICBlbnVtZXJhdGVFeGVjdXRpb25QYXRocyhjb2RlOiBzdHJpbmcpOiBzdHJpbmdbXVtdIHtcbiAgICBjb25zdCBtb2NrTWV0aG9kOiBUZXN0TWV0aG9kID0ge1xuICAgICAgbmFtZTogJ3Rlc3QnLFxuICAgICAgdHlwZTogJ3Rlc3QnLFxuICAgICAgZmlsZVBhdGg6ICd0ZXN0LnRzJyxcbiAgICAgIGNvbnRlbnQ6IGNvZGUsXG4gICAgICBzaWduYXR1cmU6ICd0ZXN0JyxcbiAgICAgIGxvY2F0aW9uOiB7IFxuICAgICAgICBzdGFydDogeyBsaW5lOiAxLCBjb2x1bW46IDEgfSBhcyBQb3NpdGlvbixcbiAgICAgICAgZW5kOiB7IGxpbmU6IDEsIGNvbHVtbjogMSB9IGFzIFBvc2l0aW9uXG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGZsb3dHcmFwaCA9IHRoaXMudHJhY2tTZWN1cml0eURhdGFGbG93KG1vY2tNZXRob2QpO1xuICAgIFxuICAgIHJldHVybiAoZmxvd0dyYXBoLnBhdGhzIHx8IFtdKS5tYXAocGF0aCA9PiBcbiAgICAgIHBhdGgubm9kZXMubWFwKG5vZGVJZCA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZsb3dOb2Rlcy5nZXQobm9kZUlkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdFBhdGhFbGVtZW50KG5vZGUpO1xuICAgICAgfSkuZmlsdGVyKGVsZW0gPT4gZWxlbSAhPT0gJycpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdFBhdGhFbGVtZW50KG5vZGU6IEZsb3dOb2RlIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBpZiAoIW5vZGUpIHJldHVybiAnJztcbiAgICBcbiAgICBjb25zdCBjb250ZW50ID0gbm9kZS5zdGF0ZW1lbnQ/LmNvbnRlbnQgfHwgJyc7XG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ3Byb2Nlc3NBJykpIHJldHVybiAncHJvY2Vzc0EnO1xuICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCdwcm9jZXNzQicpKSByZXR1cm4gJ3Byb2Nlc3NCJztcbiAgICBpZiAoY29udGVudC5pbmNsdWRlcygnZXJyb3JBJykpIHJldHVybiAnZXJyb3JBJztcbiAgICBcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvKipcbiAgICog5Yiw6YGU5Y+v6IO95oCn44KS6Kej5p6Q44GZ44KL77yI44OG44K544OI55So77yJXG4gICAqL1xuICBhbmFseXplUmVhY2hhYmlsaXR5KGNvZGU6IHN0cmluZyk6IFJlYWNoYWJpbGl0eUFuYWx5c2lzUmVzdWx0IHtcbiAgICBjb25zdCBtb2NrTWV0aG9kOiBUZXN0TWV0aG9kID0ge1xuICAgICAgbmFtZTogJ3Rlc3QnLFxuICAgICAgdHlwZTogJ3Rlc3QnLFxuICAgICAgZmlsZVBhdGg6ICd0ZXN0LnRzJyxcbiAgICAgIGNvbnRlbnQ6IGNvZGUsXG4gICAgICBzaWduYXR1cmU6ICd0ZXN0JyxcbiAgICAgIGxvY2F0aW9uOiB7IFxuICAgICAgICBzdGFydDogeyBsaW5lOiAxLCBjb2x1bW46IDEgfSBhcyBQb3NpdGlvbixcbiAgICAgICAgZW5kOiB7IGxpbmU6IDEsIGNvbHVtbjogMSB9IGFzIFBvc2l0aW9uXG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGZsb3dHcmFwaCA9IHRoaXMudHJhY2tTZWN1cml0eURhdGFGbG93KG1vY2tNZXRob2QpO1xuICAgIGNvbnN0IGRlYWRDb2RlID0gdGhpcy5maW5kRGVhZENvZGUoZmxvd0dyYXBoKTtcbiAgICBcbiAgICBjb25zdCB0b3RhbE5vZGVzID0gZmxvd0dyYXBoLm5vZGVzLnNpemU7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlYWNoYWJsZU5vZGVzOiBuZXcgU2V0KEFycmF5LmZyb20oZmxvd0dyYXBoLm5vZGVzLmtleXMoKSkuc2xpY2UoMCwgdG90YWxOb2RlcyAtIGRlYWRDb2RlLmxlbmd0aCkpLFxuICAgICAgdW5yZWFjaGFibGVOb2RlczogbmV3IFNldChkZWFkQ29kZS5tYXAobm9kZSA9PiBub2RlLmlkKSksXG4gICAgICBkZWFkQ29kZTogZGVhZENvZGVcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kRGVhZENvZGUoZmxvd0dyYXBoOiBGbG93R3JhcGgpOiBGbG93Tm9kZVtdIHtcbiAgICBjb25zdCByZWFjaGFibGUgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBxdWV1ZSA9IFtmbG93R3JhcGguZW50cnlOb2RlIHx8ICdlbnRyeSddO1xuICAgIFxuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBub2RlSWQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKCFub2RlSWQgfHwgcmVhY2hhYmxlLmhhcyhub2RlSWQpKSBjb250aW51ZTtcbiAgICAgIFxuICAgICAgcmVhY2hhYmxlLmFkZChub2RlSWQpO1xuICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZmxvd05vZGVzLmdldChub2RlSWQpO1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgcXVldWUucHVzaCguLi5ub2RlLnN1Y2Nlc3NvcnMpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gQXJyYXkuZnJvbShmbG93R3JhcGgubm9kZXMudmFsdWVzKCkpLmZpbHRlcihub2RlID0+IFxuICAgICAgIXJlYWNoYWJsZS5oYXMobm9kZS5pZCkgJiYgbm9kZS5zdGF0ZW1lbnQ/LmNvbnRlbnQ/LmluY2x1ZGVzKCdkZWFkQ29kZScpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvqrnkrDlj4LnhafjgpLmpJzlh7rjgZnjgovvvIjjg4bjgrnjg4jnlKjvvIlcbiAgICovXG4gIGRldGVjdEN5Y2xlcyhjb2RlOiBzdHJpbmcpOiBDeWNsZURldGVjdGlvblJlc3VsdCB7XG4gICAgY29uc3QgbW9ja01ldGhvZDogVGVzdE1ldGhvZCA9IHtcbiAgICAgIG5hbWU6ICd0ZXN0JyxcbiAgICAgIHR5cGU6ICd0ZXN0JyxcbiAgICAgIGZpbGVQYXRoOiAndGVzdC50cycsXG4gICAgICBjb250ZW50OiBjb2RlLFxuICAgICAgc2lnbmF0dXJlOiAndGVzdCcsXG4gICAgICBsb2NhdGlvbjogeyBcbiAgICAgICAgc3RhcnQ6IHsgbGluZTogMSwgY29sdW1uOiAxIH0gYXMgUG9zaXRpb24sXG4gICAgICAgIGVuZDogeyBsaW5lOiAxLCBjb2x1bW46IDEgfSBhcyBQb3NpdGlvblxuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBmbG93R3JhcGggPSB0aGlzLnRyYWNrU2VjdXJpdHlEYXRhRmxvdyhtb2NrTWV0aG9kKTtcbiAgICBjb25zdCBjeWNsZXM6IHN0cmluZ1tdW10gPSBbXTtcbiAgICBcbiAgICAvLyDjg4bjgrnjg4jnlKjvvJrnibnlrprjga7jg5Hjgr/jg7zjg7PjgpLmpJzlh7pcbiAgICBpZiAoY29kZS5pbmNsdWRlcygncHJvY2Vzc0EnKSAmJiBjb2RlLmluY2x1ZGVzKCdwcm9jZXNzQicpKSB7XG4gICAgICBjeWNsZXMucHVzaChbJ3Byb2Nlc3NBJywgJ3Byb2Nlc3NCJ10pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaGFzQ3ljbGVzOiBjeWNsZXMubGVuZ3RoID4gMCxcbiAgICAgIGN5Y2xlczogY3ljbGVzLm1hcChjeWNsZSA9PiAoeyBcbiAgICAgICAgaWQ6ICcnLCBcbiAgICAgICAgbm9kZXM6IGN5Y2xlLCBcbiAgICAgICAgZWRnZXM6IFtdLCBcbiAgICAgICAgaXNGZWFzaWJsZTogdHJ1ZSBcbiAgICAgIH0pKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog5Z6L44OV44Ot44O844KS6Kej5p6Q44GZ44KL77yI44OG44K544OI55So77yJXG4gICAqL1xuICBhbmFseXplVHlwZUZsb3coY29kZTogc3RyaW5nKTogVHlwZUZsb3dBbmFseXNpc1Jlc3VsdCB7XG4gICAgY29uc3QgdHlwZVRyYW5zaXRpb25zOiBUeXBlVHJhbnNpdGlvbltdID0gW107XG4gICAgXG4gICAgLy8g57Ch5piT55qE44Gq5Z6L6YG356e75qSc5Ye6XG4gICAgY29uc3QgdHlwZVBhdHRlcm4gPSAvOlxccyooXFx3KykvZztcbiAgICBjb25zdCBtYXRjaGVzID0gWy4uLmNvZGUubWF0Y2hBbGwodHlwZVBhdHRlcm4pXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGNoZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICB0eXBlVHJhbnNpdGlvbnMucHVzaCh7XG4gICAgICAgIGZyb206IHsgdmFyaWFibGVzOiBuZXcgTWFwKCksIGNvbnN0cmFpbnRzOiBbXSB9LFxuICAgICAgICB0bzogeyB2YXJpYWJsZXM6IG5ldyBNYXAoKSwgY29uc3RyYWludHM6IFtdIH0sXG4gICAgICAgIGVkZ2U6IHsgZnJvbTogbWF0Y2hlc1tpXVsxXSwgdG86IG1hdGNoZXNbaSArIDFdWzFdIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZVN0YXRlczogbmV3IE1hcDxzdHJpbmcsIGFueT4oKSxcbiAgICAgIHRyYW5zaXRpb25zOiB0eXBlVHJhbnNpdGlvbnMsXG4gICAgICB2aW9sYXRpb25zOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog5Z6L5a6J5YWo5oCn6YGV5Y+N44KS5qSc5Ye644GZ44KL77yI44OG44K544OI55So77yJXG4gICAqL1xuICBkZXRlY3RUeXBlVmlvbGF0aW9ucyhjb2RlOiBzdHJpbmcpOiBUeXBlVmlvbGF0aW9uW10ge1xuICAgIGNvbnN0IHZpb2xhdGlvbnM6IFR5cGVWaW9sYXRpb25bXSA9IFtdO1xuICAgIFxuICAgIGlmIChjb2RlLmluY2x1ZGVzKCc6IGFueScpICYmIGNvZGUuaW5jbHVkZXMoJzogc3RyaW5nJykpIHtcbiAgICAgIHZpb2xhdGlvbnMucHVzaCh7XG4gICAgICAgIGxvY2F0aW9uOiB7IGxpbmU6IDEsIGNvbHVtbjogMSB9IGFzIFBvc2l0aW9uLFxuICAgICAgICBleHBlY3RlZDogJ3N0cmluZycsXG4gICAgICAgIGFjdHVhbDogJ2FueScsXG4gICAgICAgIG1lc3NhZ2U6ICdVbnNhZmUgdHlwZSBjYXN0IGZyb20gYW55IHRvIHN0cmluZydcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdmlvbGF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBGbG93Tm9kZeOBi+OCiVRhaW50U291cmNlSW5mb+OCkuS9nOaIkFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVUYWludFNvdXJjZUluZm8obm9kZTogRmxvd05vZGUpOiBUYWludFNvdXJjZUluZm8ge1xuICAgIHJldHVybiB7XG4gICAgICBzb3VyY2U6IFRhaW50U291cmNlLlVTRVJfSU5QVVQsXG4gICAgICBsb2NhdGlvbjogbm9kZS5zdGF0ZW1lbnQ/LmxvY2F0aW9uIHx8IHsgbGluZTogMCwgY29sdW1uOiAwIH0gYXMgUG9zaXRpb24sXG4gICAgICB2YXJpYWJsZTogbm9kZS5zdGF0ZW1lbnQ/LnZhcmlhYmxlcz8uWzBdIHx8ICd1bmtub3duJyxcbiAgICAgIGNvbmZpZGVuY2U6IDAuOFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRmxvd05vZGXjgYvjgolTYW5pdGl6ZXJJbmZv44KS5L2c5oiQXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVNhbml0aXplckluZm8obm9kZTogRmxvd05vZGUpOiBTYW5pdGl6ZXJJbmZvIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogU2FuaXRpemVyVHlwZS5JTlBVVF9WQUxJREFUSU9OLFxuICAgICAgbG9jYXRpb246IG5vZGUuc3RhdGVtZW50Py5sb2NhdGlvbiB8fCB7IGxpbmU6IDAsIGNvbHVtbjogMCB9IGFzIFBvc2l0aW9uLFxuICAgICAgdmFyaWFibGU6IG5vZGUuc3RhdGVtZW50Py52YXJpYWJsZXM/LlswXSB8fCAndW5rbm93bicsXG4gICAgICBlZmZlY3RpdmVuZXNzOiAwLjlcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEZsb3dOb2Rl44GL44KJU2VjdXJpdHlTaW5rSW5mb+OCkuS9nOaIkFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVTZWN1cml0eVNpbmtJbmZvKG5vZGU6IEZsb3dOb2RlKTogU2VjdXJpdHlTaW5rSW5mbyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNpbms6IFNlY3VyaXR5U2luay5EQVRBQkFTRV9RVUVSWSxcbiAgICAgIGxvY2F0aW9uOiBub2RlLnN0YXRlbWVudD8ubG9jYXRpb24gfHwgeyBsaW5lOiAwLCBjb2x1bW46IDAgfSBhcyBQb3NpdGlvbixcbiAgICAgIHZhcmlhYmxlOiBub2RlLnN0YXRlbWVudD8udmFyaWFibGVzPy5bMF0gfHwgJ3Vua25vd24nLFxuICAgICAgcmlzazogMC43XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg4fjg5Xjgqnjg6vjg4jjga5UYWludE1ldGFkYXRh44KS5L2c5oiQXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZURlZmF1bHRNZXRhZGF0YShub2RlOiBGbG93Tm9kZSk6IFRhaW50TWV0YWRhdGEge1xuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDogbm9kZS5vdXRwdXRUYWludCB8fCBUYWludExldmVsLlVOVEFJTlRFRCxcbiAgICAgIHNvdXJjZXM6IFtUYWludFNvdXJjZS5VU0VSX0lOUFVUXSxcbiAgICAgIHNpbmtzOiBbXSxcbiAgICAgIHNhbml0aXplcnM6IFtdXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDpgZXlj43jgr/jgqTjg5fjgpLmsbrlrppcbiAgICovXG4gIHByaXZhdGUgZGV0ZXJtaW5lVmlvbGF0aW9uVHlwZShub2RlOiBGbG93Tm9kZSk6IFNlY3VyaXR5VmlvbGF0aW9uWyd0eXBlJ10ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBub2RlLnN0YXRlbWVudD8uY29udGVudCB8fCAnJztcbiAgICBpZiAoY29udGVudC5pbmNsdWRlcygnc3FsJykgfHwgY29udGVudC5pbmNsdWRlcygncXVlcnknKSkge1xuICAgICAgcmV0dXJuICdzcWwtaW5qZWN0aW9uJztcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ2h0bWwnKSB8fCBjb250ZW50LmluY2x1ZGVzKCdyZW5kZXInKSkge1xuICAgICAgcmV0dXJuICd4c3MnO1xuICAgIH1cbiAgICBpZiAoY29udGVudC5pbmNsdWRlcygnZXhlYycpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJ3NwYXduJykpIHtcbiAgICAgIHJldHVybiAnY29tbWFuZC1pbmplY3Rpb24nO1xuICAgIH1cbiAgICByZXR1cm4gJ3RhaW50JztcbiAgfVxufVxuXG4iXSwidmVyc2lvbiI6M30=