## Rimor MVP要件定義書 v1.0（アジャイル最速MVP型）

### 第1章：2週間MVP要件定義

#### 1.1 Day 1-2で実装する最小限コア（100行以内）

```yaml
必須機能:
  1. テストファイル検出:
     - .test.js, .spec.js, __tests__/ディレクトリを探す
     - 再帰的なファイル探索
     
  2. プラグインインターフェース:
     - analyze(filePath) メソッドのみ
     - Issue型の返却
     
  3. 実行エンジン:
     - ファイルとプラグインのループ処理
     - 結果の集約
```

```typescript
// これだけ！最小限の型定義
interface IPlugin {
  name: string;
  analyze(filePath: string): Promise<Issue[]>;
}

interface Issue {
  type: string;
  severity: 'error' | 'warning';
  message: string;
}
```

#### 1.2 Day 3-4で作る最初のプラグイン

```yaml
TestExistencePlugin:
  機能: 
    - srcファイルに対応するテストファイルの存在確認
    - 20行以内で実装
  
  価値:
    - 即座に「テストがない」ファイルを発見
    - シンプルだが実用的
```

#### 1.3 Day 5-6の基本CLI

```yaml
コマンド:
  rimor analyze <path>
  
出力:
  - ファイル名と問題のリスト
  - 簡単なサマリー（X個中Y個にテストあり）
  - 実行時間
```

### 第2章：毎日の改善サイクル要件

#### 2.1 ドッグフーディング駆動開発

```yaml
Day 3以降の日次サイクル:
  朝（30分）:
    - 前日の実装を自プロジェクトで実行
    - エラーや不具合を記録
    
  昼（2時間）:
    - 最も痛い問題を1つ選んで修正
    - 小さな機能追加（1つだけ）
    
  夕方（30分）:
    - ビルドとテスト
    - 翌日の課題リスト更新
```

#### 2.2 発見される問題の予測と対策

```yaml
Day 3-4で発見される問題:
  - "TypeScriptが認識されない" 
    → .ts, .tsx を追加（5分で修正）
  
  - "node_modulesも検索してしまう"
    → 除外パターン追加（10分で修正）
    
Day 5-6で発見される問題:
  - "結果が見づらい"
    → chalkで色付け（15分で修正）
    
  - "設定ファイルが欲しい"
    → .rimorrc.json 対応（30分で修正）
```

### 第3章：Week 2の拡張要件

#### 3.1 実用的なプラグイン追加

```yaml
AssertionExistsPlugin（Day 7-8）:
  機能: expect文があるかチェック
  価値: "テストはあるが中身が空"を発見
  
AsyncPatternPlugin（Day 9-10）:
  機能: async/awaitの適切な使用をチェック
  価値: "非同期テストの記述ミス"を発見
```

#### 3.2 最小限のレポート機能

```yaml
Day 11-12の要件:
  - JSON出力（--format=json）
  - 基本的な統計情報
  - ファイル別のスコア
```

### 第4章：技術的負債の管理

#### 4.1 意図的な手抜きと記録

```typescript
// debt-tracker.md に記録
class TechnicalDebt {
  debts = [
    {
      id: 'MVP-001',
      description: 'エラーハンドリングなし',
      impact: 'クラッシュの可能性',
      plannedFix: 'Week 3',
      reason: 'MVP期間短縮（2日節約）'
    },
    {
      id: 'MVP-002',
      description: '設定ファイルなし',
      impact: '使いづらい',
      plannedFix: 'Day 6',
      reason: '最小限から始める'
    }
  ];
}
```

#### 4.2 リファクタリングのタイミング

```yaml
絶対にリファクタリングしない期間:
  Day 1-7: 動くことが最優先
  
小規模リファクタリング可能:
  Day 8-14: 1日30分まで
  
本格的リファクタリング:
  Week 3以降: MVPの価値が証明されてから
```

### 第5章：成功の測定基準

#### 5.1 定量的指標（2週間後）

```yaml
必達目標:
  - 自プロジェクトで10個以上の問題発見
  - 3種類のプラグイン稼働
  - 実行時間10秒以内
  - クラッシュゼロ

努力目標:
  - チームメンバー1人が使用
  - 実際の改善1件
  - GitHub公開
```

#### 5.2 定性的指標

```yaml
感触の確認:
  - "これは便利かも"という実感
  - 次に作りたいプラグインのアイデア3個以上
  - 改善したい点のリスト10個以上
```

### 第6章：Day-by-Day実装チェックリスト

```yaml
Day 1:
  ☐ プロジェクト初期化
  ☐ TypeScript設定
  ☐ 基本的なファイル探索

Day 2:
  ☐ プラグインインターフェース
  ☐ 基本的な実行ループ
  ☐ 最初の実行成功

Day 3:
  ☐ TestExistencePlugin実装
  ☐ 自プロジェクトで実行
  ☐ バグ修正

Day 4:
  ☐ TypeScript対応
  ☐ 除外パターン
  ☐ 基本的なCLI

Day 5-6:
  ☐ 引数パース（yargs）
  ☐ 色付き出力（chalk）
  ☐ エラーハンドリング最小限

Day 7-8:
  ☐ AssertionExistsPlugin
  ☐ 複数プラグイン対応
  ☐ 実行時間測定

Day 9-10:
  ☐ 簡単な設定ファイル
  ☐ JSON出力
  ☐ プラグイン無効化機能

Day 11-12:
  ☐ README.md作成
  ☐ npm scripts整備
  ☐ 最初のリリースタグ

Day 13-14:
  ☐ チームメンバーにデモ
  ☐ フィードバック収集
  ☐ v0.1.0リリース
```

### 第7章：MVP後の進化パス（参考）

```yaml
Week 3-4（基礎固め）:
  - エラーハンドリング改善
  - パフォーマンス最適化
  - プラグイン5個追加

Month 2（本格化）:
  - Linter連携
  - 対話型システムの基礎
  - ドメイン辞書の開始

Month 3（差別化）:
  - 組織固有知識の蓄積
  - 高度な分析機能
  - コミュニティ公開
```

### 第8章：アンチパターンと禁止事項

```yaml
絶対にやらないこと（最初の2週間）:
  ❌ 完璧なアーキテクチャ設計
  ❌ 汎用的なプラグインAPI
  ❌ UIの作成
  ❌ 詳細なドキュメント
  ❌ テストカバレッジ100%
  ❌ パフォーマンス最適化
  
理由:
  動かないものに価値はない
  フィードバックなしの設計は失敗する
  完璧は成功の敵
```

### まとめ：成功への最短パス

**最も重要な原則**：
1. **今日動くものを作る**（明日ではない）
2. **自分で使う**（他人ではない）
3. **1つずつ改善**（全部一度にではない）
4. **記録する**（忘れないために）
5. **楽しむ**（苦行にしない）

この要件定義に従えば、2週間後には実際に価値を提供する最小限のRimorが動いており、そこから継続的に成長させることができます。技術的負債は意図的に管理し、価値が証明されてから返済します。

**Day 1の最初の一歩**：
```bash
$ mkdir rimor && cd rimor
$ npm init -y
$ npm install typescript @types/node
$ echo "console.log('Hello Rimor!');" > index.ts
$ npx ts-node index.ts
```

これで始まりです！